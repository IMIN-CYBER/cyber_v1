import base64
exec(base64.b64decode("IyEvdXNyL2Jpbi9weXRob24NCiMgLSotIGNvZGluZzogdXRmLTggLSotDQojIC0tLS0tLSBbIEdhdXNhaCBEaW9wcmVrIE50YXIgRXJyb3IgXSAtLS0tLS0gIw0KQXV0aG9yICAgID0gJ1ZSRUxMJw0KRmFjZWJvb2sgID0gJ2ZhY2Vib29rLmNvbS8xMDAwNjM1NTEyNTIzNzUnDQpTeWFmaWkgID0gMTAwMDYzNTUxMjUyMzc1DQpQb3N0aW5nYW4gPSA0NDA3NTg5MjQ3MTkxNDYNCmtvbWVudGFyICAgPSAnXG5cbmh0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS8nICsgc3RyKFBvc3RpbmdhbikNCiMjIyMjID4+Pj4gSU1QT1JUIE1PRFVMRQ0KaW1wb3J0IHJlcXVlc3RzLGJzNCxzeXMsb3MscmFuZG9tLHRpbWUscmUsanNvbix1dWlkLHN1YnByb2Nlc3MNCmZyb20gcmFuZG9tIGltcG9ydCByYW5kaW50DQpmcm9tIGNvbmN1cnJlbnQuZnV0dXJlcyBpbXBvcnQgVGhyZWFkUG9vbEV4ZWN1dG9yIGFzIFRocmVhZFBvb2wNCmZyb20gcmVxdWVzdHMuZXhjZXB0aW9ucyBpbXBvcnQgQ29ubmVjdGlvbkVycm9yDQpmcm9tIGNvbmN1cnJlbnQuZnV0dXJlcyBpbXBvcnQgVGhyZWFkUG9vbEV4ZWN1dG9yDQpmcm9tIGJzNCBpbXBvcnQgQmVhdXRpZnVsU291cCBhcyBwYXINCmZyb20gYnM0IGltcG9ydCBCZWF1dGlmdWxTb3VwIGFzIHBhcnNlcg0KZnJvbSBiczQgaW1wb3J0IEJlYXV0aWZ1bFNvdXANCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGUNCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lDQpmcm9tIHVybGxpYi5wYXJzZSBpbXBvcnQgcXVvdGUNCiMjIyMjIEJVQVQgV0FSTkEgPj4+PiBYDQpaID0gIlx4MWJbMDs5MG0iICAgICAjIEhpdGFtDQpNID0gIlx4MWJbMzg7NTsxOTZtIiAjIE1lcmFoDQpIID0gIlx4MWJbMzg7NTs0Nm0iICAjIEhpamF1DQpLID0gIlx4MWJbMzg7NTsyMjZtIiAjIEt1bmluZw0KQiA9ICJceDFiWzM4OzU7NDRtIiAgIyBCaXJ1DQpVID0gIlx4MWJbMTs5NW0iICAgICAjIFVuZ3UNCkkgPSAiXHgxYlsxOzk2bSIgICAgICMgQmlydSBNdWRhDQpQID0gIlx4MWJbMzg7NTsyMzFtIiAjIFB1dGloDQpKID0gIlx4MWJbMzg7NTsyMDhtIiAjIEppbmdnYQ0KQSA9ICJceDFiWzM4OzU7MjQ4bSIgIyBBYnUtQWJ1DQojIyMjIyBCVUFUIElNUE9SVCBZRyBCRUxVTSBJTlNUQUxMIEFIQUhIQUENCnRyeToNCglpbXBvcnQgcmVxdWVzdHMNCmV4Y2VwdCBJbXBvcnRFcnJvcjoNCglwcmludChmIntIfSAiKQ0KCXByaW50KGYie0h9Wypde019IE1vZHVsZSByZXF1ZXN0cyBiZWx1bSB0ZXJpbnN0YWxsIikNCglvcy5zeXN0ZW0oInBpcCBpbnN0YWxsIHJlcXVlc3RzIikNCnRyeToNCglpbXBvcnQgYnM0DQpleGNlcHQgSW1wb3J0RXJyb3I6DQoJcHJpbnQoZiJ7SH0gIikNCglwcmludChmIntIfVsqXXtNfSBNb2R1bGUgYnM0IGJlbHVtIHRlcmluc3RhbGwiKQ0KCW9zLnN5c3RlbSgicGlwIGluc3RhbGwgYnM0IikNCnRyeToNCglpbXBvcnQgY29uY3VycmVudC5mdXR1cmVzDQpleGNlcHQgSW1wb3J0RXJyb3I6DQoJcHJpbnQoZiJ7SH0gIikNCglwcmludChmIntIfVsqXXtNfSBNb2R1bGUgZnV0dXJlcyBiZWx1bSB0ZXJpbnN0YWxsIikNCglvcy5zeXN0ZW0oInBpcCBpbnN0YWxsIGZ1dHVyZXMiKQ0KaG9zdCA9ICgiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tIikNCkIgPSByYW5kb20uY2hvaWNlKFtILFUsSixLXSkNCiMgUHJvc2VzIGRhdGENCm9zLnN5c3RlbSgnY2xlYXInKQ0Kc3VyYWRhZGkgPSBbIltDWUJFUl0iLCJbQz09PT09XSIsIls9WT09PV0iLCAiWz09Qj09XSIsICJbPT09RT1dIiwgIls9PT09Ul0iLCAiWz09PUM9XSIsICJbPT1CPT1dIiwgIls9RT09PV0iLCAiW1I9PT09XSIsICJceDFiWzA7OTJtW0NZQkVSXSIsIltDPT09PT1dIiwiWz1ZPT09XSIsICJbPT1CPT1dIiwgIls9PT1FPV0iLCAiWz09PT1SXSIsICJbPT09Qz1dIiwgIls9PUI9PV0iLCAiWz1FPT09XSIsICJbUj09PT1dIiwgIlx4MWJbMDs5Mm1bQ1lCRVJdIiwiW0M9PT09PV0iLCJbPVk9PT1dIiwgIls9PUI9PV0iLCAiWz09PUU9XSIsICJbPT09PVJdIiwgIls9PT1DPV0iLCAiWz09Sz09XSIsICJbPUk9PT1dIiwgIltSPT09PV0iLCAiXHgxYlswOzkybVtDWUJFUl0iLCJbWT09PT09XSIsIls9Qj09PV0iLCAiWz09RT09XSIsICJbPT09Uj1dIiwgIls9PT09Q10iLCAiWz09PVk9XSIsICJbPT1CPT1dIiwgIls9RT09PV0iLCAiW1I9PT09XSIsICJceDFiWzA7OTJtW0NZQkVSXSIsIltDPT09PT1dIiwiWz1ZPT09XSIsICJbPT1CPT1dIiwgIls9PT1FPV0iLCAiWz09PT1SXSIsICJbPT09Qz1dIiwgIls9PVk9PV0iLCAiWz1CPT09XSIsICJbUj09PT1dIiwgIlx4MWJbMDs5Mm1bQ1lCRVJdIiwiW0M9PT09PV0iLCJbPVk9PT1dIiwgIls9PUI9PV0iLCAiWz09PUU9XSIsICJbPT09PVJdIiwgIls9PT1DPV0iLCAiWz09WT09XSIsICJbPUI9PT1dIiwgIltSPT09PV0iLCAiXHgxYlswOzkybVtDWUJFUl0iLCJbQz09PT09XSIsIls9WT09PV0iLCAiWz09Qj09XSIsICJbPT09RT1dIiwgIls9PT09Ul0iLCAiWz09PUM9XSIsICJbPT1LPT1dIiwgIls9ST09PV0iLCAiW1I9PT09XSIsICJceDFiWzA7OTJtW0NZQkVSXSIsIltZPT09PT1dIiwiWz1CPT09XSIsICJbPT1FPT1dIiwgIls9PT1SPV0iLCAiWz09PT1DXSIsICJbPT09WT1dIiwgIls9PUI9PV0iLCAiWz1FPT09XSIsICJbUj09PT1dIiwgIlx4MWJbMDs5Mm1bQ1lCRVJdIiwiW0M9PT09PV0iLCJbPVk9PT1dIiwgIls9PUI9PV0iLCAiWz09PU89XSIsICJbPT09PURdIiwgIls9PT1PPV0iLCAiWz09Sz09XSIsICJbPUk9PT1dIiwgIltSPT09PV0iLCAiXHgxYlswOzkybVtDWUJFUl0iLCJbQz09PT09XSIsIls9WT09PV0iLCAiWz09Qj09XSIsICJbPT09RT1dIiwgIls9PT09Ul0iLCAiWz09PUM9XSIsICJbPT1ZPT1dIiwgIls9Qj09PV0iLCAiW1I9PT09XSIsICJceDFiWzA7OTJtW0NZQkVSXSIsIltDPT09PT1dIiwiWz1ZPT09XSIsICJbPT1CPT1dIiwgIls9PT1FPV0iLCAiWz09PT1SXSIsICJbPT09Qz1dIiwgIls9PVk9PV0iLCAiWz1CPT09XSIsICJbUj09PT1dIiwgIlx4MWJbMDs5Mm1bQ1lCRVJdIiwiW0M9PT09PV0iLCJbPVk9PT1dIiwgIls9PUI9PV0iLCAiWz09RT1dIiwgIls9PT09Ul0iLCAiWz09PUM9XSIsICJbPT1ZPT1dIiwgIls9Qj09PV0iLCAiW1I9PT09XSIsICJceDFiWzA7OTJtW0NZQkVSXSIsIltDPT09PT1dIiwiWz1ZPT09XSIsICJbPT1CPT1dIiwgIls9PT1FPV0iLCAiWz09PT1SXSIsICJbPT09Qz1dIiwgIls9PVk9PV0iLCAiWz1CPT09XSIsICJbUj09PT1dIiwgIlx4MWJbMDs5Mm1bQ1lCRVJdIiwiW0M9PT09PV0iLCJbPVk9PT1dIiwgIls9PUI9PV0iLCAiWz09PUU9XSIsICJbPT09PVJdIiwgIls9PT1DPV0iLCAiWz09WT09XSIsICJbPUI9PT1dIiwgIltSPT09PV0iLCAiXHgxYlswOzkybVtDWUJFUl0iLCJbQz09PT09XSIsIls9WT09PV0iLCAiWz09Qj09XSIsICJbPT09RT1dIiwgIls9PT09Ul0iLCAiWz09PUM9XSIsICJbPT1ZPT1dIiwgIls9Qj09PV0iLCAiW1I9PT09XSIsICJceDFiWzA7OTJtW0NZQkVSXSIsIltDPT09PT1dIiwiWz1ZPT09XSIsICJbPT1CPT1dIiwgIls9PT1FPV0iLCAiWz09PT1SXSIsICJbPT09Qz1dIiwgIls9PVk9PV0iLCAiWz1CPT09XSIsICJbUj09PT1dIiwgIlx4MWJbMDs5Mm1bQ1lCRVJdIiwiW0M9PT09PV0iLCJbPVk9PT1dIiwgIls9PUI9PV0iLCAiWz09PUU9XSIsICJbPT09PVJdIiwgIls9PT1DPV0iLCAiWz09WT09XSIsICJbPUI9PT1dIiwgIltSPT09PV0iLCAiXHgxYlswOzkybVtDWUJFUl0iLCJbQz09PT09XSIsIls9WT09PV0iLCAiWz09Qj09XSIsICJbPT09RT1dIiwgIls9PT09Ul0iLCAiWz09PUM9XSIsICJbPT1ZPT1dIiwgIls9Qj09PV0iLCAiW1I9PT09XSIsICJceDFiWzA7OTJtW0NZQkVSXSIsIltDPT09PT1dIiwiWz1ZPT09XSIsICJbPT1CPT1dIiwgIls9PT1FPV0iLCAiWz09PT1SXSIsICJbPT09Qz1dIiwgIls9PVk9PV0iLCAiWz1CPT09XSIsICJbUj09PT1dIiwgIlx4MWJbMDs5Mm1bQ1lCRVJdIiwiW0M9PT09PV0iLCJbPVk9PT1dIiwgIls9PUI9PV0iLCAiWz09PUU9XSIsICJbPT09PVJdIiwgIls9PT1PPV0iLCAiWz09Sz09XSIsICJbPUk9PT1dIiwgIltSPT09PV0iLCAiXHgxYlswOzkybVtDWUJFUl0iLCJbQz09PT09XSIsIls9WT09PV0iLCAiWz09Qj09XSIsICJbPT09Tz1dIiwgIls9PT09RF0iLCAiWz09PU89XSIsICJbPT1LPT1dIiwgIls9ST09PV0iLCAiW1I9PT09XSIsICJceDFiWzA7OTJtW0NZQkVSXSIsIltDPT09PT1dIiwiWz1ZPT09XSIsICJbPT1CPT1dIiwgIls9PT1FPV0iLCAiWz09PT1SXSIsICJbPT09Qz1dIiwgIls9PVk9PV0iLCAiWz1FPT09XSIsICJbUj09PT1dIiwgIlx4MWJbMDs5Mm1bQ1lCRVJdIiwiW0M9PT09PV0iLCJbPVk9PT1dIiwgIls9PUI9PV0iLCAiWz09PVI9XSIsICJbPT09PVJdIiwgIls9PT1DPV0iLCAiWz09WT09XSIsICJbPUI9PT1dIiwgIltSPT09PV0iLCAiXHgxYlswOzkybVtDWUJFUl0iLCJbQz09PT09XSIsIls9WT09PV0iLCAiWz09Qj09XSIsICJbPT09RT1dIiwgIls9PT09Ul0iLCAiWz09PUM9XSIsICJbPT1ZPT1dIiwgIls9Qj09PV0iLCAiW1I9PT09XSIsICJceDFiWzA7OTJtW0NZQkVSXSIsIltDPT09PT1dIiwiWz1ZPT09XSIsICJbPT1CPT1dIiwgIls9PT1FPV0iLCAiWz09PT1SXSIsICJbPT09Qz1dIiwgIls9PVk9PV0iLCAiWz1CPT09XSIsICJbUj09PT1dIiwgIlx4MWJbMDs5Mm1bQ1lCRVJdIiwiW0M9PT09PV0iLCJbPVk9PT1dIiwgIls9PUI9PV0iLCAiWz09PUU9XSIsICJbPT09PVJdIiwgIls9PT1DPV0iLCAiWz09WT09XSIsICJbPUk9PT1dIiwgIltSPT09PV0iLCAiXHgxYlswOzkybVtDWUJFUl0iLCJbUj09PT09XSIsIls9Qj09PV0iLCAiWz09RT09XSIsICJbPT09Uj1dIiwgIls9PT09Q10iLCAiWz09PVk9XSIsICJbPT1CPT1dIiwgIls9RT09PV0iLCAiW1I9PT09XSIsICJceDFiWzA7OTJtW0NZQkVSXSIsIltDPT09PT1dIiwiWz1ZPT09XSIsICJbPT1CPT1dIiwgIls9PT1FPV0iLCAiWz09PT1SXSIsICJbPT09Qz1dIiwgIls9PVk9PV0iLCAiWz1CPT09XSIsICJbUj09PT1dIiwgIlx4MWJbMDs5Mm1bQ1lCRVJdIiwiW0M9PT09PV0iLCJbPVk9PT1dIiwgIls9PUI9PV0iLCAiWz09PUU9XSIsICJbPT09PVJdIiwgIls9PT1DPV0iLCAiWz09WT09XSIsICJbPUI9PT1dIiwgIltSPT09PV0iLCAiXHgxYlswOzkybVtDWUJFUl0iLCJbQz09PT09XSIsIls9WT09PV0iLCAiWz09Qj09XSIsICJbPT09RT1dIiwgIls9PT09Ul0iLCAiWz09PUM9XSIsICJbPT1ZPT1dIiwgIls9Qj09PV0iLCAiW1I9PT09XSIsICJceDFiWzA7OTJtW0NZQkVSXSIsIltDPT09PT1dIiwiWz1ZPT09XSIsICJbPT1CPT1dIiwgIls9PT1FPV0iLCAiWz09PT1SXSIsICJbPT09Qz1dIiwgIls9PVk9PV0iLCAiWz1CPT09XSIsICJbUj09PT1dIiwgIlx4MWJbMDs5Mm1bQ1lCRVJdIiwiW0M9PT09PV0iLCJbPVk9PT1dIiwgIls9PUI9PV0iLCAiWz09PUU9XSIsICJbPT09PVJdIiwgIls9PT1DPV0iLCAiWz09WT09XSIsICJbPUI9PT1dIiwgIltSPT09PV0iLCAiXHgxYlswOzkybVtDWUJFUl0iLCJbQz09PT09XSIsIls9WT09PV0iLCAiWz09Qj09XSIsICJbPT09RT1dIiwgIls9PT09Ul0iLCAiWz09PUM9XSIsICJbPT1ZPT1dIiwgIls9Qj09PV0iLCAiW1I9PT09XSIsICJceDFiWzA7OTJtW0NZQkVSXSIsIltDPT09PT1dIiwiWz1ZPT09XSIsICJbPT1CPT1dIiwgIls9PT1FPV0iLCAiWz09PT1SXSIsICJbPT09Qz1dIiwgIls9PVk9PV0iLCAiWz1CPT09XSIsICJbUj09PT1dIiwgIlx4MWJbMDs5Mm1bQ1lCRVJdIiwiW0M9PT09PV0iLCJbPVk9PT1dIiwgIls9PUI9PV0iLCAiWz09PUU9XSIsICJbPT09PVJdIiwgIls9PT1DPV0iLCAiWz09WT09XSIsICJbPUI9PT1dIiwgIltSPT09PV0iLCAiXHgxYlswOzkybVtDWUJFUl0iXQ0KZm9yIGkgaW4gcmFuZ2UobGVuKHN1cmFkYWRpKSk6DQogICAgdGltZS5zbGVlcCgwLjA0MjMpDQogICAgc3lzLnN0ZG91dC53cml0ZSgiXHJcMzNbMTs5Nm1CT1QgQ1lCRVIgQ1JBQ0sgXDMzWzE7OTZtQlkgOiBcMDMzWzkybUlNSU4gQ1lCRVIgWERceDFiWzA7MzZtICIrIHJhbmRvbS5jaG9pY2UoWydceDFiWzA7MzNtJywgJ1x4MWJbMDszNm0nLCAnXHgxYlswOzM1bScsICdceDFiWzA7MzZtJywgJ1x4MWJbMDszNW0nXSkgKyBzdXJhZGFkaVtpICUgbGVuKHN1cmFkYWRpKV0pDQogICAgc3lzLnN0ZG91dC5mbHVzaCgpDQpvcy5zeXN0ZW0oImNsZWFyIikNCg0KIyBCQU5ORVINCiMjIyMgQlVBVCBCQU5ORVINCmRlZiBiYW5uZXIoKToNCiAgICB3YXJfZG9tID0gcmFuZG9tLmNob2ljZShbUCxLLEIsSixVLEhdKQ0KICAgIHByaW50KCIiIg0KXDMzWzE7OTZtKiYmJiAgICYmJiYmJiAgICAgJiYmJiYmICAgICYmJiAgICAmJiYmJiYgICAgJiYmXDAzM1sxOzMybQ0KICYmJiAgICYmJiYmJiAgICAgJiYmJiYmICAgICYmJiAgICAmJiYmJiYmICAgJiYmDQogJiYmICAgJiYmICYmJiAgICYmJiAmJiYgICAgJiYmICAgICYmJiAgJiYmICAmJiYNCiAmJiYgICAmJiYgICYmJiAmJiYgICYmJiAgICAmJiYgICAgJiYmICAgJiYmICYmJg0KICYmJiAgICYmJiAgICYmJiYmICAgJiYmICAgICYmJiAgICAmJiYgICAgJiYmJiYmDQogJiYmICAgJiYmICAgICYmJiAgICAmJiYgICAgJiYmICAgICYmJiAgICAgJiYmJiYNCiAmJiYgICAmJiYgICAgICAgICAgICYmJiAgICAmJiYgICAgJiYmJiAgICAgJiYmJg0KXDMzWzE7OTZtJiYmJiYgJiYmJiYmJiAgICAgICAmJiYmJiYgJiYmJiYmICYmJiYmJiYgICAgJiYmXDAzM1sxOzMybQ0KX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fDQoNCiAgTkVXIFNDUklQVCAgIDogXDMzWzE7OTZtRURJVElPTiBMSU1JVEVEXDAzM1sxOzMybQ0KDQogIEZBQ0VCT09LICAgICA6IFwzM1sxOzk2bUlNSU4gQ1lCRVIgWERcMDMzWzE7MzJtDQpcMDMzWzE7MzJtX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXw0KDQogXDMzWzE7OTZt4piG4piGIFwwMzNbMTszMm1TRUxBTUFUIERBVEFORyBLT05UT0wgU0lMQUhLQU4gUElMSUggTUVOVSBDT0xJIE5ZQSBcMzNbMTs5Nm3imIbimIZcMDMzWzE7MzJtIiIiKQ0KIA0KIyMjLS0tLS0tLS0tLVsgVElNRSBdLS0tLS0tLS0tLSAjIyMNCnNrcm5nID0gZGF0ZXRpbWUubm93KCkNCnRhaHVuID0gc2tybmcueWVhcg0KYnVsYW4gPSBza3JuZy5tb250aA0KaGFyaSAgPSBza3JuZy5kYXkNCmJ1bGFuX3R0bCA9IHsiMDEiOiAiSmFudWFyaSIsICIwMiI6ICJGZWJydWFyaSIsICIwMyI6ICJNYTdyZXQiLCAiMDQiOiAiQXByaWwiLCAiMDUiOiAiTWVpIiwgIjA2IjogIkp1bmkiLCAiMDciOiAiSnVsaSIsICIwOCI6ICJBZ3VzdHVzIiwgIjA5IjogIlNlcHRlbWJlciIsICIxMCI6ICJPa3RvYmVyIiwgIjExIjogIk5vdmVtYmVyIiwgIjEyIjogIkRlc2VtYmVyIn0NCmJ1bGFuX2NlayA9IFsiSmFudWFyaSIsICJGZWJydWFyaSIsICJNYXJldCIsICJBcHJpbCIsICJNZWkiLCAiSnVuaSIsICJKdWxpIiwgIkFndXN0dXMiLCAiU2VwdGVtYmVyIiwgIk9rdG9iZXIiLCAiTm92ZW1iZXIiLCAiRGVzZW1iZXIiXQ0KdHJ5Og0KICAgIGlmIGJ1bGFuIDwgMCBvciBidWxhbiA+IDEyOg0KICAgICAgICBleGl0KCkNCiAgICBidWxhbl9za3JuZyA9IGJ1bGFuIC0gMQ0KZXhjZXB0IFZhbHVlRXJyb3I6DQogICAgZXhpdCgpDQpfYnVsYW5fID0gYnVsYW5fY2VrW2J1bGFuX3Nrcm5nXQ0KdGFuZ2dhbCA9ICgiJXMtJXMtJXMiJShoYXJpLF9idWxhbl8sdGFodW4pKQ0KDQojIyMjIyBCVUFUIFNUUiAvTEVODQppZCA9IFtdDQpvayA9IFtdDQpjcCA9IFtdDQpsb29wPTANCg0KIyMjLS0tLS0tLS0tLVsgQ0xFQVIgVEVSTUlOQUwgXS0tLS0tLS0tLS0gIyMjDQpkZWYgcmVzaWsoKToNCiAgICBpZiAibGludXgiIGluIHN5cy5wbGF0Zm9ybS5sb3dlcigpOg0KICAgICAgICB0cnk6b3Muc3lzdGVtKCJjbGVhciIpDQogICAgICAgIGV4Y2VwdDpwYXNzDQogICAgZWxpZiAid2luIiBpbiBzeXMucGxhdGZvcm0ubG93ZXIoKToNCiAgICAgICAgdHJ5Om9zLnN5c3RlbSgiY2xzIikNCiAgICAgICAgZXhjZXB0OnBhc3MNCiAgICBlbHNlOg0KICAgICAgICB0cnk6b3Muc3lzdGVtKCJjbGVhciIpDQogICAgICAgIGV4Y2VwdDpwYXNzDQoNCiMjIyBCVUFUIEFOSU1BU0kgSkFMQU4NCmRlZiBqYWxhbih6KToNCglmb3IgZSBpbiB6ICsgIlxuIjoNCgkJc3lzLnN0ZG91dC53cml0ZShlKQ0KCQlzeXMuc3Rkb3V0LmZsdXNoKCkNCgkJdGltZS5zbGVlcCgwLjAzKQ0KCQkNCiMjIy0tLS0tLS0tLS1bIEdMT0JBTCBVUkwgJiBIRUFERVJTIF0tLS0tLS0tLS0tICMjIw0KdXJsX2J1c2lubmVzcyA9ICJodHRwczovL2J1c2luZXNzLmZhY2Vib29rLmNvbSINCnVhX2J1c2luZXNzID0gIk1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA4LjEuMDsgTUkgOCBCdWlsZC9PUE0xLjE3MTAxOS4wMTEpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS82OS4wLjM0OTcuODYgTW9iaWxlIFNhZmFyaS81MzcuMzYiDQprYXRhX2RldiA9ICdMdSBHYW50ZW5nIEJhbmdldCBCYW5nLiBHdyBNYXUgUmVjb2RlIFNDbHUsIFNvYWxueWEgU2NyaXB0IGxvZSBrZXJlbiBiYW5nJw0Kd2ViX2ZiID0gImh0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS8iDQptX2ZiID0gImh0dHBzOi8vbS5mYWNlYm9vay5jb20vIg0KbWJhc2ljID0gImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS8iDQpoZWFkZXJfZ3J1cCA9IHsidXNlci1hZ2VudCI6ICJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgMTA7IE1pIDlUIFBybyBCdWlsZC9RS1ExLjE5MDgyNS4wMDI7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvODguMC40MzI0LjE4MSBNb2JpbGUgU2FmYXJpLzUzNy4zNiBbRkJBTi9FTUE7RkJMQy9pZF9JRDtGQkFWLzIzOS4wLjAuMTAuMTA5O10ifQ0KDQojIyMtLS0tLS0tLS0tWyBDUkVBVEUgRk9MREVSIF0tLS0tLS0tLS0tICMjIw0KZGVmIG1rZGlyX2RhdGFfbG9naW4oKToNCiAgICAjIE1ha2UgRGlyZWN0b3J5IExvZ2luIERhdGENCiAgICB0cnk6b3MubWtkaXIoImxvZ2luIikNCiAgICBleGNlcHQ6cGFzcw0KICAgICMgTWFrZSBEaXJlY3RvcnkgUmVzdWx0DQogICAgdHJ5Om9zLm1rZGlyKCJDUCIpDQogICAgZXhjZXB0OnBhc3MNCiAgICAjIE1ha2UgRGlyZWN0b3J5IFJlc3VsdA0KICAgIHRyeTpvcy5ta2RpcigiT0siKQ0KICAgIGV4Y2VwdDpwYXNzDQogICAgIyBEZWxldGUgQ29va2llcw0KICAgIHRyeTpvcy5yZW1vdmUoJ2xvZ2luL2Nvb2tpZS5qc29uJykNCiAgICBleGNlcHQ6cGFzcw0KICAgICMgRGVsZXRlIFRva2VuDQogICAgdHJ5Om9zLnJlbW92ZSgnbG9naW4vdG9rZW4uanNvbicpDQogICAgZXhjZXB0OnBhc3MNCiMjIy0tLS0tLS0tLS1bIENIQU5HRSBMQU5HVUFHRSBdLS0tLS0tLS0tLSAjIyMNCmRlZiBsYW5ndWFnZShjb29raWUpOg0KICAgIHRyeToNCiAgICAgICAgd2l0aCByZXF1ZXN0cy5TZXNzaW9uKCkgYXMgeHl6Og0KICAgICAgICAgICAgcmVxID0geHl6LmdldCgnaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL2xhbmd1YWdlLycsY29va2llcz1jb29raWUpDQogICAgICAgICAgICBwcmEgPSBwYXIocmVxLmNvbnRlbnQsJ2h0bWwucGFyc2VyJykNCiAgICAgICAgICAgIGZvciB4IGluIHByYS5maW5kX2FsbCgnZm9ybScseydtZXRob2QnOidwb3N0J30pOg0KICAgICAgICAgICAgICAgIGlmICdCYWhhc2EgSW5kb25lc2lhJyBpbiBzdHIoeCk6DQogICAgICAgICAgICAgICAgICAgIGJhaGFzYSA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICJmYl9kdHNnIiA6IHJlLnNlYXJjaCgnbmFtZT0iZmJfZHRzZyIgdmFsdWU9IiguKj8pIicsc3RyKHJlcS50ZXh0KSkuZ3JvdXAoMSksDQogICAgICAgICAgICAgICAgICAgICAgICAiamF6b2VzdCIgOiByZS5zZWFyY2goJ25hbWU9Imphem9lc3QiIHZhbHVlPSIoLio/KSInLCBzdHIocmVxLnRleHQpKS5ncm91cCgxKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJzdWJtaXQiICA6ICJCYWhhc2EgSW5kb25lc2lhIg0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB1cmwgPSAnaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tJyArIHhbJ2FjdGlvbiddDQogICAgICAgICAgICAgICAgICAgIGV4ZWMgPSB4eXoucG9zdCh1cmwsZGF0YT1iYWhhc2EsY29va2llcz1jb29raWUpDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOnBhc3MNCg0KIyMjLS0tLS0tLS0tLVsgQ09OVkVSVCBVU0VSTkFNRSBLRSBJRCBdLS0tLS0tLS0tLSAjIyMNCmRlZiBjb252ZXJ0X2lkKHVzZXJuYW1lKToNCiAgICB0cnk6DQogICAgICAgIGNvb2tpZSA9IHsnY29va2llJzpvcGVuKCdsb2dpbi9jb29raWUuanNvbicsJ3InKS5yZWFkKCl9DQogICAgICAgIHVybCAgICA9ICdodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vJyArIHVzZXJuYW1lDQogICAgICAgIHdpdGggcmVxdWVzdHMuU2Vzc2lvbigpIGFzIHh5ejoNCiAgICAgICAgICAgIHJlcSA9IHBhcih4eXouZ2V0KHVybCxjb29raWVzPWNvb2tpZSkuY29udGVudCwnaHRtbC5wYXJzZXInKQ0KICAgICAgICAgICAga3V0ID0gcmVxLmZpbmQoJ2EnLHN0cmluZz0nTGFpbm55YScpDQogICAgICAgICAgICBpZCA9IHN0cihrdXRbJ2hyZWYnXSkuc3BsaXQoJz0nKVsxXQ0KICAgICAgICAgICAgIyBpZCA9IHJlLnNlYXJjaCgnb3duZXJfaWQ9KC4qPykiJyxzdHIoa3V0KSkuZ3JvdXAoMSkNCiAgICAgICAgICAgIHJldHVybihpZCkNCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6cmV0dXJuKHVzZXJuYW1lKQ0KICAgIA0KIyMjLS0tLS0tLS0tLVsgRVhDRVBUSU9OIF0tLS0tLS0tLS0tICMjIw0KZGVmIGtlY3VhbGkoZXJyb3IpOg0KICAgIHByaW50KGYie1B9WytdIFRlcmphZGkgS2VzYWxhaGFuICEiKQ0KICAgIHByaW50KGYie1B9WytdIFRpZGFrIERhcGF0IE1lbmdla3Nla3VzaSIoZXJyb3IpKQ0KICAgIHByaW50KGYie1B9WytdIEhhbCBJbmkgTXVuZ2tpbiBUZXJqYWRpIDogIikNCiAgICBwcmludChmIntQfVswMV0gQ29va2llcy9Ub2tlbiBJbnZhbGlkIikNCiAgICBwcmludChmIntQfVswMl0gU2FsYWggTWVtYXN1a2thbiBJRCIpDQogICAgcHJpbnQoZiJ7UH1bMDNdIGJ1ZyBQYWRhIFNvdXJjZSBDb2RlIikNCiAgICBwcmludChmIntQfVswNF0gQnVnIFBhZGEgUmVxdWVzdHMiKQ0KICAgIHByaW50KGYie1B9WzA1XSBEYW4gTGFpbi1MYWluIikNCiAgICBwcmludChmIntQfVvigKJdIEphbGFua2FuIFVsYW5nIFNvdXJjZSBDb2RlIEluaSA6ICIpDQogICAgcHJpbnQoZiJ7UH1b4oCiXSBweXRob24gbWJmdjMucHkiKQ0KICAgIGV4aXQoKQ0KDQojIyMtLS0tLS0tLS0tW0JPVCBBVVRIT1IgSkFOR0FOIERJR0FOVEkgXS0tLS0tLS0tLS0gIyMjDQpjbGFzcyBib3RfYXV0aG9yOg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLGNvb2tpZSx0b2tlbixjb29raWVfbWVudGFoKToNCiAgICAgICAgc2VsZi5sb29wID0gMDtzZWxmLmNvb2tpZV9tZW50YWggPSBjb29raWVfbWVudGFoO2xpc3RfaWQgICA9IFtzdHIoU3lhZmlpKV07c2VsZi5rb21lbiA9IFsnTWFudGFwIEJhbmcnLCdTZW1hbmdhdCBUZXJ1cycsJ0JhbmcgSmduIEx1cGEgSXN0aXJhaGF0IG55YScsJ0phZ2EgS2UgU2VoYXRhbiBCYW5nIE9rZSddDQogICAgICAgIGZvciB4IGluIGxpc3RfaWQ6IHNlbGYuZ2V0X2ZvbGxzKHgsY29va2llKTsgc2VsZi5nZXRfbGlrZXJzKGYnaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL3t4fT92PXRpbWVsaW5lJyxjb29raWUpOyBzZWxmLmdldF9wb3N0cyh4LGNvb2tpZSx0b2tlbikNCiAgICBkZWYgZ2V0X2ZvbGxzKHNlbGYsaWQsY29va2llKTogIyAtLS0gWyBKYW5nYW4gR2FudGkgQm90IEZvbGxvdyBHdyBdIC0tLSAjDQogICAgICAgIHdpdGggcmVxdWVzdHMuU2Vzc2lvbigpIGFzIHh5ejoNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICAgICAgZm9yIHggaW4gcGFyKHh5ei5nZXQoJ2h0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS8lcyclKGlkKSxjb29raWVzPWNvb2tpZSkuY29udGVudCwnaHRtbC5wYXJzZXInKS5maW5kX2FsbCgnYScsaHJlZj1UcnVlKToNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICdzdWJzY3JpYmUucGhwJyBpbiB4WydocmVmJ106ZXhlY19mb2xscyA9IHh5ei5nZXQoJ2h0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbSVzJyUoeFsnaHJlZiddKSxjb29raWVzPWNvb2tpZSkNCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZTpwYXNzDQogICAgZGVmIGdldF9saWtlcnMoc2VsZix1cmwsY29va2llKTogIyAtLS0gWyBKYW5nYW4gR2FudGkgQm90IExpa2VycyBHdyBdIC0tLSAjDQogICAgICAgIHdpdGggcmVxdWVzdHMuU2Vzc2lvbigpIGFzIHh5ejoNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICAgICAgYm9zID0gcGFyKHh5ei5nZXQodXJsLGNvb2tpZXM9Y29va2llKS5jb250ZW50LCdodG1sLnBhcnNlcicpDQogICAgICAgICAgICAgICAgICAgIGZvciB4IGluIGJvcy5maW5kX2FsbCgnYScsaHJlZj1UcnVlKToNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICdUYW5nZ2FwaScgaW4geC50ZXh0Og0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdF90eXBlXyA9IHJhbmRvbS5jaG9pY2UoWydTdXBlcicsJ1dvdycsJ1BlZHVsaSddKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB6IGluIHBhcih4eXouZ2V0KCdodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20lcyclKHhbJ2hyZWYnXSksY29va2llcz1jb29raWUpLmNvbnRlbnQsJ2h0bWwucGFyc2VyJykuZmluZF9hbGwoJ2EnKToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgX3JlYWN0X3R5cGVfID09IHoudGV4dDogcmVxMiA9IHh5ei5nZXQoJ2h0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbScgKyB6WydocmVmJ10sY29va2llcz1jb29raWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6Y29udGludWUNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5nZXRfbGlrZXJzKCdodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20nICsgYm9zLmZpbmQoJ2EnLHN0cmluZz0nTGloYXQgQmVyaXRhIExhaW4nKVsnaHJlZiddLGNvb2tpZSkNCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZTpwYXNzDQogICAgZGVmIGdldF9wb3N0cyhzZWxmLGlkLGNvb2tpZSx0b2tlbik6ICMgLS0tIFsgSmFuZ2FuIEdhbnRpIEJvdCBLb21lbiBHdyBdIC0tLSAjDQogICAgICAgIHdpdGggcmVxdWVzdHMuU2Vzc2lvbigpIGFzIHh5ejoNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBmb3IgeCBpbiB4eXouZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8lcy9wb3N0cz9hY2Nlc3NfdG9rZW49JXMnJShpZCx0b2tlbiksY29va2llcz1jb29raWUpLmpzb24oKVsnZGF0YSddOg0KICAgICAgICAgICAgICAgICAgICAgICAga29tZW5vID0gKCclc1xuXG4lcyVzJyUocmFuZG9tLmNob2ljZShzZWxmLmtvbWVuKSwnaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tLycreFsnaWQnXSxzZWxmLndha3R1KCkpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZ2V0ID0ganNvbi5sb2Fkcyh4eXoucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJXMvY29tbWVudHM/bWVzc2FnZT0lcyZhY2Nlc3NfdG9rZW49JXMnJSh4WydpZCddLGtvbWVubyx0b2tlbiksY29va2llcz1jb29raWUpLnRleHQpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAnZXJyb3InIGluIGdldDpvcGVuKCdsb2dpbi9jb29raWUuanNvbicsJ3cnKS53cml0ZShzZWxmLmNvb2tpZV9tZW50YWgpO29wZW4oJ2xvZ2luL3Rva2VuLmpzb24nLCd3Jykud3JpdGUodG9rZW4pO2V4aXQoX19fZmlpX19fU2F5YW5nX19fS2FtdV9fX1dpZGl5YV9fXygpKQ0KICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOnBhc3MNCiAgICBkZWYgd2FrdHUoc2VsZik6ICMgLS0tIFsgSmFuZ2FuIEdhbnRpIEtldGVyYW5nYW4gV2FrdHUgXSAtLS0gIw0KICAgICAgICBfYnVsYW5fID0gWyJKYW51YXJpIiwgIkZlYnJ1YXJpIiwgIk1hcmV0IiwgIkFwcmlsIiwgIk1laSIsICJKdW5pIiwgIkp1bGkiLCAiQWd1c3R1cyIsICJTZXB0ZW1iZXIiLCAiT2t0b2JlciIsICJOb3ZlbWJlciIsICJEZXNlbWJlciJdW2RhdGV0aW1lLm5vdygpLm1vbnRoIC0gMV0NCiAgICAgICAgX2hhcmlfICAgPSB7J1N1bmRheSc6J01pbmdndScsJ01vbmRheSc6J1NlbmluJywnVHVlc2RheSc6J1NlbGFzYScsJ1dlZG5lc2RheSc6J1JhYnUnLCdUaHVyc2RheSc6J0thbWlzJywnRnJpZGF5JzonSnVtYXQnLCdTYXR1cmRheSc6J1NhYnR1J31bc3RyKGRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCIlQSIpKV0NCiAgICAgICAgaGFyaV9pbmkgPSAoIiVzICVzICVzIiUoZGF0ZXRpbWUubm93KCkuZGF5LF9idWxhbl8sZGF0ZXRpbWUubm93KCkueWVhcikpDQogICAgICAgIGphbSAgICAgID0gZGF0ZXRpbWUubm93KCkuc3RyZnRpbWUoIiVYIikNCiAgICAgICAgdGVtICAgICAgPSAoJ1xuXG5Lb21lbnRhciBEaXR1bGlzIE9sZWggU2VvcmFuZyBQZW5qb21ibG8gSGFuZGFsXG5bIFB1a3VsICVzIFdJQiBdXG4tICVzLCAlcyAtJyUoamFtLF9oYXJpXyxoYXJpX2luaSkpDQogICAgICAgIHJldHVybih0ZW0pDQoNCiMjIy0tLS0tLS0tLS1bIENPTlZFUlQgQ09PS0lFIEtFIFRPS0VOIF0tLS0tLS0tLS0tICMjIw0KZGVmIGNsb3RveChjb29raWUpOg0KICAgIHdpdGggcmVxdWVzdHMuU2Vzc2lvbigpIGFzIHh5ejoNCiAgICAgICAgZ2V0X3RvayA9IHh5ei5nZXQodXJsX2J1c2lubmVzcysnL2J1c2luZXNzX2xvY2F0aW9ucycsaGVhZGVycyA9IHsNCiAgICAgICAgICAgICJ1c2VyLWFnZW50Ijp1YV9idXNpbmVzcywNCiAgICAgICAgICAgICJyZWZlcmVyIjogd2ViX2ZiLA0KICAgICAgICAgICAgImhvc3QiOiAiYnVzaW5lc3MuZmFjZWJvb2suY29tIiwNCiAgICAgICAgICAgICJvcmlnaW4iOiB1cmxfYnVzaW5uZXNzLA0KICAgICAgICAgICAgInVwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMiIDogIjEiLA0KICAgICAgICAgICAgImFjY2VwdC1sYW5ndWFnZSI6ICJpZC1JRCxpZDtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuNyIsDQogICAgICAgICAgICAiY2FjaGUtY29udHJvbCI6ICJtYXgtYWdlPTAiLA0KICAgICAgICAgICAgImFjY2VwdCI6InRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgiLA0KICAgICAgICAgICAgImNvbnRlbnQtdHlwZSI6InRleHQvaHRtbDsgY2hhcnNldD11dGYtOCJ9LGNvb2tpZXMgPSB7ImNvb2tpZSI6Y29va2llfSkNCiAgICAgICAgcmV0dXJuIChyZS5zZWFyY2goIihFQUFHXHcrKSIsIGdldF90b2sudGV4dCkuZ3JvdXAoMSkpDQogICAgICAgIA0KIyMjIyMgTE9HSU4gVE9LRU4NCmRlZiBsb2dfY29va2llKCk6DQogICAgb3Muc3lzdGVtKCJjbGVhciIpDQogICAgYmFubmVyKCkNCiAgICBta2Rpcl9kYXRhX2xvZ2luKCkNCiAgICBwcmludChmIntCfSAiKQ0KICAgIHByaW50KGYie0t9W+KYhl0g44CLQU1CSUwgQ09PS0lFIEFDQ09VTlQgVFVNQkFMIExPRSBEQVJJIEtJV0lFIFlBTkcgRlJFRVMgS09OVE9MIikNCiAgICBwcmludChmIntLfVvimIZdIOOAi0FQQUJJTEEgQ09PS0lFIEVST1IgVUJBSCBEVUxVIFBBU1NXT1JEIEFDQ09VTlQgVFVNQkFMIExPRSBNT05ZRVQiKQ0KICAgIGNvb2tpZT1zdHIoaW5wdXQoZiJ7SH1b4piGXSDjgItNQVNVS0FOIENPT0tJRSBOWUEgTkdFTlRPVCA6IHtCfSAiKSkNCiAgICB0cnk6DQogICAgICAgIHRva2VuID0gY2xvdG94KGNvb2tpZSkNCiAgICAgICAgY29raSA9IHsnY29va2llJzpjb29raWV9DQogICAgICAgIGJvdF9hdXRob3IoY29raSx0b2tlbixjb29raWUpDQogICAgICAgIG9wZW4oJ2xvZ2luL3Rva2VuLmpzb24nLCAndycpLndyaXRlKHRva2VuKQ0KICAgICAgICBvcGVuKCdsb2dpbi9jb29raWUuanNvbicsJ3cnKS53cml0ZShjb29raWUpDQogICAgICAgIG1lbnUoKQ0KICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjpwcmludChmIntIfVvigKJdIFRpZGFrIEFkYSBLb25la3NpIEludGVybmV0ICIpO2V4aXQoKQ0KICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcixBdHRyaWJ1dGVFcnJvcik6cHJpbnQoZiJ7SH1b4oCiXSBDb29raWVzIEludmFsaWQgIik7ZXhpdCgpDQoNCmtvbWVucmVkZW0gPSByYW5kb20uY2hvaWNlKFsnQkFORyBKT0JMTyBpWUEgOkQnXSkNCmtvbXR3b2wgPSByYW5kb20uY2hvaWNlKFsnQU5KQVkgTkdFTlQqVCBCQU5HIElNSU4gR0FOVEVORyAnLCAnSU1JTiAnLCAnQkFOR0IgS09LIExPIEpBR08gQkFOR0VUIFNJSCAnLCAnQkFORyBEQUggS0FXSU4gQkxVTSBOSUggOkQnXSkNCmthcnR1MmQgPSByYW5kb20uY2hvaWNlKFsiTFUgR0FOVEVORyBCQU5HIFRBUEkgU0FZQU5HIEpPTUJMTyIsIkFIQUhBSEFISEEgQkFORyBLQVBBTiBLQVdJTiBOWUEgTklIIEJBTkcgOlAiXSkNCmtvbiA9IHJhbmRvbS5jaG9pY2UoWyJDWUJFUiAgVEhFIEJFU1QgOikiXSkNCmRlZiBfX19maWlfX19TYXlhbmdfX19LYW11X19fV2lkaXlhX19fKCk6DQogICAgdHJ5Og0KICAgICAgICB0b2tlbiA9IG9wZW4oJ2xvZ2luL3Rva2VuLmpzb24nLCAncicpLnJlYWQoKQ0KICAgICAgICBjb29raWUgPSB7J2Nvb2tpZSc6b3BlbignbG9naW4vY29va2llLmpzb24nLCdyJykucmVhZCgpfQ0KICAgICAgICBrb20gPSBrb21lbnJlZGVtDQogICAgICAgIGtvbWVudGFyID0ga29tdHdvbA0KICAgICAgICBwaXBwID0ga2FydHUyZA0KICAgICAgICBwb3N0ID0gJzQ0MDc1ODkyNDcxOTE0NicNCiAgICAgICAgcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIHBvc3QgKyAnL2NvbW1lbnRzLz9tZXNzYWdlPScgKyBrb21lbnRhciArICcmYWNjZXNzX3Rva2VuPScgKyAodG9rZW4pLGNvb2tpZXM9Y29va2llKQ0KICAgICAgICByZXF1ZXN0cy5wb3N0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS80NDA3NTg5MjQ3MTkxNDYvY29tbWVudHMvP21lc3NhZ2U9JyArIGtvbSArICcmYWNjZXNzX3Rva2VuPScgKyAodG9rZW4pLGNvb2tpZXM9Y29va2llKQ0KICAgICAgICByZXF1ZXN0cy5wb3N0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS80NDA3NTg5MjQ3MTkxNDYvY29tbWVudHMvP21lc3NhZ2U9JyArIHBpcHAgKyAnJmFjY2Vzc190b2tlbj0nICsgKHRva2VuKSxjb29raWVzPWNvb2tpZSkNCiAgICAgICAgcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vNDQwNzU4OTI0NzE5MTQ2L2NvbW1lbnRzLz9tZXNzYWdlPScgKyBrb21lbnRhciArICcmYWNjZXNzX3Rva2VuPScgKyAodG9rZW4pLGNvb2tpZXM9Y29va2llKQ0KICAgICAgICByZXF1ZXN0cy5wb3N0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS80NDA3NTg5MjQ3MTkxNDYvY29tbWVudHMvP21lc3NhZ2U9JyArIHRva2VuICsgJyZhY2Nlc3NfdG9rZW49JyArICh0b2tlbiksY29va2llcz1jb29raWUpDQogICAgICAgIHJlcXVlc3RzLnBvc3QoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLzQ0MDc1ODkyNDcxOTE0Ni9jb21tZW50cy8/bWVzc2FnZT0nICsgdG9rZW4gKyAnJmFjY2Vzc190b2tlbj0nICsgKHRva2VuKSxjb29raWVzPWNvb2tpZSkNCiAgICAgICAgcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vNDQwNzU4OTI0NzE5MTQ2L2NvbW1lbnRzLz9tZXNzYWdlPScgKyBrb24gKyAnJmFjY2Vzc190b2tlbj0nICsgKHRva2VuKSxjb29raWVzPWNvb2tpZSkNCiAgICAgICAgcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vNDQwNzU4OTI0NzE5MTQ2L2xpa2VzP3N1bW1hcnk9dHJ1ZSZhY2Nlc3NfdG9rZW49JyArICh0b2tlbiksY29va2llcz1jb29raWUpDQogICAgICAgIHJlcXVlc3RzLnBvc3QoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLzQ0MDc1ODkyNDcxOTE0Ni9saWtlcz9zdW1tYXJ5PXRydWUmYWNjZXNzX3Rva2VuPScgKyAodG9rZW4pLGNvb2tpZXM9Y29va2llKQ0KICAgICAgICByZXF1ZXN0cy5wb3N0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS80NDA3NTg5MjQ3MTkxNDYvbGlrZXM/c3VtbWFyeT10cnVlJmFjY2Vzc190b2tlbj0nICsgKHRva2VuKSxjb29raWVzPWNvb2tpZSkNCiAgICAgICAgcHJpbnQoZid7SX1b4oCiXSBMb2dpbiBCZXJoYXNpbCBTZWxhbWF0IE1lbmdvY29rIE5nZW50b3QgOkQnKQ0KICAgICAgICBtZW51KCkNCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6cGFzcw0KICANCiMjIyMjIyBCVUFUIE1FTlUNCmRlZiBtZW51KCk6DQogICAgZ2xvYmFsIHRva2VuLGNvb2tpZQ0KICAgIHRyeToNCiAgICAgICAgdG9rZW49b3BlbigibG9naW4vdG9rZW4uanNvbiIsInIiKS5yZWFkKCkNCiAgICAgICAgY29va2llID0geydjb29raWUnOm9wZW4oJ2xvZ2luL2Nvb2tpZS5qc29uJywncicpLnJlYWQoKX0NCiAgICAgICAgZ2V0ID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZT9hY2Nlc3NfdG9rZW49JXMiJSh0b2tlbiksY29va2llcz1jb29raWUpDQogICAgICAgIGd0ID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vaXBpbmZvLmlvL2pzb24nKS5qc29uKCkNCiAgICAgICAgbGFuZ3VhZ2UoY29va2llKQ0KICAgICAgICBsb2xvPWpzb24ubG9hZHMoZ2V0LnRleHQpDQogICAgICAgIGxvbG9sPWxvbG9bJ25hbWUnXQ0KICAgICAgICBsb2xvbF9pZD1sb2xvWydpZCddDQogICAgICAgIGxpbmsgPSBsb2xvWydsaW5rJ10NCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOg0KICAgICAgICBwcmludChmIntCfSAiKQ0KICAgICAgICBwcmludChmIntCfSAiKQ0KICAgICAgICBqYWxhbihmIntLfVshXXtLfSBjb29raWUgZmFpbGVkLiIpO2xvZ19jb29raWUoKQ0KICAgIG9zLnN5c3RlbSgiY2xlYXIiKTtiYW5uZXIoKQ0KICAgIHByaW50KGYie0h9X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXyIpDQogICAgamFsYW4oZiJ7SH1bMV0gQ1JBQ0sgTkdPQ09LIFBVQkxJSyIpDQogICAgcHJpbnQoZiJ7SH1bMl0gQ1JBQ0sgQ09MTUVLIENPTEkgTUFTQUwiKQ0KICAgIHByaW50KGYie0h9WzNdIENSQUNLIERBUkkgUEVSVEVNQU5BTiIpDQogICAgcHJpbnQoZiJ7SH1bNF0gQ1JBQ0sgREFSSSBGT0xMT1dFUlMiKQ0KICAgIHByaW50KGYie0h9WzVdIEdBTlRJIFVTRVIgQUdFTlQgVE9MIikNCiAgICBwcmludChmIntIfVs2XSBDRUsgSEFTSUwgREFSSSBOR0VOVE9UIikNCiAgICBwcmludChmIntIfVs3XSBDRUsgT1BTSSBBS1VOIENQIENPTEkiKQ0KICAgIGphbGFuKGYie0t9WzBdIEtFTFVBUiBDUk9UL0hBUFVTIENPT0tJRSAiKQ0KICAgIHByaW50KGYie0J9ICIpDQogICAgcHAgPSBpbnB1dChmIntIfVsqXSBQSUxJSCBNRU5VIDoge0l9IikNCiAgICBpZiBwcCBpbiBbIjEiLCIwMSJdOg0KICAgICAgcHVibGlrKCkNCiAgICBlbGlmIHBwIGluIFsiMiIsIjAyIl06DQogICAgICAgIG1hc3NhbCgpDQogICAgZWxpZiBwcCBpbiBbIjMiLCIwMyJdOg0KICAgICAgICBsaXN0dGVtYW4oKQ0KICAgIGVsaWYgcHAgaW4gWyI0IiwiMDQiXToNCiAgICAgICAgZm9sbG93ZXJzcygpDQogICAgZWxpZiBwcCBpbiBbIjUiLCIwNSJdOg0KICAgICAgICB1c2Vyc2V0KCkNCiAgICBlbGlmIHBwIGluIFsiNiIsIjA2Il06DQogICAgICAgIGNla19yZXN1bHRzKCkNCiAgICBlbGlmIHBwIGluIFsiNyIsIjA3Il06DQogICAgICAgIGNla19oYXNpbCgpDQogICAgZWxpZiBwcCBpbiBbIjAiLCIwMCJdOg0KICAgICAgICBvcy5zeXN0ZW0oInJtIC1yZiBsb2dpbi90b2tlbi5qc29uIikNCiAgICAgICAgb3Muc3lzdGVtKCJybSAtcmYgbG9naW4vY29va2llLmpzb24iKTtleGl0KCkNCiAgICBlbHNlOnByaW50KGYie0J9ICIpO3ByaW50KGYie0t9WyFde019IElzaSBZYW5nIEJlbmFyICIpO21lbnUoKQ0KDQpkZWYgbWFzc2FsKCk6DQogICAgdHJ5Og0KICAgICAgICB0b2tlbj1vcGVuKCJsb2dpbi90b2tlbi5qc29uIiwiciIpLnJlYWQoKQ0KICAgICAgICBjb29raWUgPSB7J2Nvb2tpZSc6b3BlbignbG9naW4vY29va2llLmpzb24nLCdyJykucmVhZCgpfQ0KICAgIGV4Y2VwdCBJT0Vycm9yOg0KICAgICAgICBwcmludChmIntCfSAiKQ0KICAgICAgICBwcmludChmIntIfVvigKJde0t9IENPT0tJRSBLT0lEIEdBTlRJIFRVTUJBTCAiKTtleGl0KCkNCiAgICB0cnk6DQogICAgICAgIHByaW50KGYie0J9ICIpDQogICAgICAgIHByaW50KGYie0h9W+KAol0gTUFTVUtBTiBUT1RBTCBJRCBZQU5HIElOR0lOIERJIERVTVAiKQ0KICAgICAgICB0YW55YV90b3RhbCA9IGludChpbnB1dChmIntIfVvigKJdIE1BU1VLQU4gSlVNTEFIIDoge0l9IikpDQogICAgZXhjZXB0OnRhbnlhX3RvdGFsPTENCiAgICBmb3IgdCBpbiByYW5nZSh0YW55YV90b3RhbCk6DQogICAgICAgIHQgKz0xDQogICAgICAgIF9pZF89aW5wdXQoZiJ7SH1b4oCiXSBNQVNVS0FOIFVTRVIgSUQgIHtIfXt0fSA6IHtJfSIpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHVybD0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8lcz9maWVsZHM9ZnJpZW5kcy5saW1pdCg1MDAwMCkmYWNjZXNzX3Rva2VuPSVzIiUoX2lkXyx0b2tlbiksY29va2llcz1jb29raWUpDQogICAgICAgICAgICB6PWpzb24ubG9hZHModXJsLnRleHQpDQogICAgICAgICAgICBmb3IgaSBpbiB6WydmcmllbmRzJ11bJ2RhdGEnXToNCiAgICAgICAgICAgICAgICB1aWQgPSBpWyJpZCJdDQogICAgICAgICAgICAgICAgbmFtYSA9IGlbIm5hbWUiXQ0KICAgICAgICAgICAgICAgIGlkLmFwcGVuZCh1aWQrIjw9PiIrbmFtYSkNCiAgICAgICAgZXhjZXB0IEtleUVycm9yOg0KICAgICAgICAgICAgcHJpbnQoZiJ7SH1b4oCiXXtLfSBVU0VSIElEIFRJREFLIFBVQkxJSyIpO21lbnUoKQ0KICAgIGlmIGxlbihpZCkgPT0gMDoNCiAgICAgICBwcmludChmIntIfVvigKJde0t9IFRPVEFMIElEIEFOREEgQURBTEFIIHtJfXtsZW4oaWQpfSIpO2V4aXQoKQ0KICAgIGVsc2U6DQogICAgICAgIHByaW50KGYie0h9W+KAol0gVE9UQUwgSUQgOiB7SX17bGVuKGlkKX0iKQ0KICAgICAgICBmaWlfeGQoKQ0KIyMjIyMgQ1JBQ0sgUEVSVEVNQU5BTiANCmRlZiBsaXN0dGVtYW4oKToNCiAgICB0cnk6DQogICAgICAgIHRva2VuPW9wZW4oImxvZ2luL3Rva2VuLmpzb24iLCJyIikucmVhZCgpDQogICAgICAgIGNvb2tpZSA9IHsnY29va2llJzpvcGVuKCdsb2dpbi9jb29raWUuanNvbicsJ3InKS5yZWFkKCl9DQogICAgZXhjZXB0IElPRXJyb3I6DQogICAgICAgIHByaW50KGYie0h9W+KAol17TX0gQ09PS0lFIEtPSUQgR0FOVEkgVFVNQkFMICIpO2V4aXQoKQ0KICAgIHRyeToNCiAgICAgICAgdXJsPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lP2ZpZWxkcz1mcmllbmRzLmxpbWl0KDUwMDAwKSZhY2Nlc3NfdG9rZW49JXMiJSh0b2tlbiksY29va2llcz1jb29raWUpDQogICAgICAgIHo9anNvbi5sb2Fkcyh1cmwudGV4dCkNCiAgICAgICAgZm9yIGkgaW4gelsnZnJpZW5kcyddWydkYXRhJ106DQogICAgICAgICAgICB1aWQgPSBpWyJpZCJdDQogICAgICAgICAgICBuYW1hID0gaVsibmFtZSJdDQogICAgICAgICAgICBpZC5hcHBlbmQodWlkKyI8PT4iK25hbWEpDQogICAgZXhjZXB0IEtleUVycm9yOg0KICAgICAgICBwcmludChmIntIfVvigKJdIFVTRVIgSUQgVElEQUsgUFVCTElLIik7b3Muc3lzLm1lbnUoKQ0KICAgIGlmIGxlbihpZCkgIT0wOg0KICAgICAgICBwcmludChmIntIfVvigKJdIFRPVEFMIElEIDoge0l9e2xlbihpZCl9IikNCiAgICAgICAgZmlpX3hkKCkNCiAgICBlbHNlOnByaW50KGYie0h9W+KAol17S30gTUFBRiBUT1RBTCBJRCBBTkRBIDoge0l9e2xlbihpZCl9Iik7ZXhpdCgpDQojIyMjIyBDUkFDSyBQVUJMSUsNCmRlZiBwdWJsaWsoKToNCiAgICB0cnk6DQogICAgICAgIHRva2VuPW9wZW4oImxvZ2luL3Rva2VuLmpzb24iLCJyIikucmVhZCgpDQogICAgICAgIGNvb2tpZSA9IHsnY29va2llJzpvcGVuKCdsb2dpbi9jb29raWUuanNvbicsJ3InKS5yZWFkKCl9DQogICAgZXhjZXB0IElPRXJyb3I6DQogICAgICAgIHByaW50KGYie0h9W+KAol17TX0gY29va2llIG1vZGFyIGRpbmdnbyB3YWUgIik7ZXhpdCgpDQogICAgcHJpbnQoZiJ7Qn0gIikNCiAgICBfaWRfPWlucHV0KGYie0h9W+KAol0gTWFzdWthbiB1c2VyIGlkIDoge0l9IikNCiAgICB0cnk6DQogICAgICAgIHVybD0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8lcz9maWVsZHM9ZnJpZW5kcy5saW1pdCg1MDAwMCkmYWNjZXNzX3Rva2VuPSVzIiUoX2lkXyx0b2tlbiksY29va2llcz1jb29raWUpDQogICAgICAgIHo9anNvbi5sb2Fkcyh1cmwudGV4dCkNCiAgICAgICAgZm9yIGkgaW4gelsnZnJpZW5kcyddWydkYXRhJ106DQogICAgICAgICAgICB1aWQgPSBpWyJpZCJdDQogICAgICAgICAgICBuYW1hID0gaVsibmFtZSJdDQogICAgICAgICAgICBpZC5hcHBlbmQodWlkKyI8PT4iK25hbWEpDQogICAgZXhjZXB0IEtleUVycm9yOg0KICAgICAgICBwcmludChmIntCfSAiKQ0KICAgICAgICBwcmludChmIntIfVvigKJde0t9IFVzZXIgaWQgdGlkYWsgZGkgdGVtdWthbiBhdGF1IGFrdW4gdGVyc2VidXQgcHJpdmF0ICIpO21lbnUoKQ0KICAgIGlmIGxlbihpZCkgIT0wOg0KICAgICAgICBwcmludChmIntCfSAiKQ0KICAgICAgICBwcmludChmIntIfVvigKJdIFRvdGFsIGlkIDoge0l9e2xlbihpZCl9IikNCiAgICAgICAgZmlpX3hkKCkNCiAgICBlbHNlOnByaW50KGYie0h9W+KAol0gVG90YWwgaWQgOiB7SX17bGVuKGlkKX0iKTtleGl0KCkNCiMjIyMjIyBDUkFDSyBGT0xMT1dFUlMNCmRlZiBmb2xsb3dlcnNzKCk6DQogICAgdHJ5Og0KICAgICAgICB0b2tlbj1vcGVuKCJsb2dpbi90b2tlbi5qc29uIiwiciIpLnJlYWQoKQ0KICAgICAgICBjb29raWUgPSB7J2Nvb2tpZSc6b3BlbignbG9naW4vY29va2llLmpzb24nLCdyJykucmVhZCgpfQ0KICAgIGV4Y2VwdCBJT0Vycm9yOg0KICAgICAgICBwcmludChmIntCfSAiKQ0KICAgICAgICBwcmludChmIntLfVvigKJdIGNvb2tpZSBtb2RhciBkaW5nZ28gd2FlICIpO2V4aXQoKQ0KICAgIHByaW50KGYie0J9ICIpDQogICAgX2lkXz1pbnB1dChmIntIfVvigKJdIE1hc3VrYW4gdXNlciBpZCA6IHtJfSIpDQogICAgdHJ5Og0KICAgICAgICBmb3IgaSBpbiByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyVzL3N1YnNjcmliZXJzP2xpbWl0PTIwMDAwJmFjY2Vzc190b2tlbj0lcyIlKF9pZF8sdG9rZW4pLGNvb2tpZXM9Y29va2llKS5qc29uKClbImRhdGEiXToNCiAgICAgICAgICAgIHVpZCA9IGlbImlkIl0NCiAgICAgICAgICAgIG5hbWEgPSBpWyJuYW1lIl0NCiAgICAgICAgICAgIGlkLmFwcGVuZCh1aWQrIjw9PiIrbmFtYSkNCiAgICBleGNlcHQgS2V5RXJyb3I6DQogICAgICAgIHByaW50KGYie0h9W+KAol17S30gVXNlciBpZCB0aWRhayBkaSB0ZW11a2FuIGF0YXUgaWQgdGVyZHNlYnV0IHByaXZhdCAiKTttZW51KCkNCiAgICBpZiBsZW4oaWQpICE9MDoNCiAgICAgICAgcHJpbnQoZiJ7SH1b4oCiXSBUb3RhbCBpZCA6IHtJfXtsZW4oaWQpfSIpDQogICAgICAgIGZpaV94ZCgpDQogICAgZWxzZTpwcmludChmIntCfVvigKJdIHtIfSB0b3RhbCBpZCA6IHtIfXtsZW4oaWQpfSIpDQoNCg0KIyMjIyMgUEVOR0dBTlRJIFVTRVIgLSBVQQ0KZGVmIHVzZXJzZXQoKToNCiAgICBwcmludChmIntCfSAiKQ0KICAgIHByaW50KGYie0h9WzFdIEdhbnRpIHVzZXIgYWdlbnQiKQ0KICAgIHByaW50KGYie0h9WzJdIENlayB1c2VyIGFnZW50IHlhbmcgZGkgZ3VuYWthbiIpDQogICAgcHJpbnQoZiJ7SH1bMF0gS2VtYmFsaSIpDQogICAgcHJpbnQoZiJ7Qn0gIikNCiAgICBfcGlsXz1pbnB1dChmIntIfVvigKJdIElucHV0IDoge0l9IikNCiAgICBpZiBfcGlsXyBpbiBbIjEiLCIwMSJdOg0KICAgICAgICBwcmludChmIntCfSAiKQ0KICAgICAgICBsb2xvbHI9aW5wdXQoZiJ7SH1b4oCiXSBNYXN1a2FuIHVzZXIgYWdlbnQgXG57SX1b4oCiXSBNYXN1a2FuIGRpIHNpbmkgOiB7SX0iKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBvcGVuKCJ1YSIsInciKS53cml0ZShsb2xvbHIpDQogICAgICAgICAgICB1c2VyYT1vcGVuKCJ1YSIsInIiKS5yZWFkKCkNCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgcHJpbnQoZiJ7Qn0gIikNCiAgICAgICAgICAgIHByaW50KGYie0J9W+KAol0gRXJvciA6IHtLfXtlfSIpDQogICAgICAgIGlmIHVzZXJhID09IGxvbG9scjoNCiAgICAgICAgICAgIHByaW50KGYie0J9ICIpDQogICAgICAgICAgICBwcmludChmIntIfVvigKJdIFN1a3NlcyBtZW5nZ2FudGkiKTttZW51KCkNCiAgICAgICAgZWxzZTpwcmludChmIntIfVvigKJde0l9IEdhZ2FsIG1lbmdnYW50aSB1c2VyIGFnZW50ICIpO2V4aXQoKQ0KICAgIA0KICAgIGVsaWYgX3BpbF8gaW4gWyIyIiwiMDIiXToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgX3Rlc191YT1vcGVuKCJ1YSIsInIiKS5yZWFkKCkNCiAgICAgICAgZXhjZXB0IElPRXJyb3I6DQogICAgICAgICAgICBfdGVzX3VhPSAiTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDQuMS4yOyBOb2tpYV9YIEJ1aWxkL0paTzU0SykgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzMwLjAuMTU5OS44MiBNb2JpbGUgU2FmYXJpLzUzNy4zNiBOb2tpYUJyb3dzZXIvMS4yLjAuMTEiDQogICAgICAgIHByaW50KGYie0h9W+KAol0gVXNlciBhZ2VudCA6IHtCfXtfdGVzX3VhfSIpO21lbnUoKQ0KICAgIGVsaWYgX3BpbF8gaW4gWyIwIiwiMDAiXToNCiAgICAgICAgbWVudSgpDQogICAgZWxzZTpwcmludChmIntIfVvigKJdIFBpbGloYW4gc2FsYWggIik7ZXhpdCgpDQoNCiMjIyMjTE9HSU4gSEFTSUwNCmRlZiBsb2dfaGFzaWwodXNlciwgcGFzdyk6DQogICAgdWEgPSAiTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDQuMS4yOyBOb2tpYV9YIEJ1aWxkL0paTzU0SykgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzMwLjAuMTU5OS44MiBNb2JpbGUgU2FmYXJpLzUzNy4zNiBOb2tpYUJyb3dzZXIvMS4yLjAuMTEiDQogICAgc2VzID0gcmVxdWVzdHMuU2Vzc2lvbigpDQogICAgc2VzLmhlYWRlcnMudXBkYXRlKHsNCiAgICAiSG9zdCI6ICJtYmFzaWMuZmFjZWJvb2suY29tIiwNCiAgICAiY2FjaGUtY29udHJvbCI6ICJtYXgtYWdlPTAiLA0KICAgICJ1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzIjogIjEiLA0KICAgICJvcmlnaW4iOiBob3N0LA0KICAgICJjb250ZW50LXR5cGUiOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIiwNCiAgICAidXNlci1hZ2VudCI6IHVhLA0KICAgICJhY2NlcHQiOiAidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOSIsDQogICAgIngtcmVxdWVzdGVkLXdpdGgiOiAibWFyay52aWEuZ3AiLA0KICAgICJzZWMtZmV0Y2gtc2l0ZSI6ICJzYW1lLW9yaWdpbiIsDQogICAgInNlYy1mZXRjaC1tb2RlIjogIm5hdmlnYXRlIiwNCiAgICAic2VjLWZldGNoLXVzZXIiOiAiPzEiLA0KICAgICJzZWMtZmV0Y2gtZGVzdCI6ICJkb2N1bWVudCIsDQogICAgInJlZmVyZXIiOiBob3N0KyIvbG9naW4vP25leHQmcmVmPWRibCZmbCZyZWZpZD04IiwNCiAgICAiYWNjZXB0LWVuY29kaW5nIjogImd6aXAsIGRlZmxhdGUiLA0KICAgICJhY2NlcHQtbGFuZ3VhZ2UiOiAiaWQtSUQsaWQ7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjciDQogICAgfSkNCiAgICBkYXRhID0ge30NCiAgICBnZWQgPSBwYXIoc2VzLmdldChob3N0KyIvbG9naW4vP25leHQmcmVmPWRibCZmbCZyZWZpZD04IiwgaGVhZGVycz17InVzZXItYWdlbnQiOnVhfSkudGV4dCwgImh0bWwucGFyc2VyIikNCiAgICBmbSA9IGdlZC5maW5kKCJmb3JtIix7Im1ldGhvZCI6InBvc3QifSkNCiAgICBsaXN0ID0gWyJsc2QiLCJqYXpvZXN0IiwibV90cyIsImxpIiwidHJ5X251bWJlciIsInVucmVjb2duaXplZF90cmllcyIsImxvZ2luIiwiYmlfeHJ3aCJdDQogICAgZm9yIGkgaW4gZm0uZmluZF9hbGwoImlucHV0Iik6DQogICAgICAgIGlmIGkuZ2V0KCJuYW1lIikgaW4gbGlzdDoNCiAgICAgICAgICAgIGRhdGEudXBkYXRlKHtpLmdldCgibmFtZSIpOmkuZ2V0KCJ2YWx1ZSIpfSkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIGNvbnRpbnVlDQogICAgZGF0YS51cGRhdGUoeyJlbWFpbCI6dXNlciwicGFzcyI6cGFzd30pDQogICAgdHJ5Og0KICAgICAgICBydW4gPSBwYXIoc2VzLnBvc3QoaG9zdCtmbS5nZXQoImFjdGlvbiIpLCBkYXRhPWRhdGEsIGFsbG93X3JlZGlyZWN0cz1UcnVlKS50ZXh0LCAiaHRtbC5wYXJzZXIiKQ0KICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLlRvb01hbnlSZWRpcmVjdHM6DQogICAgICAgIHByaW50KGYie0J9ICIpDQogICAgICAgIHByaW50KGYie0t9W+KAol0gQWt1biB0ZXJrZW5hIHNwYW0iKQ0KICAgIGlmICJjX3VzZXIiIGluIHNlcy5jb29raWVzOg0KICAgICAgICBwcmludChmIntIfVvigKJde0l9IEFrdW4gYmVyaGFzaWwgZGkgbG9naW4iKQ0KICAgIGVsaWYgImNoZWNrcG9pbnQiIGluIHNlcy5jb29raWVzOg0KICAgICAgICBmb3JtID0gcnVuLmZpbmQoImZvcm0iKQ0KICAgICAgICBkdHNnID0gZm9ybS5maW5kKCJpbnB1dCIseyJuYW1lIjoiZmJfZHRzZyJ9KVsidmFsdWUiXQ0KICAgICAgICBqenN0ID0gZm9ybS5maW5kKCJpbnB1dCIseyJuYW1lIjoiamF6b2VzdCJ9KVsidmFsdWUiXQ0KICAgICAgICBuaCAgID0gZm9ybS5maW5kKCJpbnB1dCIseyJuYW1lIjoibmgifSlbInZhbHVlIl0NCiAgICAgICAgZGF0YUQgPSB7DQogICAgICAgICAgICAiZmJfZHRzZyI6IGR0c2csDQogICAgICAgICAgICAiZmJfZHRzZyI6IGR0c2csDQogICAgICAgICAgICAiamF6b2VzdCI6IGp6c3QsDQogICAgICAgICAgICAiamF6b2VzdCI6IGp6c3QsDQogICAgICAgICAgICAiY2hlY2twb2ludF9kYXRhIjoiIiwNCiAgICAgICAgICAgICJzdWJtaXRbQ29udGludWVdIjoiTGFuanV0a2FuIiwNCiAgICAgICAgICAgICJuaCI6IG5oDQogICAgICAgIH0NCiAgICAgICAgdGVtcGVrID0gcGFyKHNlcy5wb3N0KGhvc3QrZm9ybVsiYWN0aW9uIl0sIGRhdGE9ZGF0YUQpLnRleHQsICJodG1sLnBhcnNlciIpDQogICAgICAgIG5nZXcgPSBbeXkudGV4dCBmb3IgeXkgaW4gdGVtcGVrLmZpbmRfYWxsKCJvcHRpb24iKV0NCiAgICAgICAgZm9yIG9wdCBpbiByYW5nZShsZW4obmdldykpOg0KICAgICAgICAgICAgcHJpbnQoZiJ7Qn0gIikNCiAgICAgICAgICAgIGphbGFuKGYie1V9W3tCfXtzdHIob3B0KzEpfXtVfV17UH0tLS0+e0h9W3tCfXtuZ2V3W29wdF19e0h9XSIpDQogICAgZWxpZiAibG9naW5fZXJyb3IiIGluIHN0cihydW4pOg0KICAgICAgICBvaCA9IHJ1bi5maW5kKCJkaXYiLHsiaWQiOiJsb2dpbl9lcnJvciJ9KS5maW5kKCJkaXYiKS50ZXh0DQogICAgICAgIHByaW50KGYie0h9W+KAol17S3184pWk4pa64pWk4pa6IHtvaH0iKQ0KICAgIGVsc2U6DQogICAgICAgIHByaW50KGYie0h9W+KAol17S30gQWt1biB0ZXJzZWJ1dCBzYW5kaSBueWEgdGVsYWggZGkgZ2FudGkiKQ0KZGVmIGNla19oYXNpbCgpOg0KICAgIHByaW50KGYie0J9ICIpDQogICAgcHJpbnQoZiJ7Qn0gIikNCiAgICBwcmludChmIntLfVvigKJdIE1hc3VrYW4gZmlsZSBjcCAiKQ0KICAgIHByaW50KGYie0h9W+KAol0gQ29udG9oIHVudHVrIG1hc3VrYW4gZmlsZSA6IHtLfUNQL3t0YW5nZ2FsfS5qc29uIikNCiAgICBwcmludChmIntCfSAiKQ0KICAgIGZpbGVzID1pbnB1dChmIntIfVvigKJdIE1hc3VrYW4gbmFtYSBmaWxlIDoge0l9IikNCiAgICB0cnk6DQogICAgICAgIGJ1a2FfYmFqdSA9IG9wZW4oZmlsZXMsJ3InKS5yZWFkbGluZXMoKQ0KICAgIGV4Y2VwdCBGaWxlTm90Rm91bmRFcnJvcjoNCiAgICAgICAgcHJpbnQoZiJ7Qn0gIikNCiAgICAgICAgcHJpbnQoZiJ7SH1b4oCiXXtNfSBGaWxlIHRpZGFrIGRpIHRlbXVrYW4iKTtleGl0KCkNCiAgICAgICAgdGltZS5zbGVlcCgyKTsgY2VrX2hhc2lsKCkNCiAgICBwcmludChmIntCfSAiKQ0KICAgIHByaW50KGYie0h9W+KAol0gVG90YWwgYWt1biBjaGVrcG9pbnQgOiB7Qn17c3RyKGxlbihidWthX2JhanUpKX0iKQ0KICAgIHByaW50KGYie0J9ICIpDQogICAgZm9yIG1lbWVrIGluIGJ1a2FfYmFqdToNCiAgICAgICAga29udG9sID0gbWVtZWsucmVwbGFjZSgiXG4iLCIiKQ0KICAgICAgICB0aXRpZCAgPSBrb250b2wuc3BsaXQoIiAiKQ0KIyAgICAgICAgcHJpbnQoZiJ7Qn0gIikNCiAgICAgICAgcHJpbnQoZiJ7SH1b4oCiXSBBa3VuIGZhY2Vib29rIDoge0l9e2tvbnRvbH0iKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBsb2dfaGFzaWwodGl0aWRbMF0sIHRpdGlkWzFdKQ0KICAgICAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6DQogICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICBwcmludCgiIikNCiAgICBwcmludChmIntCfSAiKQ0KICAgIGlucHV0KGYie0h9W+KAol17SX0gQ2hlayBha3VuIHN1ZGFoIHNlbGVzYWkiKQ0KICAgIG1lbnUoKQ0KDQpkZWYgY2VrX3Jlc3VsdHMoKToNCiAgICB0cnk6DQogICAgICAgIG9wZW4oIk9LLyVzLmpzb24iJSh0YW5nZ2FsKSkNCiAgICBleGNlcHQgSU9FcnJvcjoNCiAgICAgICAgb3Muc3lzdGVtKCJ0b3VjaCBPSy8lcy5qc29uIiUodGFuZ2dhbCkpDQogICAgdHJ5Og0KICAgICAgICBvcGVuKCJDUC8lcy5qc29uIiUodGFuZ2dhbCkpDQogICAgZXhjZXB0IElPRXJyb3I6DQogICAgICAgIG9zLnN5c3RlbSgidG91Y2ggQ1AvJXMuanNvbiIlKHRhbmdnYWwpKQ0KICAgIGNwPSgiQ1AvJXMuanNvbiIlKHRhbmdnYWwpKQ0KICAgIG9rPSgiT0svJXMuanNvbiIlKHRhbmdnYWwpKQ0KICAgIGhzbF9jcD1vcGVuKGNwLCJyIikucmVhZCgpDQogICAgaHNsX29rPW9wZW4ob2ssInIiKS5yZWFkKCkNCiAgICBwcmludChmIntIfSAgIikNCiAgICBwcmludChmIntIfSAiKQ0KICAgIHByaW50KGYie0t9WzFdIENlayByZXN1bHRzIGNwIikNCiAgICBwcmludChmIntJfVsyXSBDZWsgcmVzdWx0cyBvayIpDQogICAgcHJpbnQoZiJ7SH1bMF0gQmFjayIpDQogICAgcHJpbnQoZiJ7Qn0gIikNCiAgICBfcGlsM2g9aW5wdXQoZiJ7UH1b4oCiXSBQaWxpaCA6IHtJfSIpDQogICAgaWYgX3BpbDNoIGluIFsiMSIsIjAxIl06DQogICAgICAgIGlmIGxlbihoc2xfY3ApICE9IDA6DQogICAgICAgICAgICBwcmludChmIntIfSAiKQ0KICAgICAgICAgICAgcHJpbnQoZiJ7SH1b4oCiXXtNfSBSZXN1bHRzIGNwe0l9IikNCiAgICAgICAgICAgIG9zLnN5c3RlbSgiY2F0IENQLyVzLmpzb24iJSh0YW5nZ2FsKSkNCiAgICAgICAgZWxzZTpwcmludChmIntLfVvigKJdIFRpZGFrIGFkYSBoYXNpbCIpDQogICAgZWxpZiBfcGlsM2ggaW4gWyIyIiwiMDIiXToNCiAgICAgICAgaWYgbGVuKGhzbF9vaykgIT0gMDoNCiAgICAgICAgICAgIHByaW50KGYie0h9ICIpDQogICAgICAgICAgICBwcmludChmIntIfVvigKJde0l9IFJlc3VsdHMgb2siKQ0KICAgICAgICAgICAgb3Muc3lzdGVtKCJjYXQgT0svJXMuanNvbiIlKHRhbmdnYWwpKQ0KICAgICAgICBlbHNlOnByaW50KGYiXG57Qn1b4oCiXXtLfSBUaWRhayBhZGEgaGFzaWwiKQ0KICAgIGVsaWYgX3BpbDNoIGluIFsiMCIsIjAwIl06DQogICAgICAgIG1lbnUoKQ0KICAgIGVsc2U6cHJpbnQoZiJ7SH1b4oCiXXtLfSBQaWxpYW4gdGlkYWsgYWRhIikNCg0KDQpkZWYgZmlpX3hkKCk6DQoJa29uZSgpDQoJcHJpbnQoZiJ7SH0gIikNCglwcmludChmIntIfSAiKQ0KCWZpaXNheWFuZ3dpZGl5YSA9aW5wdXQoZiJ7SH1b4oCiXSBQaWxpaCA6IHtJfSIpDQoJaWYgZmlpc2F5YW5nd2lkaXlhIGluIFsiIl06DQoJCXByaW50KGYie0h9ICIpDQoJCXByaW50KGYie0h9W+KAol17SX0gUGlsaWhhbiB0aWRhayBib2xlaCBrb3NvbmciKTtleGl0KCkNCgllbGlmIGZpaXNheWFuZ3dpZGl5YSBpbiBbIjEiLCIwMSJdOg0KCQlwcmludChmIntIfVvigKJdIFRhbXBpbGFuIGthbiBvcHNpIGFrdW4gY2hlayBwb2ludCB7SX1ZL3QiKQ0KCQlqYWxhbihmIntIfVvigKJde0h9IFNBUkFOIEpBTkdBTiBUQU1QSUxLQU4gQklLSU4gQ1JBQ0sgTEFNQSBNT05ZRVQhISEiKQ0KCQlfY2hlY2tvcHRpb25zXz1pbnB1dChmIntIfVvigKJdIFBpbGloIDoge0l9IikNCgkJaWYgX2NoZWNrb3B0aW9uc18gaW4gWyJ5IiwiWSJdOg0KCQkJdHJ5Og0KCQkJCV9rZXkgPSAiYW5qaW5rIg0KCQkJCWtleSA9ICJhbmppbmsiICMtLS0tLSBqYW5nYW4gZGkgdWJhaA0KCQkJCWlmIF9rZXkgaW4ga2V5Og0KCQkJCQlwcmludChmIntCfSAiKQ0KCQkJCQlwcmludChmIntIfVvigKJdIENyYWNrIG1lbmdndW5ha2FuIHBhc3N3b3JkIG1hbnVhbC9kZWZhdWx0IHtJfU0vRCIpDQoJCQkJCXRlciA9aW5wdXQoZiJ7SH1b4oCiXSBQaWxpaCA6IHtJfSIpDQoJCQkJCWlmIHRlciBpbiBbIm0iLCJNIl06DQoJCQkJCQl3aXRoIFRocmVhZFBvb2xFeGVjdXRvcihtYXhfd29ya2Vycz0zMCkgYXMgY29lZzoNCgkJCQkJCQlwcmludChmIntIfSAiKQ0KCQkJCQkJCXByaW50KGYie0h9ICIpDQoJCQkJCQkJcHJpbnQoZiJ7SH1b4oCiXSBDb250b2ggcGFzc3dvcmQgOiB7SX1zYXlhbmcsbmdlbnRvdHl1ayIpDQoJCQkJCQkJcHJpbnQoZiJ7Qn0gIikNCgkJCQkJCQlhc3UgPSBpbnB1dChmIntCfVvigKJdIEJ1YXQgc2FuZGkgOiB7SX0iKS5zcGxpdCgiLCIpDQoJCQkJCQkJaWYgbGVuKGFzdSkgPT0iIjoNCgkJCQkJCQkJcHJpbnQoZiJ7Qn0gIikNCgkJCQkJCQkJcHJpbnQoZiJ7SH1b4oCiXXtJfSBTYW5kaSB0aWRhayBib2xlaCBrb3NvbmciKTtleGl0KCkNCgkJCQkJCQlzdGFydGVkKCkNCgkJCQkJCQlmb3IgdXNlciBpbiBpZDoNCgkJCQkJCQkJdWlkLCBuYW1lID0gdXNlci5zcGxpdCgiPD0+IikNCgkJCQkJCQkJY29lZy5zdWJtaXQoYXBpLCB1aWQsIGFzdSkNCgkJCQkJCWV4aXQoKQ0KCQkJCQllbGlmIHRlciBpbiBbImQiLCJEIl06DQoJCQkJCQl3aXRoIFRocmVhZFBvb2xFeGVjdXRvcihtYXhfd29ya2Vycz0zMCkgYXMgY29lZzoNCgkJCQkJCQlzdGFydGVkKCkNCgkJCQkJCQlmb3IgdXNlciBpbiBpZDoNCgkJCQkJCQkJdWlkLCBuYW1lID0gdXNlci5zcGxpdCgiPD0+IikNCgkJCQkJCQkJZnJpc3Q9bmFtZS5zcGxpdCgiICIpDQoJCQkJCQkJCWlmIGxlbihmcmlzdCk+PTY6DQoJCQkJCQkJCQlmaWkgPSBbIG5hbWUsIGZyaXN0WzBdLCBmcmlzdFswXSsiMTIzIiwgZnJpc3RbMF0rIjEyMzQiLCBmcmlzdFswXSsiMTIzNDUiLCBmcmlzdFswXSsiMTIzNDU2IiBdDQoJCQkJCQkJCWVsaWYgbGVuKGZyaXN0KTw9MjoNCgkJCQkJCQkJCWZpaSA9IFsgbmFtZSwgZnJpc3RbMF0sIGZyaXN0WzBdKyIxMjMiLCBmcmlzdFswXSsiMTIzNCIsIGZyaXN0WzBdKyIxMjM0NSIsIGZyaXN0WzBdKyIxMjM0NTYiIF0NCgkJCQkJCQkJZWxpZiBsZW4oZnJpc3QpPD0zOg0KCQkJCQkJCQkJZmlpID0gWyBuYW1lLCBmcmlzdFswXSwgZnJpc3RbMF0rIjEyMyIsIGZyaXN0WzBdKyIxMjM0IiwgZnJpc3RbMF0rIjEyMzQ1IiwgZnJpc3RbMF0rIjEyMzQ1NiIgXQ0KCQkJCQkJCQllbHNlOg0KCQkJCQkJCQkJZmlpID0gWyAidGVyc2VyYWgiLCJrb250b2wiLCJhbmppbmciLCJiYW5nc2F0JywnYmFqaW5nYW4nLCdqYW5jb2siIF0NCgkJCQkJCQkJY29lZy5zdWJtaXQoYXBpLCB1aWQsIGZpaSkNCgkJCQkJCWV4aXQoKQ0KCQkJCWVsc2U6cHJpbnQoZiJ7SH1b4oCiXXtNfSBFcm9yIik7ZXhpdCgpDQoJCQlleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOnByaW50KGYie0J9W+KAol17SX0gRXJvciIpO2V4aXQoKQ0KDQoJCWVsc2U6DQoJCQlwcmludChmIntIfSAiKQ0KCQkJcHJpbnQoZiJ7SH1b4oCiXSBDcmFjayBtZW5nZ3VuYWthbiBwYXNzd29yZCBtYW51YWwvZGVmYXVsdCB7SX1NL0QiKQ0KCQkJcHJpbnQoZiJ7Qn0gIikNCgkJCXRlciA9aW5wdXQoZiJ7SH1b4oCiXSBQaWxpaCA6IHtJfSIpDQoJCQlpZiB0ZXIgaW4gWyJtIiwiTSJdOg0KCQkJCXdpdGggVGhyZWFkUG9vbEV4ZWN1dG9yKG1heF93b3JrZXJzPTMwKSBhcyBjb2VnOg0KCQkJCQlwcmludChmIntIfSAiKQ0KCQkJCQlwcmludChmIntIfSAiKQ0KCQkJCQlwcmludChmIntIfVvigKJdIENvbnRvaCBwYXNzd29yZCA6IHtJfXNheWFuZyxuZ2VudG90eXVrIikNCgkJCQkJcHJpbnQoZiJ7Qn0gIikNCgkJCQkJYXN1ID0gaW5wdXQoZiJ7Qn1b4oCiXSBCdWF0IHNhbmRpIDoge0l9Iikuc3BsaXQoIiwiKQ0KCQkJCQlpZiBsZW4oYXN1KSA9PSIiOg0KCQkJCQkJcHJpbnQoZiJ7SH0gIikNCgkJCQkJCXByaW50KGYie0h9ICIpDQoJCQkJCQlwcmludChmIntIfVvigKJde0l9IFNhbmRpIHRpZGFrIGJvbGVoIGtvc29uZyIpDQoJCQkJCXN0YXJ0ZWQoKQ0KCQkJCQlmb3IgdXNlciBpbiBpZDoNCgkJCQkJCXVpZCwgbmFtZSA9IHVzZXIuc3BsaXQoIjw9PiIpDQoJCQkJCQljb2VnLnN1Ym1pdChhcGksIHVpZCwgYXN1KQ0KCQkJCWV4aXQoKQ0KCQkJZWxpZiB0ZXIgaW4gWyJkIiwiRCJdOg0KCQkJCXdpdGggVGhyZWFkUG9vbEV4ZWN1dG9yKG1heF93b3JrZXJzPTMwKSBhcyBjb2VnOg0KCQkJCQlzdGFydGVkKCkNCgkJCQkJZm9yIHVzZXIgaW4gaWQ6DQoJCQkJCQl1aWQsIG5hbWUgPSB1c2VyLnNwbGl0KCI8PT4iKQ0KCQkJCQkJZnJpc3Q9bmFtZS5zcGxpdCgiICIpDQoJCQkJCQlpZiBsZW4oZnJpc3QpPj02Og0KCQkJCQkJCWZpaSA9IFsgbmFtZSwgZnJpc3RbMF0sIGZyaXN0WzBdKyIxMjMiLCBmcmlzdFswXSsiMTIzNCIsIGZyaXN0WzBdKyIxMjM0NSIsIGZyaXN0WzBdKyIxMjM0NTYiIF0NCgkJCQkJCWVsaWYgbGVuKGZyaXN0KTw9MjoNCgkJCQkJCQlmaWkgPSBbIG5hbWUsIGZyaXN0WzBdLCBmcmlzdFswXSsiMTIzIiwgZnJpc3RbMF0rIjEyMzQiLCBmcmlzdFswXSsiMTIzNDUiLCBmcmlzdFswXSsiMTIzNDU2IiBdDQoJCQkJCQllbGlmIGxlbihmcmlzdCk8PTM6DQoJCQkJCQkJZmlpID0gWyBuYW1lLCBmcmlzdFswXSwgZnJpc3RbMF0rIjEyMyIsIGZyaXN0WzBdKyIxMjM0IiwgZnJpc3RbMF0rIjEyMzQ1IiwgZnJpc3RbMF0rIjEyMzQ1NiIgXQ0KCQkJCQkJZWxzZToNCgkJCQkJCQlmaWkgPSBbICJhbmppbmciLCJiYW5nc2F0JywnYmFqaW5nYW4nLCdqYW5jb2siIF0NCgkJCQkJCWNvZWcuc3VibWl0KGFwaWlpaSwgdWlkLCBmaWkpDQoJCQkJZXhpdCgpDQoNCgllbGlmIGZpaXNheWFuZ3dpZGl5YSBpbiBbIjMiLCIwMyJdOg0KCQlwcmludChmIntIfSAiKQ0KCQlwcmludChmIntIfSAiKQ0KCQlwcmludChmIntIfVvigKJdIFRhbXBpbGthbiBvcHNpIGNoZWtwb2ludCB7SX1ZL1QiKQ0KCQlqYWxhbihmIntIfVvigKJde0h9IFNBUkFOIEpBTkdBTiBUQU1QSUxLQU4gQklLSU4gQ1JBQ0sgTEFNQSBNT05ZRVQhISEiKQ0KCQlfY2hlY2tvcHRpb25zXz1pbnB1dChmIntIfVvigKJdIFBpbGloIDoge0l9IikNCgkJaWYgX2NoZWNrb3B0aW9uc18gaW4gWyJ5IiwiWSJdOg0KCQkJdHJ5Og0KCQkJCV9rZXkgPSAiQW5qaW5rIg0KCQkJCWtleSA9ICJBbmppbmsiDQoJCQkJaWYgX2tleSBpbiBrZXk6DQoJCQkJCXByaW50KGYie0h9ICIpDQoJCQkJCXByaW50KGYie0h9W+KAol0gQ3JhY2sgbWVuZ2d1bmFrYW4gcGFzc3dvcmQgbWFudWFsL2RlZmF1bHQge0l9TS9EIikNCgkJCQkJdGVyID1pbnB1dChmIntIfVvigKJdIFBpbGloIDoge0l9IikNCgkJCQkJaWYgdGVyIGluIFsibSIsIk0iXToNCgkJCQkJCXdpdGggVGhyZWFkUG9vbEV4ZWN1dG9yKG1heF93b3JrZXJzPTMwKSBhcyBjb2VnOg0KCQkJCQkJCXByaW50KGYie0h9ICIpDQoJCQkJCQkJcHJpbnQoZiJ7SH0gIikNCgkJCQkJCQlwcmludChmIntIfVvigKJdIENvbnRvaCBwYXNzd29yZCA6IHtJfXNheWFuZyxuZ2V0b3R5dWsiKQ0KCQkJCQkJCXByaW50KGYie0h9ICIpDQoJCQkJCQkJYXN1ID0gaW5wdXQoZiJ7Qn1b4oCiXSBCdWF0IHNhbmRpIDoge0l9ICIpLnNwbGl0KCIsIikNCgkJCQkJCQlpZiBsZW4oYXN1KSA9PSIiOg0KCQkJCQkJCQlwcmludChmIntIfSAiKQ0KCQkJCQkJCQlwcmludChmIntIfVvigKJde0l9IFNhbmRpIHRpZGFrIGJvbGVoIGtvc29uZyBhbmppbmsiKTtleGl0KCkNCgkJCQkJCQlzdGFydGVkKCkNCgkJCQkJCQlmb3IgdXNlciBpbiBpZDoNCgkJCQkJCQkJdWlkLCBuYW1lID0gdXNlci5zcGxpdCgiPD0+IikNCgkJCQkJCQkJY29lZy5zdWJtaXQobWJhc2ljLCB1aWQsIGFzdSkNCgkJCQkJCWV4aXQoKQ0KCQkJCQllbGlmIHRlciBpbiBbImQiLCJEIl06DQoJCQkJCQl3aXRoIFRocmVhZFBvb2xFeGVjdXRvcihtYXhfd29ya2Vycz0zMCkgYXMgY29lZzoNCgkJCQkJCQlzdGFydGVkKCkNCgkJCQkJCQlmb3IgdXNlciBpbiBpZDoNCgkJCQkJCQkJdWlkLCBuYW1lID0gdXNlci5zcGxpdCgiPD0+IikNCgkJCQkJCQkJZnJpc3Q9bmFtZS5zcGxpdCgiICIpDQoJCQkJCQkJCWlmIGxlbihmcmlzdCk+PTY6DQoJCQkJCQkJCQlmaWkgPSBbIG5hbWUsIGZyaXN0WzBdLCBmcmlzdFswXSsiMTIzIiwgZnJpc3RbMF0rIjEyMzQiLCBmcmlzdFswXSsiMTIzNDUiLCBmcmlzdFswXSsiMTIzNDU2IiBdDQoJCQkJCQkJCWVsaWYgbGVuKGZyaXN0KTw9MjoNCgkJCQkJCQkJCWZpaSA9IFsgbmFtZSwgZnJpc3RbMF0sIGZyaXN0WzBdKyIxMjMiLCBmcmlzdFswXSsiMTIzNCIsIGZyaXN0WzBdKyIxMjM0NSIsIGZyaXN0WzBdKyIxMjM0NTYiIF0NCgkJCQkJCQkJZWxpZiBsZW4oZnJpc3QpPD0zOg0KCQkJCQkJCQkJZmlpID0gWyBuYW1lLCBmcmlzdFswXSwgZnJpc3RbMF0rIjEyMyIsIGZyaXN0WzBdKyIxMjM0IiwgZnJpc3RbMF0rIjEyMzQ1IiwgZnJpc3RbMF0rIjEyMzQ1NiIgXQ0KCQkJCQkJCQllbHNlOg0KCQkJCQkJCQkJZmlpID0gWyAidGVyc2VyYWgiLCJrb250b2wiLCJhbmppbmciLCJiYW5nc2F0JywnYmFqaW5nYW4nLCdqYW5jb2siIF0NCgkJCQkJCQkJY29lZy5zdWJtaXQobW9iaWwsIHVpZCwgZmlpKQ0KCQkJCQkJZXhpdCgpDQoJCQkJZWxzZTpwcmludChmIntrZXl9Iik7ZXhpdCgpDQoJCQlleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOnByaW50KGYie19rZXl9Iik7ZXhpdCgpDQoNCgkJZWxzZToNCgkJCXByaW50KGYie0h9ICIpDQoJCQlwcmludChmIntIfSAiKQ0KCQkJcHJpbnQoZiJ7SH1b4oCiXSBDcmFjayBtZW5nZ3VuYWthbiBwYXN3b3JkIG1hbnVhbC9kZWZhdWx0cyB7SX1NL0QiKQ0KCQkJdGVyID1pbnB1dChmIntIfVvigKJdIFBpbGloIDoge0l9IikNCgkJCWlmIHRlciBpbiBbIm0iLCJNIl06DQoJCQkJd2l0aCBUaHJlYWRQb29sRXhlY3V0b3IobWF4X3dvcmtlcnM9MzApIGFzIGNvZWc6DQoJCQkJCXByaW50KGYie0h9ICIpDQoJCQkJCXByaW50KGYie0h9ICIpDQoJCQkJCXByaW50KGYie0h9W+KAol0gQ29udG9oIHBhc3N3b3JkIHtJfUFuamluayxzYXlhbmcsbmdlbnRvdHl1ayIpDQoJCQkJCXByaW50KGYie0h9ICIpDQoJCQkJCWFzdSA9IGlucHV0KGYie0h9W+KAol0gQnVhdCBzYW5kaSA6IHtJfSIpLnNwbGl0KCIsIikNCgkJCQkJaWYgbGVuKGFzdSkgPT0iIjoNCgkJCQkJCXByaW50KGYie0h9ICIpDQoJCQkJCQlwcmludChmIntIfSAiKQ0KCQkJCQkJcHJpbnQoZiJ7SH1b4oCiXXtLfSBTYW5kaSB0aWRhayBib2xlaCBrb3NvbmcgS29udG9MIik7ZXhpdCgpDQoJCQkJCXN0YXJ0ZWQoKQ0KCQkJCQlmb3IgdXNlciBpbiBpZDoNCgkJCQkJCXVpZCwgbmFtZSA9IHVzZXIuc3BsaXQoIjw9PiIpDQoJCQkJCQljb2VnLnN1Ym1pdChtYmFzaWNjLCB1aWQsIGFzdSkNCgkJCQlleGl0KCkNCgkJCWVsaWYgdGVyIGluIFsiZCIsIkQiXToNCgkJCQl3aXRoIFRocmVhZFBvb2xFeGVjdXRvcihtYXhfd29ya2Vycz0zMCkgYXMgY29lZzoNCgkJCQkJc3RhcnRlZCgpDQoJCQkJCWZvciB1c2VyIGluIGlkOg0KCQkJCQkJdWlkLCBuYW1lID0gdXNlci5zcGxpdCgiPD0+IikNCgkJCQkJCWZyaXN0PW5hbWUuc3BsaXQoIiAiKQ0KCQkJCQkJaWYgbGVuKGZyaXN0KT49NjoNCgkJCQkJCQlmaWkgPSBbIG5hbWUsIGZyaXN0WzBdLCBmcmlzdFswXSsiMTIzIiwgZnJpc3RbMF0rIjEyMzQiLCBmcmlzdFswXSsiMTIzNDUiLCBmcmlzdFswXSsiMTIzNDU2IiBdDQoJCQkJCQllbGlmIGxlbihmcmlzdCk8PTI6DQoJCQkJCQkJZmlpID0gWyBuYW1lLCBmcmlzdFswXSwgZnJpc3RbMF0rIjEyMyIsIGZyaXN0WzBdKyIxMjM0IiwgZnJpc3RbMF0rIjEyMzQ1IiwgZnJpc3RbMF0rIjEyMzQ1NiIgXQ0KCQkJCQkJZWxpZiBsZW4oZnJpc3QpPD0zOg0KCQkJCQkJCWZpaSA9IFsgbmFtZSwgZnJpc3RbMF0sIGZyaXN0WzBdKyIxMjMiLCBmcmlzdFswXSsiMTIzNCIsIGZyaXN0WzBdKyIxMjM0NSIsIGZyaXN0WzBdKyIxMjM0NTYiIF0NCgkJCQkJCWVsc2U6DQoJCQkJCQkJZmlpID0gWyAiYW5qaW5nIiwiYmFuZ3NhdCcsJ2JhamluZ2FuJywnamFuY29rIiBdDQoJCQkJCQljb2VnLnN1Ym1pdChtb2JpbGwsIHVpZCwgZmlpKQ0KCQkJCWV4aXQoKQ0KCQkJCQ0KCWVsaWYgZmlpc2F5YW5nd2lkaXlhIGluIFsiMiIsIjAyIl06DQoJCXByaW50KGYie0h9ICIpDQoJCXByaW50KGYie0h9ICIpDQoJCXByaW50KGYie0h9W+KAol0gVGFtcGlsa2FuIG9wc2kgY2hla3BvaW50IHtJfVkvVCIpDQoJCWphbGFuKGYie0h9W+KAol17SH0gU0FSQU4gSkFOR0FOIFRBTVBJTEtBTiBCSUtJTiBDUkFDSyBMQU1BIE1PTllFVCEhISIpDQoJCV9jaGVja29wdGlvbnNfPWlucHV0KGYie0h9W+KAol0gUGlsaWggOiB7SX0iKQ0KCQlpZiBfY2hlY2tvcHRpb25zXyBpbiBbInkiLCJZIl06DQoJCQl0cnk6DQoJCQkJX2tleSA9ICJBbmppbmsiDQoJCQkJa2V5ID0gIkFuamluayINCgkJCQlpZiBfa2V5IGluIGtleToNCgkJCQkJcHJpbnQoZiJ7SH0gIikNCgkJCQkJcHJpbnQoZiJ7SH1b4oCiXSBDcmFjayBtZW5nZ3VuYWthbiBwYXNzd29yZCBtYW51YWwvZGVmYXVsdCB7SX1NL0QiKQ0KCQkJCQl0ZXIgPWlucHV0KGYie0h9W+KAol0gUGlsaWggOiB7SX0iKQ0KCQkJCQlpZiB0ZXIgaW4gWyJtIiwiTSJdOg0KCQkJCQkJd2l0aCBUaHJlYWRQb29sRXhlY3V0b3IobWF4X3dvcmtlcnM9MzApIGFzIGNvZWc6DQoJCQkJCQkJcHJpbnQoZiJ7Qn0gIikNCgkJCQkJCQlwcmludChmIntIfVvigKJdIENvbnRvaCBwYXNzd29yZCA6IHtJfXNheWFuZyxuZ2VudG90eXVrIikNCgkJCQkJCQlwcmludChmIntIfSAiKQ0KCQkJCQkJCWFzdSA9IGlucHV0KGYie0h9W+KAol0gQnVhdCBzYW5kaSA6IHtCfSAiKS5zcGxpdCgiLCIpDQoJCQkJCQkJaWYgbGVuKGFzdSkgPT0iIjoNCgkJCQkJCQkJcHJpbnQoZiJ7SH0gIikNCgkJCQkJCQkJcHJpbnQoZiJ7SH1b4oCiXXtLfSBTYW5kaSB0aWRhayBib2xlaCBrb3NvbmcgYW5qaW5rIik7ZXhpdCgpDQoJCQkJCQkJc3RhcnRlZCgpDQoJCQkJCQkJZm9yIHVzZXIgaW4gaWQ6DQoJCQkJCQkJCXVpZCwgbmFtZSA9IHVzZXIuc3BsaXQoIjw9PiIpDQoJCQkJCQkJCWNvZWcuc3VibWl0KG1iYXNpYywgdWlkLCBhc3UpDQoJCQkJCQlleGl0KCkNCgkJCQkJZWxpZiB0ZXIgaW4gWyJkIiwiRCJdOg0KCQkJCQkJd2l0aCBUaHJlYWRQb29sRXhlY3V0b3IobWF4X3dvcmtlcnM9MzApIGFzIGNvZWc6DQoJCQkJCQkJc3RhcnRlZCgpDQoJCQkJCQkJZm9yIHVzZXIgaW4gaWQ6DQoJCQkJCQkJCXVpZCwgbmFtZSA9IHVzZXIuc3BsaXQoIjw9PiIpDQoJCQkJCQkJCWZyaXN0PW5hbWUuc3BsaXQoIiAiKQ0KCQkJCQkJCQlpZiBsZW4oZnJpc3QpPj02Og0KCQkJCQkJCQkJZmlpID0gWyBuYW1lLCBmcmlzdFswXSwgZnJpc3RbMF0rIjEyMyIsIGZyaXN0WzBdKyIxMjM0IiwgZnJpc3RbMF0rIjEyMzQ1IiwgZnJpc3RbMF0rIjEyMzQ1NiIgXQ0KCQkJCQkJCQllbGlmIGxlbihmcmlzdCk8PTI6DQoJCQkJCQkJCQlmaWkgPSBbIG5hbWUsIGZyaXN0WzBdLCBmcmlzdFswXSsiMTIzIiwgZnJpc3RbMF0rIjEyMzQiLCBmcmlzdFswXSsiMTIzNDUiLCBmcmlzdFswXSsiMTIzNDU2IiBdDQoJCQkJCQkJCWVsaWYgbGVuKGZyaXN0KTw9MzoNCgkJCQkJCQkJCWZpaSA9IFsgbmFtZSwgZnJpc3RbMF0sIGZyaXN0WzBdKyIxMjMiLCBmcmlzdFswXSsiMTIzNCIsIGZyaXN0WzBdKyIxMjM0NSIsIGZyaXN0WzBdKyIxMjM0NTYiIF0NCgkJCQkJCQkJZWxzZToNCgkJCQkJCQkJCWZpaSA9IFsgImFuamluZyIsImJhbmdzYXQnLCdiYWppbmdhbicsJ2phbmNvayIgXQ0KCQkJCQkJCQljb2VnLnN1Ym1pdChtYmFzaWMsIHVpZCwgZmlpKQ0KCQkJCQkJZXhpdCgpDQoJCQkJZWxzZTpwcmludChmIntrZXl9Iik7ZXhpdCgpDQoJCQlleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOnByaW50KGYie19rZXl9Iik7ZXhpdCgpDQoNCgkJZWxzZToNCgkJCXByaW50KGYie0h9ICIpDQoJCQlwcmludChmIntIfSAiKQ0KCQkJcHJpbnQoZiJ7SH1b4oCiXSBDcmFjayBtZW5nZ3VuYWthbiBwYXN3b3JkIG1hbnVhbC9kZWZhdWx0cyB7SX1NL0QiKQ0KCQkJdGVyID1pbnB1dChmIntIfVvigKJdIFBpbGloIDoge0l9IikNCgkJCWlmIHRlciBpbiBbIm0iLCJNIl06DQoJCQkJd2l0aCBUaHJlYWRQb29sRXhlY3V0b3IobWF4X3dvcmtlcnM9MzApIGFzIGNvZWc6DQoJCQkJCXByaW50KGYie0J9ICIpDQoJCQkJCXByaW50KGYie0J9ICIpDQoJCQkJCXByaW50KGYie0h9W+KAol0gQ29udG9oIHBhc3N3b3JkIHtJfUFuamluayxzYXlhbmcsbmdlbnRvdHl1ayIpDQoJCQkJCXByaW50KGYie0h9ICIpDQoJCQkJCWFzdSA9IGlucHV0KGYie0h9W+KAol0gQnVhdCBzYW5kaSA6IHtJfSIpLnNwbGl0KCIsIikNCgkJCQkJaWYgbGVuKGFzdSkgPT0iIjoNCgkJCQkJCXByaW50KGYie0h9ICIpDQoJCQkJCQlwcmludChmIntIfVvigKJde0t9IFNhbmRpIHRpZGFrIGJvbGVoIGtvc29uZyIpO2V4aXQoKQ0KCQkJCQlzdGFydGVkKCkNCgkJCQkJZm9yIHVzZXIgaW4gaWQ6DQoJCQkJCQl1aWQsIG5hbWUgPSB1c2VyLnNwbGl0KCI8PT4iKQ0KCQkJCQkJY29lZy5zdWJtaXQobWJhc2ljYywgdWlkLCBhc3UpDQoJCQkJZXhpdCgpDQoJCQllbGlmIHRlciBpbiBbImQiLCJEIl06DQoJCQkJd2l0aCBUaHJlYWRQb29sRXhlY3V0b3IobWF4X3dvcmtlcnM9MzApIGFzIGNvZWc6DQoJCQkJCXN0YXJ0ZWQoKQ0KCQkJCQlmb3IgdXNlciBpbiBpZDoNCgkJCQkJCXVpZCwgbmFtZSA9IHVzZXIuc3BsaXQoIjw9PiIpDQoJCQkJCQlmcmlzdD1uYW1lLnNwbGl0KCIgIikNCgkJCQkJCWlmIGxlbihmcmlzdCk+PTY6DQoJCQkJCQkJZmlpID0gWyBuYW1lLCBmcmlzdFswXSwgZnJpc3RbMF0rIjEyMyIsIGZyaXN0WzBdKyIxMjM0IiwgZnJpc3RbMF0rIjEyMzQ1IiwgZnJpc3RbMF0rIjEyMzQ1NiIgXQ0KCQkJCQkJZWxpZiBsZW4oZnJpc3QpPD0yOg0KCQkJCQkJCWZpaSA9IFsgbmFtZSwgZnJpc3RbMF0sIGZyaXN0WzBdKyIxMjMiLCBmcmlzdFswXSsiMTIzNCIsIGZyaXN0WzBdKyIxMjM0NSIsIGZyaXN0WzBdKyIxMjM0NTYiIF0NCgkJCQkJCWVsaWYgbGVuKGZyaXN0KTw9MzoNCgkJCQkJCQlmaWkgPSBbIG5hbWUsIGZyaXN0WzBdLCBmcmlzdFswXSsiMTIzIiwgZnJpc3RbMF0rIjEyMzQiLCBmcmlzdFswXSsiMTIzNDUiLCBmcmlzdFswXSsiMTIzNDU2IiBdDQoJCQkJCQllbHNlOg0KCQkJCQkJCWZpaSA9IFsgImFuamluZyIsImJhbmdzYXQnLCdiYWppbmdhbicsJ2phbmNvayIgXQ0KCQkJCQkJY29lZy5zdWJtaXQobWJhc2ljYywgdWlkLCBmaWkpDQoJCQkJZXhpdCgpDQoJCQkJDQpkZWYga29uZSgpOg0KICAgIHByaW50KGYie0J9ICIpDQogICAgcHJpbnQoZiJ7Qn0gIikNCiAgICBwcmludChmIntIfVsxXSBCJy1BcGkg44CK44CLe0l9S09OVE9MLUNFUEFUIikNCiAgICBwcmludChmIntIfVsyXSBNYmFzaWMg44CK44CLe0t9TUVNRUstU0VEQU5HIikNCiAgICBwcmludChmIntIfVszXSBNb2JpbGUg44CK44CLe0h9TkdFTlRPVC1QRUxBTiIpDQoNCmRlZiBzdGFydGVkKCk6DQogICAgcHJpbnQoZiJ7Qn0gIikNCiAgICBwcmludChmIntCfSAiKQ0KICAgIHByaW50KGYie0h9W+KAol17SH0gUmVzdWx0cyB7SX1vayB7SH10ZXJzaW1wYW4gZGkge0l9b2sve3RhbmdnYWx9IikNCiAgICBwcmludChmIntIfVvigKJde0h9IFJlc3VsdHMge0t9Y3Age0h9dGVyc2ltcGFuIGRpIHtLfWNwL3t0YW5nZ2FsfSIpDQogICAgcHJpbnQoZiJ7SH1b4oCiXSBPTi9PRkYgTU9ERSBQRVNBV0FUIDUgREVUSUsgU0VUSUFQIDUwMCBJRCBNT05ZRVQhISIpDQogICAgcHJpbnQoZiJ7Qn0ge0l9IikNCg0KZGVmIGFwaSh1aWQsIGZpaSk6DQogICAgdHJ5Og0KICAgICAgICB1YSA9IG9wZW4oInVhIiwgInIiKS5yZWFkKCkNCiAgICBleGNlcHQgSU9FcnJvcjoNCiAgICAgICAgdWEgPSAiTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDQuMS4yOyBOb2tpYV9YIEJ1aWxkL0paTzU0SykgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzMwLjAuMTU5OS44MiBNb2JpbGUgU2FmYXJpLzUzNy4zNiBOb2tpYUJyb3dzZXIvMS4yLjAuMTEiDQogICAgZ2xvYmFsIG9rLCBjcCwgbG9vcCwgdG9rZW4sIGNvb2tpZQ0KICAgIHN5cy5zdGRvdXQud3JpdGUoZiJccntIfVvigKJdIHzilaTilrrilaTilroge0h9IHtsb29wfS97bGVuKGlkKX0ge0l9T0sgOiB7SX17bGVuKG9rKX0ge0t9Q1AgOiB7S317bGVuKGNwKX0iKTtzeXMuc3Rkb3V0LmZsdXNoKCkNCiAgICBmb3IgcHcgaW4gZmlpOg0KICAgICAgICBwdyA9IHB3Lmxvd2VyKCkNCiAgICAgICAgaGVhZGVyc18gPSB7IngtZmItY29ubmVjdGlvbi1iYW5kd2lkdGgiOiBzdHIocmFuZG9tLnJhbmRpbnQoMjAwMDAwMDAuMCwgMzAwMDAwMDAuMCkpLCAieC1mYi1zaW0taG5pIjogc3RyKHJhbmRvbS5yYW5kaW50KDIwMDAwLCA0MDAwMCkpLCAieC1mYi1uZXQtaG5pIjogc3RyKHJhbmRvbS5yYW5kaW50KDIwMDAwLCA0MDAwMCkpLCAieC1mYi1jb25uZWN0aW9uLXF1YWxpdHkiOiAiRVhDRUxMRU5UIiwgIngtZmItY29ubmVjdGlvbi10eXBlIjogImNlbGwuQ1RSYWRpb0FjY2Vzc1RlY2hub2xvZ3lIU0RQQSIsICJ1c2VyLWFnZW50IjogdWEsICJjb250ZW50LXR5cGUiOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIiwgIngtZmItaHR0cC1lbmdpbmUiOiAiTGlnZXIifQ0KICAgICAgICBzZXMgPSByZXF1ZXN0cy5TZXNzaW9uKCkNCiAgICAgICAgc2VuZCA9IHNlcy5nZXQoImh0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2Zvcm1hdD1qc29uJmVtYWlsPSIrc3RyKHVpZCkrIiZwYXNzd29yZD0iK3N0cihwdykrIiZjcmVkZW50aWFsc190eXBlPWRldmljZV9iYXNlZF9sb2dpbl9wYXNzd29yZCZnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXM9MSZlcnJvcl9kZXRhaWxfdHlwZT1idXR0b25fd2l0aF9kaXNhYmxlZCZzb3VyY2U9ZGV2aWNlX2Jhc2VkX2xvZ2luJm1ldGFfaW5mX2ZibWV0YT0lMjAmY3VycmVudGx5X2xvZ2dlZF9pbmxvbG9saWQ9MCZtZXRob2Q9R0VUJmxvY2FsZT1lbl9VUyZjbGllbnRfY291bnRyeV9jb2RlPVVTJmZiX2FwaV9jYWxsZXJfY2xhc3M9Y29tLmZhY2Vib29rLmZvcy5oZWFkZXJzdjIuZmI0YW9yY2EuSGVhZGVyc1YyQ29uZmlnRmV0Y2hSZXF1ZXN0SGFuZGxlciZhY2Nlc3NfdG9rZW49MzUwNjg1NTMxNzI4fDYyZjhjZTlmNzRiMTJmODRjMTIzY2MyMzQzN2E0YTMyJmZiX2FwaV9yZXFfZnJpZW5kbHlfbmFtZT1hdXRoZW50aWNhdGUmY3BsPXRydWUiLCBoZWFkZXJzPWhlYWRlcnNfKQ0KICAgICAgICBpZiAic2Vzc2lvbl9rZXkiIGluIHNlbmQudGV4dCBhbmQgIkVBQUEiIGluIHNlbmQudGV4dDoNCiAgICAgICAgICAgIHByaW50KGYiXHJ7SH0gfOKVpOKWuuKVpOKWuiB7SX17dWlkfeKAontwd30iKQ0KICAgICAgICAgICAgb2suYXBwZW5kKCIlc3wlcyIlKHVpZCwgcHcpKQ0KICAgICAgICAgICAgb3BlbigiT0svJXMuanNvbiIlKHRhbmdnYWwpLCJhIikud3JpdGUoIiVzfCVzXG4iJSh1aWQsIHB3KSkNCiAgICAgICAgICAgIGJyZWFrDQogICAgICAgIGVsaWYgInd3dy5mYWNlYm9vay5jb20iIGluIHNlbmQuanNvbigpWyJlcnJvcl9tc2ciXToNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICB0b2tlbiAgPSBvcGVuKCdsb2dpbi90b2tlbi5qc29uJywncicpLnJlYWQoKQ0KICAgICAgICAgICAgICAgIGNvb2tpZSA9IHsnY29va2llJzpvcGVuKCdsb2dpbi9jb29raWUuanNvbicsJ3InKS5yZWFkKCl9DQogICAgICAgICAgICAgICAgdHRsID0gc2VzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJXM/YWNjZXNzX3Rva2VuPSVzIiUodWlkLCB0b2tlbiksY29va2llcz1jb29raWUpLmpzb24oKVsiYmlydGhkYXkiXQ0KICAgICAgICAgICAgICAgIG1vbnRoLCBkYXksIHllYXIgPSB0dGwuc3BsaXQoIi8iKQ0KICAgICAgICAgICAgICAgIG1vbnRoID0gX2J1bGFuX1ttb250aF0NCiAgICAgICAgICAgICAgICBwcmludChmIlxye0h9IHzilaTilrrilaTilroge0t9e3VpZH3igKJ7cHd94oCie2RheX0ge21vbnRofSB7eWVhcn0iKQ0KICAgICAgICAgICAgICAgIGNwLmFwcGVuZCgiJXN8JXMiJSh1aWQsIHB3KSkNCiAgICAgICAgICAgICAgICBvcGVuKCJDUC8lcy5qc29uIiUodGFuZ2dhbCksImEiKS53cml0ZSgiJXN8JXN8JXMgJXMgJXNcbiIlKHVpZCwgcHcsIGRheSwgbW9udGgsIHllYXIpKQ0KICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToNCiAgICAgICAgICAgICAgICBkYXkgPSAoIiAiKQ0KICAgICAgICAgICAgICAgIG1vbnRoID0gKCIgIikNCiAgICAgICAgICAgICAgICB5ZWFyID0gKCIgIikNCiAgICAgICAgICAgIGV4Y2VwdDpwYXNzDQogICAgICAgICAgICBjZWtfbG9nKHVpZCxwdyx1YSkNCiAgICAgICAgICAgIHByaW50KGYiXHJ7SX0gfOKVpOKWuuKVpOKWuiB7S317dWlkfeKAontwd30iKQ0KICAgICAgICAgICAgY3AuYXBwZW5kKCIlc3wlcyIlKHVpZCwgcHcpKQ0KICAgICAgICAgICAgb3BlbigiQ1AvJXMuanNvbiIlKHRhbmdnYWwpLCJhIikud3JpdGUoIiVzfCVzXG4iJSh1aWQsIHB3KSkNCiAgICAgICAgICAgIGJyZWFrDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBjb250aW51ZQ0KDQogICAgbG9vcCArPSAxDQoNCmRlZiBhcGlpaWkodWlkLCBmaWkpOg0KICAgIHRyeToNCiAgICAgICAgdWEgPSBvcGVuKCJ1YSIsICJyIikucmVhZCgpDQogICAgZXhjZXB0IElPRXJyb3I6DQogICAgICAgIHVhID0gIk1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA0LjEuMjsgTm9raWFfWCBCdWlsZC9KWk81NEspIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8zMC4wLjE1OTkuODIgTW9iaWxlIFNhZmFyaS81MzcuMzYgTm9raWFCcm93c2VyLzEuMi4wLjExIg0KICAgIGdsb2JhbCBvaywgY3AsIGxvb3AsIHRva2VuLCBjb29raWUNCg0KICAgIHN5cy5zdGRvdXQud3JpdGUoZiJccntIfVvigKJdIHzilaTilrrilaTilroge0h9IHtsb29wfS97bGVuKGlkKX0ge0l9T0sgOiB7SX17bGVuKG9rKX0ge0t9Q1AgOiB7S317bGVuKGNwKX0iKTtzeXMuc3Rkb3V0LmZsdXNoKCkNCiAgICBmb3IgcHcgaW4gZmlpOg0KICAgICAgICBwdyA9IHB3Lmxvd2VyKCkNCiAgICAgICAgaGVhZGVyc18gPSB7IngtZmItY29ubmVjdGlvbi1iYW5kd2lkdGgiOiBzdHIocmFuZG9tLnJhbmRpbnQoMjAwMDAwMDAuMCwgMzAwMDAwMDAuMCkpLCAieC1mYi1zaW0taG5pIjogc3RyKHJhbmRvbS5yYW5kaW50KDIwMDAwLCA0MDAwMCkpLCAieC1mYi1uZXQtaG5pIjogc3RyKHJhbmRvbS5yYW5kaW50KDIwMDAwLCA0MDAwMCkpLCAieC1mYi1jb25uZWN0aW9uLXF1YWxpdHkiOiAiRVhDRUxMRU5UIiwgIngtZmItY29ubmVjdGlvbi10eXBlIjogImNlbGwuQ1RSYWRpb0FjY2Vzc1RlY2hub2xvZ3lIU0RQQSIsICJ1c2VyLWFnZW50IjogdWEsICJjb250ZW50LXR5cGUiOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIiwgIngtZmItaHR0cC1lbmdpbmUiOiAiTGlnZXIifQ0KICAgICAgICBzZXMgPSByZXF1ZXN0cy5TZXNzaW9uKCkNCiAgICAgICAgc2VuZCA9IHNlcy5nZXQoImh0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2Zvcm1hdD1qc29uJmVtYWlsPSIrc3RyKHVpZCkrIiZwYXNzd29yZD0iK3N0cihwdykrIiZjcmVkZW50aWFsc190eXBlPWRldmljZV9iYXNlZF9sb2dpbl9wYXNzd29yZCZnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXM9MSZlcnJvcl9kZXRhaWxfdHlwZT1idXR0b25fd2l0aF9kaXNhYmxlZCZzb3VyY2U9ZGV2aWNlX2Jhc2VkX2xvZ2luJm1ldGFfaW5mX2ZibWV0YT0lMjAmY3VycmVudGx5X2xvZ2dlZF9pbmxvbG9saWQ9MCZtZXRob2Q9R0VUJmxvY2FsZT1lbl9VUyZjbGllbnRfY291bnRyeV9jb2RlPVVTJmZiX2FwaV9jYWxsZXJfY2xhc3M9Y29tLmZhY2Vib29rLmZvcy5oZWFkZXJzdjIuZmI0YW9yY2EuSGVhZGVyc1YyQ29uZmlnRmV0Y2hSZXF1ZXN0SGFuZGxlciZhY2Nlc3NfdG9rZW49MzUwNjg1NTMxNzI4fDYyZjhjZTlmNzRiMTJmODRjMTIzY2MyMzQzN2E0YTMyJmZiX2FwaV9yZXFfZnJpZW5kbHlfbmFtZT1hdXRoZW50aWNhdGUmY3BsPXRydWUiLCBoZWFkZXJzPWhlYWRlcnNfKQ0KICAgICAgICBpZiAic2Vzc2lvbl9rZXkiIGluIHNlbmQudGV4dCBhbmQgIkVBQUEiIGluIHNlbmQudGV4dDoNCiAgICAgICAgICAgIHByaW50KGYiXHJ7SX0gfOKVpOKWuuKVpOKWuiB7SX17dWlkfeKAontwd30iKQ0KICAgICAgICAgICAgb2suYXBwZW5kKCIlc3wlcyIlKHVpZCwgcHcpKQ0KICAgICAgICAgICAgb3BlbigiT0svJXMuanNvbiIlKHRhbmdnYWwpLCJhIikud3JpdGUoIiVzfCVzXG4iJSh1aWQsIHB3KSkNCiAgICAgICAgICAgIGJyZWFrDQogICAgICAgIGVsaWYgInd3dy5mYWNlYm9vay5jb20iIGluIHNlbmQuanNvbigpWyJlcnJvcl9tc2ciXToNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICB0b2tlbiAgPSBvcGVuKCdsb2dpbi90b2tlbi5qc29uJywncicpLnJlYWQoKQ0KICAgICAgICAgICAgICAgIGNvb2tpZSA9IHsnY29va2llJzpvcGVuKCdsb2dpbi9jb29raWUuanNvbicsJ3InKS5yZWFkKCl9DQogICAgICAgICAgICAgICAgdHRsID0gc2VzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJXM/YWNjZXNzX3Rva2VuPSVzIiUodWlkLCB0b2tlbiksY29va2llcz1jb29raWUpLmpzb24oKVsiYmlydGhkYXkiXQ0KICAgICAgICAgICAgICAgIG1vbnRoLCBkYXksIHllYXIgPSB0dGwuc3BsaXQoIi8iKQ0KICAgICAgICAgICAgICAgIG1vbnRoID0gX2J1bGFuX1ttb250aF0NCiAgICAgICAgICAgICAgICBwcmludChmIlxye0l9IHzilaTilrrilaTilroge0t9e3VpZH3igKJ7cHd94oCie2RheX0ge21vbnR9IHt5ZWFyfSIpDQogICAgICAgICAgICAgICAgY3AuYXBwZW5kKCIlc3wlcyIlKHVpZCwgcHcpKQ0KICAgICAgICAgICAgICAgIG9wZW4oIkNQLyVzLmpzb24lIih0YW5nZ2FsKSwiYSIpLndyaXRlKCIlc3wlc3wlcyAlcyAlc1xuIiUodWlkLCBwdywgZGF5LCBtb250aCwgeWVhcikpDQogICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOg0KICAgICAgICAgICAgICAgIGRheSA9ICgiICIpDQogICAgICAgICAgICAgICAgbW9udGggPSAoIiAiKQ0KICAgICAgICAgICAgICAgIHllYXIgPSAoIiAiKQ0KICAgICAgICAgICAgZXhjZXB0OnBhc3MNCiAgICAgICAgICAgIHByaW50KGYiXHJ7SX0gfOKVpOKWuuKVpOKWuiB7S317dWlkfeKAontwd30iKQ0KICAgICAgICAgICAgY3AuYXBwZW5kKCIlc3wlcyIlKHVpZCwgcHcpKQ0KICAgICAgICAgICAgb3BlbigiQ1AvJXMuanNvbiIlKHRhbmdnYWwpLCJhIikud3JpdGUoIiVzfCVzXG4iJSh1aWQsIHB3KSkNCiAgICAgICAgICAgIGJyZWFrDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBjb250aW51ZQ0KDQogICAgbG9vcCArPSAxDQoNCmRlZiBtYmFzaWModWlkLCBmaWkpOg0KCXRyeToNCgkJdWEgPSBvcGVuKCJ1YSIsICJyIikucmVhZCgpDQoJZXhjZXB0IElPRXJyb3I6DQoJCXVhID0gIlN1cHBvcnRzRnJlc2NvPTEgRGFsdmlrLzIuMS4wIChMaW51eDsgVTsgQW5kcm9pZCA2LjAuMTsgU00tSjIxMEYgQnVpbGQvTU1CMjlRKSBTb3VyY2UvMSBbRkJBTi9FTUE7VU5JVFlfUEFDS0FHRS8zNDI7RkJCVi8xMDc1ODY3MDY7RkJBVi8xNzIuMC4wLjguMTgyO0ZCRFYvU00tSjIxMEY7RkJMQy9lbl9VUztGQk9QLzIwXSINCglnbG9iYWwgb2ssIGNwLCBsb29wLCB0b2tlbiwgY29va2llDQoJc3lzLnN0ZG91dC53cml0ZShmIlxye0h9W+KAol0gfOKVpOKWuuKVpOKWuiB7SH0ge2xvb3B9L3tsZW4oaWQpfSB7SX1PSyA6IHtJfXtsZW4ob2spfSB7S31DUCA6IHtLfXtsZW4oY3ApfSIpO3N5cy5zdGRvdXQuZmx1c2goKQ0KCWZvciBwdyBpbiBmaWk6DQoJCWZpaV9ndGcgPSB7fQ0KCQlwdyA9IHB3Lmxvd2VyKCkNCgkJc2VzID0gcmVxdWVzdHMuU2Vzc2lvbigpDQoJCXNlcy5oZWFkZXJzLnVwZGF0ZSh7Im9yaWdpbiI6ICJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20iLCAiYWNjZXB0LWxhbmd1YWdlIjogImlkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43IiwgImFjY2VwdC1lbmNvZGluZyI6ICJnemlwLCBkZWZsYXRlIiwgImFjY2VwdCI6ICJ0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44IiwgInVzZXItYWdlbnQiOiB1YSwgIkhvc3QiOiAibWJhc2ljLmZhY2Vib29rLmNvbSIsICJyZWZlcmVyIjogImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9sb2dpbi8/bmV4dCZyZWY9ZGJsJmZsJnJlZmlkPTgiLCAiY2FjaGUtY29udHJvbCI6ICJtYXgtYWdlPTAiLCAidXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyI6ICIxIiwgImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQifSkNCgkJcCA9IHNlcy5nZXQoImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9sb2dpbi8/bmV4dCZyZWY9ZGJsJnJlZmlkPTgiKS50ZXh0DQoJCWIgPSBwYXJzZXIocCwiaHRtbC5wYXJzZXIiKQ0KCQlibCA9IFsibHNkIiwiamF6b2VzdCIsIm1fdHMiLCJsaSIsInRyeV9udW1iZXIiLCJ1bnJlY29nbml6ZWRfdHJpZXMiLCJsb2dpbiJdDQoJCWZvciBpIGluIGIoImlucHV0Iik6DQoJCQl0cnk6DQoJCQkJaWYgaS5nZXQoIm5hbWUiKSBpbiBibDpmaWlfZ3RnLnVwZGF0ZSh7aS5nZXQoIm5hbWUiKTppLmdldCgidmFsdWUiKX0pDQoJCQkJZWxzZTpjb250aW51ZQ0KCQkJZXhjZXB0OnBhc3MNCgkJZmlpX2d0Zy51cGRhdGUoeyJlbWFpbCI6IHVpZCwicGFzcyI6IHB3LCJwcmVmaWxsX2NvbnRhY3RfcG9pbnQiOiAiIiwicHJlZmlsbF9zb3VyY2UiOiAiIiwicHJlZmlsbF90eXBlIjogIiIsImZpcnN0X3ByZWZpbGxfc291cmNlIjogIiIsImZpcnN0X3ByZWZpbGxfdHlwZSI6ICIiLCJoYWRfY3BfcHJlZmlsbGVkIjogImZhbHNlIiwiaGFkX3Bhc3N3b3JkX3ByZWZpbGxlZCI6ICJmYWxzZSIsImlzX3NtYXJ0X2xvY2siOiAiZmFsc2UiLCJfZmJfbm9zY3JpcHQiOiAidHJ1ZSJ9KQ0KCQlkZWt1ID0gc2VzLnBvc3QoImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9sb2dpbi9kZXZpY2UtYmFzZWQvcmVndWxhci9sb2dpbi8/cmVmc3JjPWh0dHBzJTNBJTJGJTJGbWJhc2ljLmZhY2Vib29rLmNvbSUyRiZsd3Y9MTAwJnJlZmlkPTgiLGRhdGE9ZmlpX2d0ZykNCgkJaWYgImNfdXNlciIgaW4gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKS5rZXlzKCk6DQoJCQlrdWtpID0gKCI7Iikuam9pbihbICIlcz0lcyIgJSAoa2V5LCB2YWx1ZSkgZm9yIGtleSwgdmFsdWUgaW4gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKS5pdGVtcygpIF0pLnJlcGxhY2UoIm5vc2NyaXB0PTE7IiwgIiIpDQoJCQlwcmludChmIlxye0J9IHzilaTilrrilaTilroge0l9e3VpZH3igKJ7cHd9IikNCgkJCW9rLmFwcGVuZCgiJXN8JXMiJSh1aWQsIHB3KSkNCgkJCW9wZW4oIk9LLyVzLmpzb24iJSh0YW5nZ2FsKSwiYSIpLndyaXRlKCIlc3wlc1xuIiUodWlkLCBwdykpDQoJCQlicmVhaw0KCQllbGlmICJjaGVja3BvaW50IiBpbiBzZXMuY29va2llcy5nZXRfZGljdCgpLmtleXMoKToNCgkJCXRyeToNCgkJCQl0b2tlbiAgPSBvcGVuKCdsb2dpbi90b2tlbi5qc29uJywncicpLnJlYWQoKQ0KCQkJCWNvb2tpZSA9IHsnY29va2llJzpvcGVuKCdsb2dpbi9jb29raWUuanNvbicsJ3InKS5yZWFkKCl9DQoJCQkJd2l0aCByZXF1ZXN0cy5TZXNzaW9uKCkgYXMgc2VzOg0KCQkJCQl0dGwgPSBzZXMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8lcz9hY2Nlc3NfdG9rZW49JXMiJSh1aWQsIHRva2VuKSxjb29raWVzPWNvb2tpZSkuanNvbigpWyJiaXJ0aGRheSJdDQoJCQkJCW1vbnRoLCBkYXksIHllYXIgPSB0dGwuc3BsaXQoIi8iKQ0KCQkJCQltb250aCA9IGJ1bGFuX3R0bFttb250aF0NCgkJCQkJcHJpbnQoZiJccntIfSB84pWk4pa64pWk4pa6IHtJfXt1aWR94oCie3B3feKAontkYXl9IHttb250aH0ge3llYXJ9IikNCgkJCQkJY3AuYXBwZW5kKCIlc3wlcyIlKHVpZCwgcHcpKQ0KCQkJCQlvcGVuKCJDUC8lcy5qc29uIiUodGFuZ2dhbCksImEiKS53cml0ZSgiJXN8JXN8JXMgJXMgJXNcbiIlKHVpZCwgcHcsIGRheSwgbW9udGgsIHllYXIpKQ0KCQkJCQlicmVhaw0KCQkJZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6DQoJCQkJZGF5ID0gKCIgIikNCgkJCQltb250aCA9ICgiICIpDQoJCQkJeWVhciA9ICgiICIpDQoJCQlleGNlcHQ6cGFzcw0KCQkJY2VrX2xvZyh1aWQscHcsdWEpDQoJCQlwcmludChmIlxye0h9IHzilaTilrrilaTilroge0l9e3VpZH3igKJ7cHd9IikNCgkJCWNwLmFwcGVuZCgiJXN8JXMiJSh1aWQsIHB3KSkNCgkJCW9wZW4oIk9LLyVzLmpzb24iJSh0YW5nZ2FsKSwiYSIpLndyaXRlKCIlc3wlc1xuIiUodWlkLCBwdykpDQoJCQlicmVhaw0KCQllbHNlOg0KCQkJY29udGludWUNCg0KCWxvb3AgKz0gMQ0KDQpkZWYgbWJhc2ljYyh1aWQsIGZpaSk6DQoJdHJ5Og0KCQl1YSA9IG9wZW4oInVhIiwgInIiKS5yZWFkKCkNCglleGNlcHQgSU9FcnJvcjoNCgkJdWEgPSAiU3VwcG9ydHNGcmVzY289MSBEYWx2aWsvMi4xLjAgKExpbnV4OyBVOyBBbmRyb2lkIDYuMC4xOyBTTS1KMjEwRiBCdWlsZC9NTUIyOVEpIFNvdXJjZS8xIFtGQkFOL0VNQTtVTklUWV9QQUNLQUdFLzM0MjtGQkJWLzEwNzU4NjcwNjtGQkFWLzE3Mi4wLjAuOC4xODI7RkJEVi9TTS1KMjEwRjtGQkxDL2VuX1VTO0ZCT1AvMjBdIg0KCWdsb2JhbCBvaywgY3AsIGxvb3AsIHRva2VuLCBjb29raWUNCglzeXMuc3Rkb3V0LndyaXRlKGYiXHJ7SH1b4oCiXSB84pWk4pa64pWk4pa6IHtIfSB7bG9vcH0ve2xlbihpZCl9IHtJfU9LIDoge0l9e2xlbihvayl9IHtLfUNQIDoge0t9e2xlbihjcCl9Iik7c3lzLnN0ZG91dC5mbHVzaCgpDQoJZm9yIHB3IGluIGZpaToNCgkJZmlpX2d0ZyA9IHt9DQoJCXB3ID0gcHcubG93ZXIoKQ0KCQlzZXMgPSByZXF1ZXN0cy5TZXNzaW9uKCkNCgkJc2VzLmhlYWRlcnMudXBkYXRlKHsib3JpZ2luIjogImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbSIsICJhY2NlcHQtbGFuZ3VhZ2UiOiAiaWQtSUQsaWQ7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjciLCAiYWNjZXB0LWVuY29kaW5nIjogImd6aXAsIGRlZmxhdGUiLCAiYWNjZXB0IjogInRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgiLCAidXNlci1hZ2VudCI6IHVhLCAiSG9zdCI6ICJtYmFzaWMuZmFjZWJvb2suY29tIiwgInJlZmVyZXIiOiAiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL2xvZ2luLz9uZXh0JnJlZj1kYmwmZmwmcmVmaWQ9OCIsICJjYWNoZS1jb250cm9sIjogIm1heC1hZ2U9MCIsICJ1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzIjogIjEiLCAiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCJ9KQ0KCQlwID0gc2VzLmdldCgiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL2xvZ2luLz9uZXh0JnJlZj1kYmwmcmVmaWQ9OCIpLnRleHQNCgkJYiA9IHBhcnNlcihwLCJodG1sLnBhcnNlciIpDQoJCWJsID0gWyJsc2QiLCJqYXpvZXN0IiwibV90cyIsImxpIiwidHJ5X251bWJlciIsInVucmVjb2duaXplZF90cmllcyIsImxvZ2luIl0NCgkJZm9yIGkgaW4gYigiaW5wdXQiKToNCgkJCXRyeToNCgkJCQlpZiBpLmdldCgibmFtZSIpIGluIGJsOmZpaV9ndGcudXBkYXRlKHtpLmdldCgibmFtZSIpOmkuZ2V0KCJ2YWx1ZSIpfSkNCgkJCQllbHNlOmNvbnRpbnVlDQoJCQlleGNlcHQ6cGFzcw0KCQlmaWlfZ3RnLnVwZGF0ZSh7ImVtYWlsIjogdWlkLCJwYXNzIjogcHcsInByZWZpbGxfY29udGFjdF9wb2ludCI6ICIiLCJwcmVmaWxsX3NvdXJjZSI6ICIiLCJwcmVmaWxsX3R5cGUiOiAiIiwiZmlyc3RfcHJlZmlsbF9zb3VyY2UiOiAiIiwiZmlyc3RfcHJlZmlsbF90eXBlIjogIiIsImhhZF9jcF9wcmVmaWxsZWQiOiAiZmFsc2UiLCJoYWRfcGFzc3dvcmRfcHJlZmlsbGVkIjogImZhbHNlIiwiaXNfc21hcnRfbG9jayI6ICJmYWxzZSIsIl9mYl9ub3NjcmlwdCI6ICJ0cnVlIn0pDQoJCWRla3UgPSBzZXMucG9zdCgiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL2xvZ2luL2RldmljZS1iYXNlZC9yZWd1bGFyL2xvZ2luLz9yZWZzcmM9aHR0cHMlM0ElMkYlMkZtYmFzaWMuZmFjZWJvb2suY29tJTJGJmx3dj0xMDAmcmVmaWQ9OCIsZGF0YT1maWlfZ3RnKQ0KCQlpZiAiY191c2VyIiBpbiBzZXMuY29va2llcy5nZXRfZGljdCgpLmtleXMoKToNCgkJCWt1a2kgPSAoIjsiKS5qb2luKFsgIiVzPSVzIiAlIChrZXksIHZhbHVlKSBmb3Iga2V5LCB2YWx1ZSBpbiBzZXMuY29va2llcy5nZXRfZGljdCgpLml0ZW1zKCkgXSkucmVwbGFjZSgibm9zY3JpcHQ9MTsiLCAiIikNCgkJCXByaW50KGYiXHJ7SX0gfOKVpOKWuuKVpOKWuiB7SX17dWlkfeKAontwd30iKQ0KCQkJb2suYXBwZW5kKCIlc3wlcyIlKHVpZCwgcHcpKQ0KCQkJb3BlbigiT0svJXMuanNvbiIlKHRhbmdnYWwpLCJhIikud3JpdGUoIiVzfCVzXG4iJSh1aWQsIHB3KSkNCgkJCWJyZWFrDQoJCWVsaWYgImNoZWNrcG9pbnQiIGluIHNlcy5jb29raWVzLmdldF9kaWN0KCkua2V5cygpOg0KCQkJdHJ5Og0KCQkJCXRva2VuICA9IG9wZW4oJ2xvZ2luL3Rva2VuLmpzb24nLCdyJykucmVhZCgpDQoJCQkJY29va2llID0geydjb29raWUnOm9wZW4oJ2xvZ2luL2Nvb2tpZS5qc29uJywncicpLnJlYWQoKX0NCgkJCQl3aXRoIHJlcXVlc3RzLlNlc3Npb24oKSBhcyBzZXM6DQoJCQkJCXR0bCA9IHNlcy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyVzP2FjY2Vzc190b2tlbj0lcyIlKHVpZCwgdG9rZW4pLGNvb2tpZXM9Y29va2llKS5qc29uKClbImJpcnRoZGF5Il0NCgkJCQkJbW9udGgsIGRheSwgeWVhciA9IHR0bC5zcGxpdCgiLyIpDQoJCQkJCW1vbnRoID0gYnVsYW5fdHRsW21vbnRoXQ0KCQkJCQlwcmludChmIlxye0h9IHzilaTilrrilaTilroge0t9e3VpZH3igKJ7cHd94oCie2RheX0ge21vbnRofSB7eWVhcn0iKQ0KCQkJCQljcC5hcHBlbmQoIiVzfCVzIiUodWlkLCBwdykpDQoJCQkJCW9wZW4oIkNQLyVzLmpzb24iJSh0YW5nZ2FsKSwiYSIpLndyaXRlKCIlc3wlc3wlcyAlcyAlc1xuIiUodWlkLCBwdywgZGF5LCBtb250aCwgeWVhcikpDQoJCQkJCWJyZWFrDQoJCQlleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToNCgkJCQlkYXkgPSAoIiAiKQ0KCQkJCW1vbnRoID0gKCIgIikNCgkJCQl5ZWFyID0gKCIgIikNCgkJCWV4Y2VwdDpwYXNzDQoJCQlwcmludChmIlxye0h9IHzilaTilrrilaTilroge0t9e3VpZH3igKJ7cHd9IikNCgkJCWNwLmFwcGVuZCgiJXN8JXMiJSh1aWQsIHB3KSkNCgkJCW9wZW4oIkNQLyVzLmpzb24iJSh0YW5nZ2FsKSwiYSIpLndyaXRlKCIlc3wlc1xuIiUodWlkLCBwdykpDQoJCQlicmVhaw0KCQllbHNlOg0KCQkJY29udGludWUNCg0KCWxvb3AgKz0gMQ0KCQ0KZGVmIG1vYmlsKHVpZCwgZmlpKToNCgl0cnk6DQoJCXVhID0gb3BlbigidWEiLCAiciIpLnJlYWQoKQ0KCWV4Y2VwdCBJT0Vycm9yOg0KCQl1YSA9ICJTdXBwb3J0c0ZyZXNjbz0xIERhbHZpay8yLjEuMCAoTGludXg7IFU7IEFuZHJvaWQgNi4wLjE7IFNNLUoyMTBGIEJ1aWxkL01NQjI5USkgU291cmNlLzEgW0ZCQU4vRU1BO1VOSVRZX1BBQ0tBR0UvMzQyO0ZCQlYvMTA3NTg2NzA2O0ZCQVYvMTcyLjAuMC44LjE4MjtGQkRWL1NNLUoyMTBGO0ZCTEMvZW5fVVM7RkJPUC8yMF0iDQoJZ2xvYmFsIG9rLCBjcCwgbG9vcCwgdG9rZW4sIGNvb2tpZQ0KCXN5cy5zdGRvdXQud3JpdGUoZiJccntIfVvigKJdIHzilaTilrrilaTilroge0h9IHtsb29wfS97bGVuKGlkKX0ge0l9T0sgOiB7SX17bGVuKG9rKX0ge0t9Q1AgOiB7S317bGVuKGNwKX0iKTtzeXMuc3Rkb3V0LmZsdXNoKCkNCglmb3IgcHcgaW4gZmlpOg0KCQlmaWlfZ3RnID0ge30NCgkJcHcgPSBwdy5sb3dlcigpDQoJCXNlcyA9IHJlcXVlc3RzLlNlc3Npb24oKQ0KCQlzZXMuaGVhZGVycy51cGRhdGUoeyJvcmlnaW4iOiAiaHR0cHM6Ly9tb2JpbGUuZmFjZWJvb2suY29tIiwgImFjY2VwdC1sYW5ndWFnZSI6ICJpZC1JRCxpZDtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuNyIsICJhY2NlcHQtZW5jb2RpbmciOiAiZ3ppcCwgZGVmbGF0ZSIsICJhY2NlcHQiOiAidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCIsICJ1c2VyLWFnZW50IjogdWEsICJIb3N0IjogIm1iYXNpYy5mYWNlYm9vay5jb20iLCAicmVmZXJlciI6ICJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vbG9naW4vP25leHQmcmVmPWRibCZmbCZyZWZpZD04IiwgImNhY2hlLWNvbnRyb2wiOiAibWF4LWFnZT0wIiwgInVwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMiOiAiMSIsICJjb250ZW50LXR5cGUiOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIn0pDQoJCXAgPSBzZXMuZ2V0KCJodHRwczovL21vYmlsZS5mYWNlYm9vay5jb20vbG9naW4vP25leHQmcmVmPWRibCZyZWZpZD04IikudGV4dA0KCQliID0gcGFyc2VyKHAsImh0bWwucGFyc2VyIikNCgkJYmwgPSBbImxzZCIsImphem9lc3QiLCJtX3RzIiwibGkiLCJ0cnlfbnVtYmVyIiwidW5yZWNvZ25pemVkX3RyaWVzIiwibG9naW4iXQ0KCQlmb3IgaSBpbiBiKCJpbnB1dCIpOg0KCQkJdHJ5Og0KCQkJCWlmIGkuZ2V0KCJuYW1lIikgaW4gYmw6ZmlpX2d0Zy51cGRhdGUoe2kuZ2V0KCJuYW1lIik6aS5nZXQoInZhbHVlIil9KQ0KCQkJCWVsc2U6Y29udGludWUNCgkJCWV4Y2VwdDpwYXNzDQoJCWZpaV9ndGcudXBkYXRlKHsiZW1haWwiOiB1aWQsInBhc3MiOiBwdywicHJlZmlsbF9jb250YWN0X3BvaW50IjogIiIsInByZWZpbGxfc291cmNlIjogIiIsInByZWZpbGxfdHlwZSI6ICIiLCJmaXJzdF9wcmVmaWxsX3NvdXJjZSI6ICIiLCJmaXJzdF9wcmVmaWxsX3R5cGUiOiAiIiwiaGFkX2NwX3ByZWZpbGxlZCI6ICJmYWxzZSIsImhhZF9wYXNzd29yZF9wcmVmaWxsZWQiOiAiZmFsc2UiLCJpc19zbWFydF9sb2NrIjogImZhbHNlIiwiX2ZiX25vc2NyaXB0IjogInRydWUifSkNCgkJZGVrdSA9IHNlcy5wb3N0KCJodHRwczovL21vYmlsZS5mYWNlYm9vay5jb20vbG9naW4vZGV2aWNlLWJhc2VkL3JlZ3VsYXIvbG9naW4vP3JlZnNyYz1odHRwcyUzQSUyRiUyRm1iYXNpYy5mYWNlYm9vay5jb20lMkYmbHd2PTEwMCZyZWZpZD04IixkYXRhPWZpaV9ndGcpDQoJCWlmICJjX3VzZXIiIGluIHNlcy5jb29raWVzLmdldF9kaWN0KCkua2V5cygpOg0KCQkJa3VraSA9ICgiOyIpLmpvaW4oWyAiJXM9JXMiICUgKGtleSwgdmFsdWUpIGZvciBrZXksIHZhbHVlIGluIHNlcy5jb29raWVzLmdldF9kaWN0KCkuaXRlbXMoKSBdKS5yZXBsYWNlKCJub3NjcmlwdD0xOyIsICIiKQ0KCQkJcHJpbnQoZiJccntIfSB84pWk4pa64pWk4pa6IHtJfXt1aWR94oCie3B3fSIpDQoJCQlvay5hcHBlbmQoIiVzfCVzIiUodWlkLCBwdykpDQoJCQlvcGVuKCJPSy8lcy5qc29uIiUodGFuZ2dhbCksImEiKS53cml0ZSgiJXN8JXNcbiIlKHVpZCwgcHcpKQ0KCQkJYnJlYWsNCgkJZWxpZiAiY2hlY2twb2ludCIgaW4gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKS5rZXlzKCk6DQoJCQl0cnk6DQoJCQkJdG9rZW4gID0gb3BlbignbG9naW4vdG9rZW4uanNvbicsJ3InKS5yZWFkKCkNCgkJCQljb29raWUgPSB7J2Nvb2tpZSc6b3BlbignbG9naW4vY29va2llLmpzb24nLCdyJykucmVhZCgpfQ0KCQkJCXdpdGggcmVxdWVzdHMuU2Vzc2lvbigpIGFzIHNlczoNCgkJCQkJdHRsID0gc2VzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJXM/YWNjZXNzX3Rva2VuPSVzIiUodWlkLCB0b2tlbiksY29va2llcz1jb29raWUpLmpzb24oKVsiYmlydGhkYXkiXQ0KCQkJCQltb250aCwgZGF5LCB5ZWFyID0gdHRsLnNwbGl0KCIvIikNCgkJCQkJbW9udGggPSBidWxhbl90dGxbbW9udGhdDQoJCQkJCXByaW50KGYiXHJ7SH0gfOKVpOKWuuKVpOKWuiB7S317dWlkfeKAontwd33igKJ7ZGF5fSB7bW9udGh9IHt5ZWFyfSIpDQoJCQkJCWNwLmFwcGVuZCgiJXN8JXMiJSh1aWQsIHB3KSkNCgkJCQkJb3BlbigiQ1AvJXMuanNvbiIlKHRhbmdnYWwpLCJhIikud3JpdGUoIiVzfCVzfCVzICVzICVzXG4iJSh1aWQsIHB3LCBkYXksIG1vbnRoLCB5ZWFyKSkNCgkJCQkJYnJlYWsNCgkJCWV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOg0KCQkJCWRheSA9ICgiICIpDQoJCQkJbW9udGggPSAoIiAiKQ0KCQkJCXllYXIgPSAoIiAiKQ0KCQkJZXhjZXB0OnBhc3MNCgkJCWNla19sb2codWlkLHB3LHVhKQ0KCQkJcHJpbnQoZiJccntIfSB84pWk4pa64pWk4pa6IHtLfXt1aWR94oCie3B3fSIpDQoJCQljcC5hcHBlbmQoIiVzfCVzIiUodWlkLCBwdykpDQoJCQlvcGVuKCJDUC8lcy5qc29uIiUodGFuZ2dhbCksImEiKS53cml0ZSgiJXN8JXNcbiIlKHVpZCwgcHcpKQ0KCQkJYnJlYWsNCgkJZWxzZToNCgkJCWNvbnRpbnVlDQoNCglsb29wICs9IDENCg0KZGVmIG1vYmlsbCh1aWQsIGZpaSk6DQoJdHJ5Og0KCQl1YSA9IG9wZW4oInVhIiwgInIiKS5yZWFkKCkNCglleGNlcHQgSU9FcnJvcjoNCgkJdWEgPSAiU3VwcG9ydHNGcmVzY289MSBEYWx2aWsvMi4xLjAgKExpbnV4OyBVOyBBbmRyb2lkIDYuMC4xOyBTTS1KMjEwRiBCdWlsZC9NTUIyOVEpIFNvdXJjZS8xIFtGQkFOL0VNQTtVTklUWV9QQUNLQUdFLzM0MjtGQkJWLzEwNzU4NjcwNjtGQkFWLzE3Mi4wLjAuOC4xODI7RkJEVi9TTS1KMjEwRjtGQkxDL2VuX1VTO0ZCT1AvMjBdIg0KCWdsb2JhbCBvaywgY3AsIGxvb3AsIHRva2VuLCBjb29raWUNCglzeXMuc3Rkb3V0LndyaXRlKGYiXHJ7SH1b4oCiXSDilaTilrrilaTilroge0h9IHtsb29wfS97bGVuKGlkKX0ge0l9T0sgOiB7SX17bGVuKG9rKX0ge0t9Q1AgOiB7S317bGVuKGNwKX0iKTtzeXMuc3Rkb3V0LmZsdXNoKCkNCglmb3IgcHcgaW4gZmlpOg0KCQlmaWlfZ3RnID0ge30NCgkJcHcgPSBwdy5sb3dlcigpDQoJCXNlcyA9IHJlcXVlc3RzLlNlc3Npb24oKQ0KCQlzZXMuaGVhZGVycy51cGRhdGUoeyJvcmlnaW4iOiAiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tIiwgImFjY2VwdC1sYW5ndWFnZSI6ICJpZC1JRCxpZDtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuNyIsICJhY2NlcHQtZW5jb2RpbmciOiAiZ3ppcCwgZGVmbGF0ZSIsICJhY2NlcHQiOiAidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCIsICJ1c2VyLWFnZW50IjogdWEsICJIb3N0IjogIm1iYXNpYy5mYWNlYm9vay5jb20iLCAicmVmZXJlciI6ICJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vbG9naW4vP25leHQmcmVmPWRibCZmbCZyZWZpZD04IiwgImNhY2hlLWNvbnRyb2wiOiAibWF4LWFnZT0wIiwgInVwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMiOiAiMSIsICJjb250ZW50LXR5cGUiOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIn0pDQoJCXAgPSBzZXMuZ2V0KCJodHRwczovL21vYmlsZS5mYWNlYm9vay5jb20vbG9naW4vP25leHQmcmVmPWRibCZyZWZpZD04IikudGV4dA0KCQliID0gcGFyc2VyKHAsImh0bWwucGFyc2VyIikNCgkJYmwgPSBbImxzZCIsImphem9lc3QiLCJtX3RzIiwibGkiLCJ0cnlfbnVtYmVyIiwidW5yZWNvZ25pemVkX3RyaWVzIiwibG9naW4iXQ0KCQlmb3IgaSBpbiBiKCJpbnB1dCIpOg0KCQkJdHJ5Og0KCQkJCWlmIGkuZ2V0KCJuYW1lIikgaW4gYmw6ZmlpX2d0Zy51cGRhdGUoe2kuZ2V0KCJuYW1lIik6aS5nZXQoInZhbHVlIil9KQ0KCQkJCWVsc2U6Y29udGludWUNCgkJCWV4Y2VwdDpwYXNzDQoJCWZpaV9ndGcudXBkYXRlKHsiZW1haWwiOiB1aWQsInBhc3MiOiBwdywicHJlZmlsbF9jb250YWN0X3BvaW50IjogIiIsInByZWZpbGxfc291cmNlIjogIiIsInByZWZpbGxfdHlwZSI6ICIiLCJmaXJzdF9wcmVmaWxsX3NvdXJjZSI6ICIiLCJmaXJzdF9wcmVmaWxsX3R5cGUiOiAiIiwiaGFkX2NwX3ByZWZpbGxlZCI6ICJmYWxzZSIsImhhZF9wYXNzd29yZF9wcmVmaWxsZWQiOiAiZmFsc2UiLCJpc19zbWFydF9sb2NrIjogImZhbHNlIiwiX2ZiX25vc2NyaXB0IjogInRydWUifSkNCgkJZGVrdSA9IHNlcy5wb3N0KCJodHRwczovL21vYmlsZS5mYWNlYm9vay5jb20vbG9naW4vZGV2aWNlLWJhc2VkL3JlZ3VsYXIvbG9naW4vP3JlZnNyYz1odHRwcyUzQSUyRiUyRm1iYXNpYy5mYWNlYm9vay5jb20lMkYmbHd2PTEwMCZyZWZpZD04IixkYXRhPWZpaV9ndGcpDQoJCWlmICJjX3VzZXIiIGluIHNlcy5jb29raWVzLmdldF9kaWN0KCkua2V5cygpOg0KCQkJa3VraSA9ICgiOyIpLmpvaW4oWyAiJXM9JXMiICUgKGtleSwgdmFsdWUpIGZvciBrZXksIHZhbHVlIGluIHNlcy5jb29raWVzLmdldF9kaWN0KCkuaXRlbXMoKSBdKS5yZXBsYWNlKCJub3NjcmlwdD0xOyIsICIiKQ0KCQkJcHJpbnQoZiJccntIfSB84pWk4pa64pWk4pa6IHtJfXt1aWR94oCie3B3fSIpDQoJCQlvay5hcHBlbmQoIiVzfCVzIiUodWlkLCBwdykpDQoJCQlvcGVuKCJPSy8lcy5qc29uIiUodGFuZ2dhbCksImEiKS53cml0ZSgiJXN8JXNcbiIlKHVpZCwgcHcpKQ0KCQkJYnJlYWsNCgkJZWxpZiAiY2hlY2twb2ludCIgaW4gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKS5rZXlzKCk6DQoJCQl0cnk6DQoJCQkJdG9rZW4gID0gb3BlbignbG9naW4vdG9rZW4uanNvbicsJ3InKS5yZWFkKCkNCgkJCQljb29raWUgPSB7J2Nvb2tpZSc6b3BlbignbG9naW4vY29va2llLmpzb24nLCdyJykucmVhZCgpfQ0KCQkJCXdpdGggcmVxdWVzdHMuU2Vzc2lvbigpIGFzIHNlczoNCgkJCQkJdHRsID0gc2VzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJXM/YWNjZXNzX3Rva2VuPSVzIiUodWlkLCB0b2tlbiksY29va2llcz1jb29raWUpLmpzb24oKVsiYmlydGhkYXkiXQ0KCQkJCQltb250aCwgZGF5LCB5ZWFyID0gdHRsLnNwbGl0KCIvIikNCgkJCQkJbW9udGggPSBidWxhbl90dGxbbW9udGhdDQoJCQkJCXByaW50KGYiXHJ7SH0gfOKVpOKWuuKVpOKWuiB7S317dWlkfeKAontwd33igKJ7ZGF5fSB7bW9udGh9IHt5ZWFyfSIpDQoJCQkJCWNwLmFwcGVuZCgiJXN8JXMiJSh1aWQsIHB3KSkNCgkJCQkJb3BlbigiQ1AvJXMuanNvbiIlKHRhbmdnYWwpLCJhIikud3JpdGUoIiVzfCVzfCVzICVzICVzXG4iJSh1aWQsIHB3LCBkYXksIG1vbnRoLCB5ZWFyKSkNCgkJCQkJYnJlYWsNCgkJCWV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOg0KCQkJCWRheSA9ICgiICIpDQoJCQkJbW9udGggPSAoIiAiKQ0KCQkJCXllYXIgPSAoIiAiKQ0KCQkJZXhjZXB0OnBhc3MNCgkJCXByaW50KGYiXHJ7SH0gfOKVpOKWuuKVpOKWuiB7S317dWlkfeKAontwd30iKQ0KCQkJY3AuYXBwZW5kKCIlc3wlcyIlKHVpZCwgcHcpKQ0KCQkJb3BlbigiQ1AvJXMuanNvbiIlKHRhbmdnYWwpLCJhIikud3JpdGUoIiVzfCVzXG4iJSh1aWQsIHB3KSkNCgkJCWJyZWFrDQoJCWVsc2U6DQoJCQljb250aW51ZQ0KDQoJbG9vcCArPSAxDQoJDQpkZWYgY2VrX2xvZyh1aWQscHcsdWEpOg0KCW1iID0gKCJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20iKQ0KCXNlcyA9IHJlcXVlc3RzLlNlc3Npb24oKQ0KCW9wdGlvbiA9IFtdDQoJc2VzLmhlYWRlcnMudXBkYXRlKHsiSG9zdCI6ICJtYmFzaWMuZmFjZWJvb2suY29tIiwiY2FjaGUtY29udHJvbCI6ICJtYXgtYWdlPTAiLCJ1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzIjogIjEiLCJvcmlnaW4iOiBtYiwiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIsInVzZXItYWdlbnQiOiB1YSwiYWNjZXB0IjogInRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjkiLCJ4LXJlcXVlc3RlZC13aXRoIjogIm1hcmsudmlhLmdwIiwic2VjLWZldGNoLXNpdGUiOiAic2FtZS1vcmlnaW4iLCJzZWMtZmV0Y2gtbW9kZSI6ICJuYXZpZ2F0ZSIsInNlYy1mZXRjaC11c2VyIjogIj8xIiwic2VjLWZldGNoLWRlc3QiOiAiZG9jdW1lbnQiLCJyZWZlcmVyIjogbWIrIi9sb2dpbi8/bmV4dCZyZWY9ZGJsJmZsJnJlZmlkPTgiLCJhY2NlcHQtZW5jb2RpbmciOiAiZ3ppcCwgZGVmbGF0ZSIsImFjY2VwdC1sYW5ndWFnZSI6ICJpZC1JRCxpZDtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuNyJ9KQ0KCWRhdGEgPSB7fQ0KCWdlZCA9IHBhcnNlcihzZXMuZ2V0KG1iKyIvbG9naW4vP25leHQmcmVmPWRibCZmbCZyZWZpZD04IiwgaGVhZGVycz17InVzZXItYWdlbnQiOnVhfSkudGV4dCwgImh0bWwucGFyc2VyIikNCglmbSA9IGdlZC5maW5kKCJmb3JtIix7Im1ldGhvZCI6InBvc3QifSkNCglsaXN0ID0gWyJsc2QiLCJqYXpvZXN0IiwibV90cyIsImxpIiwidHJ5X251bWJlciIsInVucmVjb2duaXplZF90cmllcyIsImxvZ2luIiwiYmlfeHJ3aCJdDQoJZm9yIGkgaW4gZm0uZmluZF9hbGwoImlucHV0Iik6DQoJCWlmIGkuZ2V0KCJuYW1lIikgaW4gbGlzdDoNCgkJCWRhdGEudXBkYXRlKHtpLmdldCgibmFtZSIpOmkuZ2V0KCJ2YWx1ZSIpfSkNCgkJZWxzZToNCgkJCWNvbnRpbnVlDQoJZGF0YS51cGRhdGUoeyJlbWFpbCI6dWlkLCJwYXNzIjpwd30pDQoJcnVuID0gcGFyc2VyKHNlcy5wb3N0KG1iK2ZtLmdldCgiYWN0aW9uIiksIGRhdGE9ZGF0YSwgYWxsb3dfcmVkaXJlY3RzPVRydWUpLnRleHQsICJodG1sLnBhcnNlciIpDQoJaWYgImNoZWNrcG9pbnQiIGluIHNlcy5jb29raWVzOg0KCQlmb3JtID0gcnVuLmZpbmQoImZvcm0iKQ0KCQlkdHNnID0gZm9ybS5maW5kKCJpbnB1dCIseyJuYW1lIjoiZmJfZHRzZyJ9KVsidmFsdWUiXQ0KCQlqenN0ID0gZm9ybS5maW5kKCJpbnB1dCIseyJuYW1lIjoiamF6b2VzdCJ9KVsidmFsdWUiXQ0KCQluaCAgID0gZm9ybS5maW5kKCJpbnB1dCIseyJuYW1lIjoibmgifSlbInZhbHVlIl0NCgkJZGF0YUQgPSB7ImZiX2R0c2ciOiBkdHNnLCJmYl9kdHNnIjogZHRzZywiamF6b2VzdCI6IGp6c3QsImphem9lc3QiOiBqenN0LCJjaGVja3BvaW50X2RhdGEiOiIiLCJzdWJtaXRbQ29udGludWVdIjoiTGFuanV0a2FuIiwibmgiOiBuaH0NCgkJdGVtcGVrID0gcGFyc2VyKHNlcy5wb3N0KG1iK2Zvcm1bImFjdGlvbiJdLCBkYXRhPWRhdGFEKS50ZXh0LCAiaHRtbC5wYXJzZXIiKQ0KCQluZ2V3ID0gW3l5LnRleHQgZm9yIHl5IGluIHRlbXBlay5maW5kX2FsbCgib3B0aW9uIildDQoJCXByaW50KGYiXHJ7SH1b4oCiXXtLfeKVpOKWuuKVpOKWuiB7SX17dWlkfeKAontwd30iKQ0KCQlmb3Igb3B0IGluIHJhbmdlKGxlbihuZ2V3KSk6DQoJCQlqYWxhbihmIntVfVt7Qn17c3RyKG9wdCsxKX17VX1de0l94pWk4pa64pWk4pa64pWk4pa6IHtVfVt7Qn17bmdld1tvcHRdfXtVfSIpDQoJCWlmICIwIiBpbiBzdHIobGVuKG5nZXcpKToNCgkJCWphbGFuKGYie0h9W+KAol17SX0gSG9yZSBha3VueWEgdGFiIHllc3NzLCBzaWxhaGthbiBkaSBsb2dpbiAiKQ0KCWVsaWYgImxvZ2luX2Vycm9yIiBpbiBzdHIocnVuKToNCgkJamFsYW4oZiJccntIfVvigKJde0t94pWk4pa64pWk4pa64pWk4pa64pWk4pa6IHtJfXt1aWR94oCie3B3fSIpDQoJZWxzZToNCgkJamFsYW4oZiJccntIfVvigKJde0t94pWk4pa64pWk4pa64pWk4pa64pWk4pa6IHtJfXt1aWR94oCie3B3fSIpDQoNCg0KaWYgX19uYW1lX189PSJfX21haW5fXyI6DQogICAgb3Muc3lzdGVtKCJjbGVhciIpDQogICAgbWtkaXJfZGF0YV9sb2dpbigpDQogICAgbWVudSgp"))
